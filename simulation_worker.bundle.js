(()=>{var t={1312:(t,e,i)=>{var r;
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */!function(){"use strict";var e="input is invalid type",s="object"==typeof window,n=s?window:{};n.JS_SHA256_NO_WINDOW&&(s=!1);var a=!s&&"object"==typeof self,o=!n.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&"renderer"!=process.type;o?n=i.g:a&&(n=self);var l=!n.JS_SHA256_NO_COMMON_JS&&t.exports,h=i.amdO,c=!n.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,A="0123456789abcdef".split(""),d=[-2147483648,8388608,32768,128],u=[24,16,8,0],f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=["hex","array","digest","arrayBuffer"],p=[];!n.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!c||!n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var m=function(t,e){return function(i){return new B(e,!0).update(i)[t]()}},b=function(t){var e=m("hex",t);o&&(e=y(e,t)),e.create=function(){return new B(t)},e.update=function(t){return e.create().update(t)};for(var i=0;i<g.length;++i){var r=g[i];e[r]=m(r,t)}return e},y=function(t,r){var s,a=i(4394),o=i(1903).Buffer,l=r?"sha224":"sha256";s=o.from&&!n.JS_SHA256_NO_BUFFER_FROM?o.from:function(t){return new o(t)};return function(i){if("string"==typeof i)return a.createHash(l).update(i,"utf8").digest("hex");if(null==i)throw new Error(e);return i.constructor===ArrayBuffer&&(i=new Uint8Array(i)),Array.isArray(i)||ArrayBuffer.isView(i)||i.constructor===o?a.createHash(l).update(s(i)).digest("hex"):t(i)}},w=function(t,e){return function(i,r){return new x(i,e,!0).update(r)[t]()}},I=function(t){var e=w("hex",t);e.create=function(e){return new x(e,t)},e.update=function(t,i){return e.create(t).update(i)};for(var i=0;i<g.length;++i){var r=g[i];e[r]=w(r,t)}return e};function B(t,e){e?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function x(t,i,r){var s,n=typeof t;if("string"===n){var a,o=[],l=t.length,h=0;for(s=0;s<l;++s)(a=t.charCodeAt(s))<128?o[h++]=a:a<2048?(o[h++]=192|a>>>6,o[h++]=128|63&a):a<55296||a>=57344?(o[h++]=224|a>>>12,o[h++]=128|a>>>6&63,o[h++]=128|63&a):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++s)),o[h++]=240|a>>>18,o[h++]=128|a>>>12&63,o[h++]=128|a>>>6&63,o[h++]=128|63&a);t=o}else{if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||c&&ArrayBuffer.isView(t)))throw new Error(e)}t.length>64&&(t=new B(i,!0).update(t).array());var A=[],d=[];for(s=0;s<64;++s){var u=t[s]||0;A[s]=92^u,d[s]=54^u}B.call(this,i,r),this.update(d),this.oKeyPad=A,this.inner=!0,this.sharedMemory=r}B.prototype.update=function(t){if(!this.finalized){var i,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||c&&ArrayBuffer.isView(t)))throw new Error(e);i=!0}for(var s,n,a=0,o=t.length,l=this.blocks;a<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),i)for(n=this.start;a<o&&n<64;++a)l[n>>>2]|=t[a]<<u[3&n++];else for(n=this.start;a<o&&n<64;++a)(s=t.charCodeAt(a))<128?l[n>>>2]|=s<<u[3&n++]:s<2048?(l[n>>>2]|=(192|s>>>6)<<u[3&n++],l[n>>>2]|=(128|63&s)<<u[3&n++]):s<55296||s>=57344?(l[n>>>2]|=(224|s>>>12)<<u[3&n++],l[n>>>2]|=(128|s>>>6&63)<<u[3&n++],l[n>>>2]|=(128|63&s)<<u[3&n++]):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++a)),l[n>>>2]|=(240|s>>>18)<<u[3&n++],l[n>>>2]|=(128|s>>>12&63)<<u[3&n++],l[n>>>2]|=(128|s>>>6&63)<<u[3&n++],l[n>>>2]|=(128|63&s)<<u[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=l[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=d[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},B.prototype.hash=function(){var t,e,i,r,s,n,a,o,l,h=this.h0,c=this.h1,A=this.h2,d=this.h3,u=this.h4,g=this.h5,p=this.h6,m=this.h7,b=this.blocks;for(t=16;t<64;++t)e=((s=b[t-15])>>>7|s<<25)^(s>>>18|s<<14)^s>>>3,i=((s=b[t-2])>>>17|s<<15)^(s>>>19|s<<13)^s>>>10,b[t]=b[t-16]+e+b[t-7]+i|0;for(l=c&A,t=0;t<64;t+=4)this.first?(this.is224?(n=300032,m=(s=b[0]-1413257819)-150054599|0,d=s+24177077|0):(n=704751109,m=(s=b[0]-210244248)-1521486534|0,d=s+143694565|0),this.first=!1):(e=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),r=(n=h&c)^h&A^l,m=d+(s=m+(i=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&g^~u&p)+f[t]+b[t])|0,d=s+(e+r)|0),e=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(a=d&h)^d&c^n,p=A+(s=p+(i=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&u^~m&g)+f[t+1]+b[t+1])|0,e=((A=s+(e+r)|0)>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10),r=(o=A&d)^A&h^a,g=c+(s=g+(i=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&u)+f[t+2]+b[t+2])|0,e=((c=s+(e+r)|0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),r=(l=c&A)^c&d^o,u=h+(s=u+(i=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&p^~g&m)+f[t+3]+b[t+3])|0,h=s+(e+r)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+h|0,this.h1=this.h1+c|0,this.h2=this.h2+A|0,this.h3=this.h3+d|0,this.h4=this.h4+u|0,this.h5=this.h5+g|0,this.h6=this.h6+p|0,this.h7=this.h7+m|0},B.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,r=this.h3,s=this.h4,n=this.h5,a=this.h6,o=this.h7,l=A[t>>>28&15]+A[t>>>24&15]+A[t>>>20&15]+A[t>>>16&15]+A[t>>>12&15]+A[t>>>8&15]+A[t>>>4&15]+A[15&t]+A[e>>>28&15]+A[e>>>24&15]+A[e>>>20&15]+A[e>>>16&15]+A[e>>>12&15]+A[e>>>8&15]+A[e>>>4&15]+A[15&e]+A[i>>>28&15]+A[i>>>24&15]+A[i>>>20&15]+A[i>>>16&15]+A[i>>>12&15]+A[i>>>8&15]+A[i>>>4&15]+A[15&i]+A[r>>>28&15]+A[r>>>24&15]+A[r>>>20&15]+A[r>>>16&15]+A[r>>>12&15]+A[r>>>8&15]+A[r>>>4&15]+A[15&r]+A[s>>>28&15]+A[s>>>24&15]+A[s>>>20&15]+A[s>>>16&15]+A[s>>>12&15]+A[s>>>8&15]+A[s>>>4&15]+A[15&s]+A[n>>>28&15]+A[n>>>24&15]+A[n>>>20&15]+A[n>>>16&15]+A[n>>>12&15]+A[n>>>8&15]+A[n>>>4&15]+A[15&n]+A[a>>>28&15]+A[a>>>24&15]+A[a>>>20&15]+A[a>>>16&15]+A[a>>>12&15]+A[a>>>8&15]+A[a>>>4&15]+A[15&a];return this.is224||(l+=A[o>>>28&15]+A[o>>>24&15]+A[o>>>20&15]+A[o>>>16&15]+A[o>>>12&15]+A[o>>>8&15]+A[o>>>4&15]+A[15&o]),l},B.prototype.toString=B.prototype.hex,B.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,r=this.h3,s=this.h4,n=this.h5,a=this.h6,o=this.h7,l=[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r,s>>>24&255,s>>>16&255,s>>>8&255,255&s,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,255&o),l},B.prototype.array=B.prototype.digest,B.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},x.prototype=new B,x.prototype.finalize=function(){if(B.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();B.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),B.prototype.finalize.call(this)}};var C=b();C.sha256=C,C.sha224=b(!0),C.sha256.hmac=I(),C.sha224.hmac=I(!0),l?t.exports=C:(n.sha256=C.sha256,n.sha224=C.sha224,h&&(void 0===(r=function(){return C}.call(C,i,C,t))||(t.exports=r)))}()},1903:()=>{},4394:()=>{}},e={};function i(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,i),n.exports}i.amdO={},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";
/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const t=1e3,e=1001,r=1002,s=1015,n=2300,a=2301,o=2302,l=2400,h=2401,c=2402,A="srgb",d="srgb-linear",u="linear",f="srgb",g=7680,p=35044,m=2e3,b=2001;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function y(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function w(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const I={};let B=null;function x(...t){const e="THREE."+t.shift();B?B("warn",e,...t):console.warn(e,...t)}function C(...t){const e="THREE."+t.shift();B?B("error",e,...t):console.error(e,...t)}function S(...t){const e=t.join(" ");e in I||(I[e]=!0,x(...t))}class k{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return void 0!==i&&(void 0!==i[t]&&-1!==i[t].indexOf(e))}removeEventListener(t,e){const i=this._listeners;if(void 0===i)return;const r=i[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){const e=this._listeners;if(void 0===e)return;const i=e[t.type];if(void 0!==i){t.target=this;const e=i.slice(0);for(let i=0,r=e.length;i<r;i++)e[i].call(this,t);t.target=null}}}const _=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];Math.PI,Math.PI;function E(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(_[255&t]+_[t>>8&255]+_[t>>16&255]+_[t>>24&255]+"-"+_[255&e]+_[e>>8&255]+"-"+_[e>>16&15|64]+_[e>>24&255]+"-"+_[63&i|128]+_[i>>8&255]+"-"+_[i>>16&255]+_[i>>24&255]+_[255&r]+_[r>>8&255]+_[r>>16&255]+_[r>>24&255]).toLowerCase()}function M(t,e,i){return Math.max(e,Math.min(i,t))}function P(t,e){return(t%e+e)%e}function T(t,e,i){return(1-i)*t+i*e}function Q(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function v(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class D{constructor(t=0,e=0){D.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=M(this.x,t.x,e.x),this.y=M(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=M(this.x,t,e),this.y=M(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(M(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(M(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,n=this.y-t.y;return this.x=s*i-n*r+t.x,this.y=s*r+n*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class R{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,s,n,a){let o=i[r+0],l=i[r+1],h=i[r+2],c=i[r+3],A=s[n+0],d=s[n+1],u=s[n+2],f=s[n+3];if(a<=0)return t[e+0]=o,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(a>=1)return t[e+0]=A,t[e+1]=d,t[e+2]=u,void(t[e+3]=f);if(c!==f||o!==A||l!==d||h!==u){let t=o*A+l*d+h*u+c*f;t<0&&(A=-A,d=-d,u=-u,f=-f,t=-t);let e=1-a;if(t<.9995){const i=Math.acos(t),r=Math.sin(i);e=Math.sin(e*i)/r,o=o*e+A*(a=Math.sin(a*i)/r),l=l*e+d*a,h=h*e+u*a,c=c*e+f*a}else{o=o*e+A*a,l=l*e+d*a,h=h*e+u*a,c=c*e+f*a;const t=1/Math.sqrt(o*o+l*l+h*h+c*c);o*=t,l*=t,h*=t,c*=t}}t[e]=o,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,i,r,s,n){const a=i[r],o=i[r+1],l=i[r+2],h=i[r+3],c=s[n],A=s[n+1],d=s[n+2],u=s[n+3];return t[e]=a*u+h*c+o*d-l*A,t[e+1]=o*u+h*A+l*c-a*d,t[e+2]=l*u+h*d+a*A-o*c,t[e+3]=h*u-a*c-o*A-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,r=t._y,s=t._z,n=t._order,a=Math.cos,o=Math.sin,l=a(i/2),h=a(r/2),c=a(s/2),A=o(i/2),d=o(r/2),u=o(s/2);switch(n){case"XYZ":this._x=A*h*c+l*d*u,this._y=l*d*c-A*h*u,this._z=l*h*u+A*d*c,this._w=l*h*c-A*d*u;break;case"YXZ":this._x=A*h*c+l*d*u,this._y=l*d*c-A*h*u,this._z=l*h*u-A*d*c,this._w=l*h*c+A*d*u;break;case"ZXY":this._x=A*h*c-l*d*u,this._y=l*d*c+A*h*u,this._z=l*h*u+A*d*c,this._w=l*h*c-A*d*u;break;case"ZYX":this._x=A*h*c-l*d*u,this._y=l*d*c+A*h*u,this._z=l*h*u-A*d*c,this._w=l*h*c+A*d*u;break;case"YZX":this._x=A*h*c+l*d*u,this._y=l*d*c+A*h*u,this._z=l*h*u-A*d*c,this._w=l*h*c-A*d*u;break;case"XZY":this._x=A*h*c-l*d*u,this._y=l*d*c-A*h*u,this._z=l*h*u+A*d*c,this._w=l*h*c+A*d*u;break;default:x("Quaternion: .setFromEuler() encountered an unknown order: "+n)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],s=e[8],n=e[1],a=e[5],o=e[9],l=e[2],h=e[6],c=e[10],A=i+a+c;if(A>0){const t=.5/Math.sqrt(A+1);this._w=.25/t,this._x=(h-o)*t,this._y=(s-l)*t,this._z=(n-r)*t}else if(i>a&&i>c){const t=2*Math.sqrt(1+i-a-c);this._w=(h-o)/t,this._x=.25*t,this._y=(r+n)/t,this._z=(s+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-i-c);this._w=(s-l)/t,this._x=(r+n)/t,this._y=.25*t,this._z=(o+h)/t}else{const t=2*Math.sqrt(1+c-i-a);this._w=(n-r)/t,this._x=(s+l)/t,this._y=(o+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-8?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(M(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,s=t._z,n=t._w,a=e._x,o=e._y,l=e._z,h=e._w;return this._x=i*h+n*a+r*l-s*o,this._y=r*h+n*o+s*a-i*l,this._z=s*h+n*l+i*o-r*a,this._w=n*h-i*a-r*o-s*l,this._onChangeCallback(),this}slerp(t,e){if(e<=0)return this;if(e>=1)return this.copy(t);let i=t._x,r=t._y,s=t._z,n=t._w,a=this.dot(t);a<0&&(i=-i,r=-r,s=-s,n=-n,a=-a);let o=1-e;if(a<.9995){const t=Math.acos(a),l=Math.sin(t);o=Math.sin(o*t)/l,e=Math.sin(e*t)/l,this._x=this._x*o+i*e,this._y=this._y*o+r*e,this._z=this._z*o+s*e,this._w=this._w*o+n*e,this._onChangeCallback()}else this._x=this._x*o+i*e,this._y=this._y*o+r*e,this._z=this._z*o+s*e,this._w=this._w*o+n*e,this.normalize();return this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(t=0,e=0,i=0){z.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(F.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(F.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=t.elements,n=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*n,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*n,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*n,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,s=t.x,n=t.y,a=t.z,o=t.w,l=2*(n*r-a*i),h=2*(a*e-s*r),c=2*(s*i-n*e);return this.x=e+o*l+n*c-a*h,this.y=i+o*h+a*l-s*c,this.z=r+o*c+s*h-n*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=M(this.x,t.x,e.x),this.y=M(this.y,t.y,e.y),this.z=M(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=M(this.x,t,e),this.y=M(this.y,t,e),this.z=M(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(M(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,s=t.z,n=e.x,a=e.y,o=e.z;return this.x=r*o-s*a,this.y=s*n-i*o,this.z=i*a-r*n,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return W.copy(this).projectOnVector(t),this.sub(W)}reflect(t){return this.sub(W.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(M(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const W=new z,F=new R;class U{constructor(t,e,i,r,s,n,a,o,l){U.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,i,r,s,n,a,o,l)}set(t,e,i,r,s,n,a,o,l){const h=this.elements;return h[0]=t,h[1]=r,h[2]=a,h[3]=e,h[4]=s,h[5]=o,h[6]=i,h[7]=n,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,n=i[0],a=i[3],o=i[6],l=i[1],h=i[4],c=i[7],A=i[2],d=i[5],u=i[8],f=r[0],g=r[3],p=r[6],m=r[1],b=r[4],y=r[7],w=r[2],I=r[5],B=r[8];return s[0]=n*f+a*m+o*w,s[3]=n*g+a*b+o*I,s[6]=n*p+a*y+o*B,s[1]=l*f+h*m+c*w,s[4]=l*g+h*b+c*I,s[7]=l*p+h*y+c*B,s[2]=A*f+d*m+u*w,s[5]=A*g+d*b+u*I,s[8]=A*p+d*y+u*B,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],l=t[7],h=t[8];return e*n*h-e*a*l-i*s*h+i*a*o+r*s*l-r*n*o}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=h*n-a*l,A=a*o-h*s,d=l*s-n*o,u=e*c+i*A+r*d;if(0===u)return this.set(0,0,0,0,0,0,0,0,0);const f=1/u;return t[0]=c*f,t[1]=(r*l-h*i)*f,t[2]=(a*i-r*n)*f,t[3]=A*f,t[4]=(h*e-r*o)*f,t[5]=(r*s-a*e)*f,t[6]=d*f,t[7]=(i*o-l*e)*f,t[8]=(n*e-i*s)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,n,a){const o=Math.cos(s),l=Math.sin(s);return this.set(i*o,i*l,-i*(o*n+l*a)+n+t,-r*l,r*o,-r*(-l*n+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(N.makeScale(t,e)),this}rotate(t){return this.premultiply(N.makeRotation(-t)),this}translate(t,e){return this.premultiply(N.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const N=new U,L=(new U).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),O=(new U).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function V(){const t={enabled:!0,workingColorSpace:d,spaces:{},convert:function(t,e,i){return!1!==this.enabled&&e!==i&&e&&i?(this.spaces[e].transfer===f&&(t.r=G(t.r),t.g=G(t.g),t.b=G(t.b)),this.spaces[e].primaries!==this.spaces[i].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[i].fromXYZ)),this.spaces[i].transfer===f&&(t.r=J(t.r),t.g=J(t.g),t.b=J(t.b)),t):t},workingToColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},colorSpaceToWorking:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return""===t?u:this.spaces[t].transfer},getToneMappingMode:function(t){return this.spaces[t].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,i){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[i].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(e,i){return S("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(e,i)},toWorkingColorSpace:function(e,i){return S("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(e,i)}},e=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[d]:{primaries:e,whitePoint:r,transfer:u,toXYZ:L,fromXYZ:O,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:A},outputColorSpaceConfig:{drawingBufferColorSpace:A}},[A]:{primaries:e,whitePoint:r,transfer:f,toXYZ:L,fromXYZ:O,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:A}}}),t}const H=V();function G(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function J(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let q;class Z{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{void 0===q&&(q=w("canvas")),q.width=t.width,q.height=t.height;const e=q.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),i=q}return i.toDataURL(e)}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=w("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let t=0;t<s.length;t++)s[t]=255*G(s[t]/255);return i.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*G(e[t]/255)):e[t]=G(e[t]);return{data:e,width:t.width,height:t.height}}return x("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Y=0;class K{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Y++}),this.uuid=E(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):null!==e?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,i=r.length;e<i;e++)r[e].isDataTexture?t.push(j(r[e].image)):t.push(j(r[e]))}else t=j(r);i.url=t}return e||(t.images[this.uuid]=i),i}}function j(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Z.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(x("Texture: Unable to serialize Texture."),{})}let X=0;const $=new z;class tt extends k{constructor(t=tt.DEFAULT_IMAGE,e=tt.DEFAULT_MAPPING,i=1001,r=1001,s=1006,n=1008,a=1023,o=1009,l=tt.DEFAULT_ANISOTROPY,h=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:X++}),this.uuid=E(),this.name="",this.source=new K(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=n,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new D(0,0),this.repeat=new D(1,1),this.center=new D(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new U,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize($).x}get height(){return this.source.getSize($).y}get depth(){return this.source.getSize($).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const i=t[e];if(void 0===i){x(`Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[e]=i:x(`Texture.setValues(): property '${e}' does not exist.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(i){if(300!==this.mapping)return i;if(i.applyMatrix3(this.matrix),i.x<0||i.x>1)switch(this.wrapS){case t:i.x=i.x-Math.floor(i.x);break;case e:i.x=i.x<0?0:1;break;case r:1===Math.abs(Math.floor(i.x)%2)?i.x=Math.ceil(i.x)-i.x:i.x=i.x-Math.floor(i.x)}if(i.y<0||i.y>1)switch(this.wrapT){case t:i.y=i.y-Math.floor(i.y);break;case e:i.y=i.y<0?0:1;break;case r:1===Math.abs(Math.floor(i.y)%2)?i.y=Math.ceil(i.y)-i.y:i.y=i.y-Math.floor(i.y)}return this.flipY&&(i.y=1-i.y),i}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}tt.DEFAULT_IMAGE=null,tt.DEFAULT_MAPPING=300,tt.DEFAULT_ANISOTROPY=1;class et{constructor(t=0,e=0,i=0,r=1){et.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=this.w,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r+n[12]*s,this.y=n[1]*e+n[5]*i+n[9]*r+n[13]*s,this.z=n[2]*e+n[6]*i+n[10]*r+n[14]*s,this.w=n[3]*e+n[7]*i+n[11]*r+n[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s;const n=.01,a=.1,o=t.elements,l=o[0],h=o[4],c=o[8],A=o[1],d=o[5],u=o[9],f=o[2],g=o[6],p=o[10];if(Math.abs(h-A)<n&&Math.abs(c-f)<n&&Math.abs(u-g)<n){if(Math.abs(h+A)<a&&Math.abs(c+f)<a&&Math.abs(u+g)<a&&Math.abs(l+d+p-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(d+1)/2,m=(p+1)/2,b=(h+A)/4,y=(c+f)/4,w=(u+g)/4;return t>o&&t>m?t<n?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(t),r=b/i,s=y/i):o>m?o<n?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(o),i=b/r,s=w/r):m<n?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(m),i=y/s,r=w/s),this.set(i,r,s,e),this}let m=Math.sqrt((g-u)*(g-u)+(c-f)*(c-f)+(A-h)*(A-h));return Math.abs(m)<.001&&(m=1),this.x=(g-u)/m,this.y=(c-f)/m,this.z=(A-h)/m,this.w=Math.acos((l+d+p-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=M(this.x,t.x,e.x),this.y=M(this.y,t.y,e.y),this.z=M(this.z,t.z,e.z),this.w=M(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=M(this.x,t,e),this.y=M(this.y,t,e),this.z=M(this.z,t,e),this.w=M(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(M(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class it{constructor(t=new z(1/0,1/0,1/0),e=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(st.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(st.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=st.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i){const r=i.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,i=r.count;e<i;e++)!0===t.isMesh?t.getVertexPosition(e,st):st.fromBufferAttribute(r,e),st.applyMatrix4(t.matrixWorld),this.expandByPoint(st);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),nt.copy(t.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),nt.copy(i.boundingBox)),nt.applyMatrix4(t.matrixWorld),this.union(nt)}const r=t.children;for(let t=0,i=r.length;t<i;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,st),st.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(dt),ut.subVectors(this.max,dt),at.subVectors(t.a,dt),ot.subVectors(t.b,dt),lt.subVectors(t.c,dt),ht.subVectors(ot,at),ct.subVectors(lt,ot),At.subVectors(at,lt);let e=[0,-ht.z,ht.y,0,-ct.z,ct.y,0,-At.z,At.y,ht.z,0,-ht.x,ct.z,0,-ct.x,At.z,0,-At.x,-ht.y,ht.x,0,-ct.y,ct.x,0,-At.y,At.x,0];return!!pt(e,at,ot,lt,ut)&&(e=[1,0,0,0,1,0,0,0,1],!!pt(e,at,ot,lt,ut)&&(ft.crossVectors(ht,ct),e=[ft.x,ft.y,ft.z],pt(e,at,ot,lt,ut)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,st).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(st).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(rt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),rt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),rt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),rt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),rt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),rt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),rt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),rt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(rt)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const rt=[new z,new z,new z,new z,new z,new z,new z,new z],st=new z,nt=new it,at=new z,ot=new z,lt=new z,ht=new z,ct=new z,At=new z,dt=new z,ut=new z,ft=new z,gt=new z;function pt(t,e,i,r,s){for(let n=0,a=t.length-3;n<=a;n+=3){gt.fromArray(t,n);const a=s.x*Math.abs(gt.x)+s.y*Math.abs(gt.y)+s.z*Math.abs(gt.z),o=e.dot(gt),l=i.dot(gt),h=r.dot(gt);if(Math.max(-Math.max(o,l,h),Math.min(o,l,h))>a)return!1}return!0}const mt=new it,bt=new z,yt=new z;class wt{constructor(t=new z,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):mt.setFromPoints(t).getCenter(i);let r=0;for(let e=0,s=t.length;e<s;e++)r=Math.max(r,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;bt.subVectors(t,this.center);const e=bt.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(bt,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(yt.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(bt.copy(t.center).add(yt)),this.expandByPoint(bt.copy(t.center).sub(yt))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const It=new z,Bt=new z,xt=new z,Ct=new z,St=new z,kt=new z,_t=new z;class Et{constructor(t=new z,e=new z(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,It)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=It.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(It.copy(this.origin).addScaledVector(this.direction,e),It.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){Bt.copy(t).add(e).multiplyScalar(.5),xt.copy(e).sub(t).normalize(),Ct.copy(this.origin).sub(Bt);const s=.5*t.distanceTo(e),n=-this.direction.dot(xt),a=Ct.dot(this.direction),o=-Ct.dot(xt),l=Ct.lengthSq(),h=Math.abs(1-n*n);let c,A,d,u;if(h>0)if(c=n*o-a,A=n*a-o,u=s*h,c>=0)if(A>=-u)if(A<=u){const t=1/h;c*=t,A*=t,d=c*(c+n*A+2*a)+A*(n*c+A+2*o)+l}else A=s,c=Math.max(0,-(n*A+a)),d=-c*c+A*(A+2*o)+l;else A=-s,c=Math.max(0,-(n*A+a)),d=-c*c+A*(A+2*o)+l;else A<=-u?(c=Math.max(0,-(-n*s+a)),A=c>0?-s:Math.min(Math.max(-s,-o),s),d=-c*c+A*(A+2*o)+l):A<=u?(c=0,A=Math.min(Math.max(-s,-o),s),d=A*(A+2*o)+l):(c=Math.max(0,-(n*s+a)),A=c>0?s:Math.min(Math.max(-s,-o),s),d=-c*c+A*(A+2*o)+l);else A=n>0?-s:s,c=Math.max(0,-(n*A+a)),d=-c*c+A*(A+2*o)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(Bt).addScaledVector(xt,A),d}intersectSphere(t,e){It.subVectors(t.center,this.origin);const i=It.dot(this.direction),r=It.dot(It)-i*i,s=t.radius*t.radius;if(r>s)return null;const n=Math.sqrt(s-r),a=i-n,o=i+n;return o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return!(t.radius<0)&&this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,s,n,a,o;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,A=this.origin;return l>=0?(i=(t.min.x-A.x)*l,r=(t.max.x-A.x)*l):(i=(t.max.x-A.x)*l,r=(t.min.x-A.x)*l),h>=0?(s=(t.min.y-A.y)*h,n=(t.max.y-A.y)*h):(s=(t.max.y-A.y)*h,n=(t.min.y-A.y)*h),i>n||s>r?null:((s>i||isNaN(i))&&(i=s),(n<r||isNaN(r))&&(r=n),c>=0?(a=(t.min.z-A.z)*c,o=(t.max.z-A.z)*c):(a=(t.max.z-A.z)*c,o=(t.min.z-A.z)*c),i>o||a>r?null:((a>i||i!=i)&&(i=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(i>=0?i:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,It)}intersectTriangle(t,e,i,r,s){St.subVectors(e,t),kt.subVectors(i,t),_t.crossVectors(St,kt);let n,a=this.direction.dot(_t);if(a>0){if(r)return null;n=1}else{if(!(a<0))return null;n=-1,a=-a}Ct.subVectors(this.origin,t);const o=n*this.direction.dot(kt.crossVectors(Ct,kt));if(o<0)return null;const l=n*this.direction.dot(St.cross(Ct));if(l<0)return null;if(o+l>a)return null;const h=-n*Ct.dot(_t);return h<0?null:this.at(h/a,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Mt{constructor(t,e,i,r,s,n,a,o,l,h,c,A,d,u,f,g){Mt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,i,r,s,n,a,o,l,h,c,A,d,u,f,g)}set(t,e,i,r,s,n,a,o,l,h,c,A,d,u,f,g){const p=this.elements;return p[0]=t,p[4]=e,p[8]=i,p[12]=r,p[1]=s,p[5]=n,p[9]=a,p[13]=o,p[2]=l,p[6]=h,p[10]=c,p[14]=A,p[3]=d,p[7]=u,p[11]=f,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Mt).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return 0===this.determinant()?(t.set(1,0,0),e.set(0,1,0),i.set(0,0,1),this):(t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){if(0===t.determinant())return this.identity();const e=this.elements,i=t.elements,r=1/Pt.setFromMatrixColumn(t,0).length(),s=1/Pt.setFromMatrixColumn(t,1).length(),n=1/Pt.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*n,e[9]=i[9]*n,e[10]=i[10]*n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,r=t.y,s=t.z,n=Math.cos(i),a=Math.sin(i),o=Math.cos(r),l=Math.sin(r),h=Math.cos(s),c=Math.sin(s);if("XYZ"===t.order){const t=n*h,i=n*c,r=a*h,s=a*c;e[0]=o*h,e[4]=-o*c,e[8]=l,e[1]=i+r*l,e[5]=t-s*l,e[9]=-a*o,e[2]=s-t*l,e[6]=r+i*l,e[10]=n*o}else if("YXZ"===t.order){const t=o*h,i=o*c,r=l*h,s=l*c;e[0]=t+s*a,e[4]=r*a-i,e[8]=n*l,e[1]=n*c,e[5]=n*h,e[9]=-a,e[2]=i*a-r,e[6]=s+t*a,e[10]=n*o}else if("ZXY"===t.order){const t=o*h,i=o*c,r=l*h,s=l*c;e[0]=t-s*a,e[4]=-n*c,e[8]=r+i*a,e[1]=i+r*a,e[5]=n*h,e[9]=s-t*a,e[2]=-n*l,e[6]=a,e[10]=n*o}else if("ZYX"===t.order){const t=n*h,i=n*c,r=a*h,s=a*c;e[0]=o*h,e[4]=r*l-i,e[8]=t*l+s,e[1]=o*c,e[5]=s*l+t,e[9]=i*l-r,e[2]=-l,e[6]=a*o,e[10]=n*o}else if("YZX"===t.order){const t=n*o,i=n*l,r=a*o,s=a*l;e[0]=o*h,e[4]=s-t*c,e[8]=r*c+i,e[1]=c,e[5]=n*h,e[9]=-a*h,e[2]=-l*h,e[6]=i*c+r,e[10]=t-s*c}else if("XZY"===t.order){const t=n*o,i=n*l,r=a*o,s=a*l;e[0]=o*h,e[4]=-c,e[8]=l*h,e[1]=t*c+s,e[5]=n*h,e[9]=i*c-r,e[2]=r*c-i,e[6]=a*h,e[10]=s*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Qt,t,vt)}lookAt(t,e,i){const r=this.elements;return zt.subVectors(t,e),0===zt.lengthSq()&&(zt.z=1),zt.normalize(),Dt.crossVectors(i,zt),0===Dt.lengthSq()&&(1===Math.abs(i.z)?zt.x+=1e-4:zt.z+=1e-4,zt.normalize(),Dt.crossVectors(i,zt)),Dt.normalize(),Rt.crossVectors(zt,Dt),r[0]=Dt.x,r[4]=Rt.x,r[8]=zt.x,r[1]=Dt.y,r[5]=Rt.y,r[9]=zt.y,r[2]=Dt.z,r[6]=Rt.z,r[10]=zt.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,n=i[0],a=i[4],o=i[8],l=i[12],h=i[1],c=i[5],A=i[9],d=i[13],u=i[2],f=i[6],g=i[10],p=i[14],m=i[3],b=i[7],y=i[11],w=i[15],I=r[0],B=r[4],x=r[8],C=r[12],S=r[1],k=r[5],_=r[9],E=r[13],M=r[2],P=r[6],T=r[10],Q=r[14],v=r[3],D=r[7],R=r[11],z=r[15];return s[0]=n*I+a*S+o*M+l*v,s[4]=n*B+a*k+o*P+l*D,s[8]=n*x+a*_+o*T+l*R,s[12]=n*C+a*E+o*Q+l*z,s[1]=h*I+c*S+A*M+d*v,s[5]=h*B+c*k+A*P+d*D,s[9]=h*x+c*_+A*T+d*R,s[13]=h*C+c*E+A*Q+d*z,s[2]=u*I+f*S+g*M+p*v,s[6]=u*B+f*k+g*P+p*D,s[10]=u*x+f*_+g*T+p*R,s[14]=u*C+f*E+g*Q+p*z,s[3]=m*I+b*S+y*M+w*v,s[7]=m*B+b*k+y*P+w*D,s[11]=m*x+b*_+y*T+w*R,s[15]=m*C+b*E+y*Q+w*z,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],n=t[1],a=t[5],o=t[9],l=t[13],h=t[2],c=t[6],A=t[10],d=t[14],u=t[3],f=t[7],g=t[11],p=t[15],m=o*d-l*A,b=a*d-l*c,y=a*A-o*c,w=n*d-l*h,I=n*A-o*h,B=n*c-a*h;return e*(f*m-g*b+p*y)-i*(u*m-g*w+p*I)+r*(u*b-f*w+p*B)-s*(u*y-f*I+g*B)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=t[9],A=t[10],d=t[11],u=t[12],f=t[13],g=t[14],p=t[15],m=c*g*l-f*A*l+f*o*d-a*g*d-c*o*p+a*A*p,b=u*A*l-h*g*l-u*o*d+n*g*d+h*o*p-n*A*p,y=h*f*l-u*c*l+u*a*d-n*f*d-h*a*p+n*c*p,w=u*c*o-h*f*o-u*a*A+n*f*A+h*a*g-n*c*g,I=e*m+i*b+r*y+s*w;if(0===I)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/I;return t[0]=m*B,t[1]=(f*A*s-c*g*s-f*r*d+i*g*d+c*r*p-i*A*p)*B,t[2]=(a*g*s-f*o*s+f*r*l-i*g*l-a*r*p+i*o*p)*B,t[3]=(c*o*s-a*A*s-c*r*l+i*A*l+a*r*d-i*o*d)*B,t[4]=b*B,t[5]=(h*g*s-u*A*s+u*r*d-e*g*d-h*r*p+e*A*p)*B,t[6]=(u*o*s-n*g*s-u*r*l+e*g*l+n*r*p-e*o*p)*B,t[7]=(n*A*s-h*o*s+h*r*l-e*A*l-n*r*d+e*o*d)*B,t[8]=y*B,t[9]=(u*c*s-h*f*s-u*i*d+e*f*d+h*i*p-e*c*p)*B,t[10]=(n*f*s-u*a*s+u*i*l-e*f*l-n*i*p+e*a*p)*B,t[11]=(h*a*s-n*c*s-h*i*l+e*c*l+n*i*d-e*a*d)*B,t[12]=w*B,t[13]=(h*f*r-u*c*r+u*i*A-e*f*A-h*i*g+e*c*g)*B,t[14]=(u*a*r-n*f*r-u*i*o+e*f*o+n*i*g-e*a*g)*B,t[15]=(n*c*r-h*a*r+h*i*o-e*c*o-n*i*A+e*a*A)*B,this}scale(t){const e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),s=1-i,n=t.x,a=t.y,o=t.z,l=s*n,h=s*a;return this.set(l*n+i,l*a-r*o,l*o+r*a,0,l*a+r*o,h*a+i,h*o-r*n,0,l*o-r*a,h*o+r*n,s*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,n){return this.set(1,i,s,0,t,1,n,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,s=e._x,n=e._y,a=e._z,o=e._w,l=s+s,h=n+n,c=a+a,A=s*l,d=s*h,u=s*c,f=n*h,g=n*c,p=a*c,m=o*l,b=o*h,y=o*c,w=i.x,I=i.y,B=i.z;return r[0]=(1-(f+p))*w,r[1]=(d+y)*w,r[2]=(u-b)*w,r[3]=0,r[4]=(d-y)*I,r[5]=(1-(A+p))*I,r[6]=(g+m)*I,r[7]=0,r[8]=(u+b)*B,r[9]=(g-m)*B,r[10]=(1-(A+f))*B,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;if(t.x=r[12],t.y=r[13],t.z=r[14],0===this.determinant())return i.set(1,1,1),e.identity(),this;let s=Pt.set(r[0],r[1],r[2]).length();const n=Pt.set(r[4],r[5],r[6]).length(),a=Pt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),Tt.copy(this);const o=1/s,l=1/n,h=1/a;return Tt.elements[0]*=o,Tt.elements[1]*=o,Tt.elements[2]*=o,Tt.elements[4]*=l,Tt.elements[5]*=l,Tt.elements[6]*=l,Tt.elements[8]*=h,Tt.elements[9]*=h,Tt.elements[10]*=h,e.setFromRotationMatrix(Tt),i.x=s,i.y=n,i.z=a,this}makePerspective(t,e,i,r,s,n,a=2e3,o=!1){const l=this.elements,h=2*s/(e-t),c=2*s/(i-r),A=(e+t)/(e-t),d=(i+r)/(i-r);let u,f;if(o)u=s/(n-s),f=n*s/(n-s);else if(a===m)u=-(n+s)/(n-s),f=-2*n*s/(n-s);else{if(a!==b)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);u=-n/(n-s),f=-n*s/(n-s)}return l[0]=h,l[4]=0,l[8]=A,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=u,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,i,r,s,n,a=2e3,o=!1){const l=this.elements,h=2/(e-t),c=2/(i-r),A=-(e+t)/(e-t),d=-(i+r)/(i-r);let u,f;if(o)u=1/(n-s),f=n/(n-s);else if(a===m)u=-2/(n-s),f=-(n+s)/(n-s);else{if(a!==b)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);u=-1/(n-s),f=-s/(n-s)}return l[0]=h,l[4]=0,l[8]=0,l[12]=A,l[1]=0,l[5]=c,l[9]=0,l[13]=d,l[2]=0,l[6]=0,l[10]=u,l[14]=f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Pt=new z,Tt=new Mt,Qt=new z(0,0,0),vt=new z(1,1,1),Dt=new z,Rt=new z,zt=new z,Wt=new Mt,Ft=new R;class Ut{constructor(t=0,e=0,i=0,r=Ut.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r=this._order){return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const r=t.elements,s=r[0],n=r[4],a=r[8],o=r[1],l=r[5],h=r[9],c=r[2],A=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(M(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-n,s)):(this._x=Math.atan2(A,l),this._z=0);break;case"YXZ":this._x=Math.asin(-M(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,s),this._z=0);break;case"ZXY":this._x=Math.asin(M(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-n,l)):(this._y=0,this._z=Math.atan2(o,s));break;case"ZYX":this._y=Math.asin(-M(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(A,d),this._z=Math.atan2(o,s)):(this._x=0,this._z=Math.atan2(-n,l));break;case"YZX":this._z=Math.asin(M(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-M(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(A,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,d),this._y=0);break;default:x("Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Wt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Wt,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Ft.setFromEuler(this),this.setFromQuaternion(Ft,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ut.DEFAULT_ORDER="XYZ";class Nt{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Lt=0;const Ot=new z,Vt=new R,Ht=new Mt,Gt=new z,Jt=new z,qt=new z,Zt=new R,Yt=new z(1,0,0),Kt=new z(0,1,0),jt=new z(0,0,1),Xt={type:"added"},$t={type:"removed"},te={type:"childadded",child:null},ee={type:"childremoved",child:null};class ie extends k{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Lt++}),this.uuid=E(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ie.DEFAULT_UP.clone();const t=new z,e=new Ut,i=new R,r=new z(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Mt},normalMatrix:{value:new U}}),this.matrix=new Mt,this.matrixWorld=new Mt,this.matrixAutoUpdate=ie.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ie.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Nt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Vt.setFromAxisAngle(t,e),this.quaternion.multiply(Vt),this}rotateOnWorldAxis(t,e){return Vt.setFromAxisAngle(t,e),this.quaternion.premultiply(Vt),this}rotateX(t){return this.rotateOnAxis(Yt,t)}rotateY(t){return this.rotateOnAxis(Kt,t)}rotateZ(t){return this.rotateOnAxis(jt,t)}translateOnAxis(t,e){return Ot.copy(t).applyQuaternion(this.quaternion),this.position.add(Ot.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Yt,t)}translateY(t){return this.translateOnAxis(Kt,t)}translateZ(t){return this.translateOnAxis(jt,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ht.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Gt.copy(t):Gt.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Jt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ht.lookAt(Jt,Gt,this.up):Ht.lookAt(Gt,Jt,this.up),this.quaternion.setFromRotationMatrix(Ht),r&&(Ht.extractRotation(r.matrixWorld),Vt.setFromRotationMatrix(Ht),this.quaternion.premultiply(Vt.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(C("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Xt),te.child=t,this.dispatchEvent(te),te.child=null):C("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent($t),ee.child=t,this.dispatchEvent(ee),ee.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ht.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ht.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ht),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Xt),te.child=t,this.dispatchEvent(te),te.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const r=this.children;for(let s=0,n=r.length;s<n;s++)r[s].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jt,t,qt),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jt,Zt,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++){e[i].updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++){t[e].updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};function s(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map((t=>({...t,boundingBox:t.boundingBox?t.boundingBox.toJSON():void 0,boundingSphere:t.boundingSphere?t.boundingSphere.toJSON():void 0}))),r.instanceInfo=this._instanceInfo.map((t=>({...t}))),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(t),r.indirectTexture=this._indirectTexture.toJSON(t),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(r.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(r.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,r=i.length;e<r;e++){const r=i[e];s(t.shapes,r)}else s(t.shapes,i)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,r=this.material.length;i<r;i++)e.push(s(t.materials,this.material[i]));r.material=e}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];r.animations.push(s(t.animations,i))}}if(e){const e=n(t.geometries),r=n(t.materials),s=n(t.textures),a=n(t.images),o=n(t.shapes),l=n(t.skeletons),h=n(t.animations),c=n(t.nodes);e.length>0&&(i.geometries=e),r.length>0&&(i.materials=r),s.length>0&&(i.textures=s),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),h.length>0&&(i.animations=h),c.length>0&&(i.nodes=c)}return i.object=r,i;function n(t){const e=[];for(const i in t){const r=t[i];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}}ie.DEFAULT_UP=new z(0,1,0),ie.DEFAULT_MATRIX_AUTO_UPDATE=!0,ie.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const re=new z,se=new z,ne=new z,ae=new z,oe=new z,le=new z,he=new z,ce=new z,Ae=new z,de=new z,ue=new et,fe=new et,ge=new et;class pe{constructor(t=new z,e=new z,i=new z){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),re.subVectors(t,e),r.cross(re);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,s){re.subVectors(r,e),se.subVectors(i,e),ne.subVectors(t,e);const n=re.dot(re),a=re.dot(se),o=re.dot(ne),l=se.dot(se),h=se.dot(ne),c=n*l-a*a;if(0===c)return s.set(0,0,0),null;const A=1/c,d=(l*o-a*h)*A,u=(n*h-a*o)*A;return s.set(1-d-u,u,d)}static containsPoint(t,e,i,r){return null!==this.getBarycoord(t,e,i,r,ae)&&(ae.x>=0&&ae.y>=0&&ae.x+ae.y<=1)}static getInterpolation(t,e,i,r,s,n,a,o){return null===this.getBarycoord(t,e,i,r,ae)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(s,ae.x),o.addScaledVector(n,ae.y),o.addScaledVector(a,ae.z),o)}static getInterpolatedAttribute(t,e,i,r,s,n){return ue.setScalar(0),fe.setScalar(0),ge.setScalar(0),ue.fromBufferAttribute(t,e),fe.fromBufferAttribute(t,i),ge.fromBufferAttribute(t,r),n.setScalar(0),n.addScaledVector(ue,s.x),n.addScaledVector(fe,s.y),n.addScaledVector(ge,s.z),n}static isFrontFacing(t,e,i,r){return re.subVectors(i,e),se.subVectors(t,e),re.cross(se).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return re.subVectors(this.c,this.b),se.subVectors(this.a,this.b),.5*re.cross(se).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return pe.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return pe.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,s){return pe.getInterpolation(t,this.a,this.b,this.c,e,i,r,s)}containsPoint(t){return pe.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return pe.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,r=this.b,s=this.c;let n,a;oe.subVectors(r,i),le.subVectors(s,i),ce.subVectors(t,i);const o=oe.dot(ce),l=le.dot(ce);if(o<=0&&l<=0)return e.copy(i);Ae.subVectors(t,r);const h=oe.dot(Ae),c=le.dot(Ae);if(h>=0&&c<=h)return e.copy(r);const A=o*c-h*l;if(A<=0&&o>=0&&h<=0)return n=o/(o-h),e.copy(i).addScaledVector(oe,n);de.subVectors(t,s);const d=oe.dot(de),u=le.dot(de);if(u>=0&&d<=u)return e.copy(s);const f=d*l-o*u;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),e.copy(i).addScaledVector(le,a);const g=h*u-d*c;if(g<=0&&c-h>=0&&d-u>=0)return he.subVectors(s,r),a=(c-h)/(c-h+(d-u)),e.copy(r).addScaledVector(he,a);const p=1/(g+f+A);return n=f*p,a=A*p,e.copy(i).addScaledVector(oe,n).addScaledVector(le,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const me={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},be={h:0,s:0,l:0},ye={h:0,s:0,l:0};function we(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}class Ie{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(void 0===e&&void 0===i){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=A){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,H.colorSpaceToWorking(this,e),this}setRGB(t,e,i,r=H.workingColorSpace){return this.r=t,this.g=e,this.b=i,H.colorSpaceToWorking(this,r),this}setHSL(t,e,i,r=H.workingColorSpace){if(t=P(t,1),e=M(e,0,1),i=M(i,0,1),0===e)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,s=2*i-r;this.r=we(s,r,t+1/3),this.g=we(s,r,t),this.b=we(s,r,t-1/3)}return H.colorSpaceToWorking(this,r),this}setStyle(t,e=A){function i(e){void 0!==e&&parseFloat(e)<1&&x("Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:x("Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=r[1],s=i.length;if(3===s)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(6===s)return this.setHex(parseInt(i,16),e);x("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=A){const i=me[t.toLowerCase()];return void 0!==i?this.setHex(i,e):x("Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=G(t.r),this.g=G(t.g),this.b=G(t.b),this}copyLinearToSRGB(t){return this.r=J(t.r),this.g=J(t.g),this.b=J(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=A){return H.workingToColorSpace(Be.copy(this),t),65536*Math.round(M(255*Be.r,0,255))+256*Math.round(M(255*Be.g,0,255))+Math.round(M(255*Be.b,0,255))}getHexString(t=A){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=H.workingColorSpace){H.workingToColorSpace(Be.copy(this),e);const i=Be.r,r=Be.g,s=Be.b,n=Math.max(i,r,s),a=Math.min(i,r,s);let o,l;const h=(a+n)/2;if(a===n)o=0,l=0;else{const t=n-a;switch(l=h<=.5?t/(n+a):t/(2-n-a),n){case i:o=(r-s)/t+(r<s?6:0);break;case r:o=(s-i)/t+2;break;case s:o=(i-r)/t+4}o/=6}return t.h=o,t.s=l,t.l=h,t}getRGB(t,e=H.workingColorSpace){return H.workingToColorSpace(Be.copy(this),e),t.r=Be.r,t.g=Be.g,t.b=Be.b,t}getStyle(t=A){H.workingToColorSpace(Be.copy(this),t);const e=Be.r,i=Be.g,r=Be.b;return t!==A?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(t,e,i){return this.getHSL(be),this.setHSL(be.h+t,be.s+e,be.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(be),t.getHSL(ye);const i=T(be.h,ye.h,e),r=T(be.s,ye.s,e),s=T(be.l,ye.l,e);return this.setHSL(i,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*i+s[6]*r,this.g=s[1]*e+s[4]*i+s[7]*r,this.b=s[2]*e+s[5]*i+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Be=new Ie;Ie.NAMES=me;let xe=0;class Ce extends k{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:xe++}),this.uuid=E(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ie(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=g,this.stencilZFail=g,this.stencilZPass=g,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){x(`Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i:x(`Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const i in t){const r=t[i];delete r.metadata,e.push(r)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==g&&(i.stencilFail=this.stencilFail),this.stencilZFail!==g&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==g&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!1===this.allowOverride&&(i.allowOverride=!1),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),e){const e=r(t.textures),s=r(t.images);e.length>0&&(i.textures=e),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let r=0;r!==t;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.allowOverride=t.allowOverride,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Se extends Ce{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ut,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ke=new z,_e=new D;let Ee=0;class Me{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Ee++}),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=p,this.updateRanges=[],this.gpuType=s,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)_e.fromBufferAttribute(this,e),_e.applyMatrix3(t),this.setXY(e,_e.x,_e.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)ke.fromBufferAttribute(this,e),ke.applyMatrix3(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)ke.fromBufferAttribute(this,e),ke.applyMatrix4(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ke.fromBufferAttribute(this,e),ke.applyNormalMatrix(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ke.fromBufferAttribute(this,e),ke.transformDirection(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Q(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=v(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Q(e,this.array)),e}setX(t,e){return this.normalized&&(e=v(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Q(e,this.array)),e}setY(t,e){return this.normalized&&(e=v(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Q(e,this.array)),e}setZ(t,e){return this.normalized&&(e=v(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Q(e,this.array)),e}setW(t,e){return this.normalized&&(e=v(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=v(e,this.array),i=v(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=v(e,this.array),i=v(i,this.array),r=v(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.normalized&&(e=v(e,this.array),i=v(i,this.array),r=v(r,this.array),s=v(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==p&&(t.usage=this.usage),t}}class Pe extends Me{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Te extends Me{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class Qe extends Me{constructor(t,e,i){super(new Float32Array(t),e,i)}}let ve=0;const De=new Mt,Re=new ie,ze=new z,We=new it,Fe=new it,Ue=new z;class Ne extends k{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ve++}),this.uuid=E(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(function(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}(t)?Te:Pe)(t,1):this.index=t,this}setIndirect(t,e=0){return this.indirect=t,this.indirectOffset=e,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new U).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return De.makeRotationFromQuaternion(t),this.applyMatrix4(De),this}rotateX(t){return De.makeRotationX(t),this.applyMatrix4(De),this}rotateY(t){return De.makeRotationY(t),this.applyMatrix4(De),this}rotateZ(t){return De.makeRotationZ(t),this.applyMatrix4(De),this}translate(t,e,i){return De.makeTranslation(t,e,i),this.applyMatrix4(De),this}scale(t,e,i){return De.makeScale(t,e,i),this.applyMatrix4(De),this}lookAt(t){return Re.lookAt(t),Re.updateMatrix(),this.applyMatrix4(Re.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ze).negate(),this.translate(ze.x,ze.y,ze.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];e.push(r.x,r.y,r.z||0)}this.setAttribute("position",new Qe(e,3))}else{const i=Math.min(t.length,e.count);for(let r=0;r<i;r++){const i=t[r];e.setXYZ(r,i.x,i.y,i.z||0)}t.length>e.count&&x("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new it);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return C("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];We.setFromBufferAttribute(i),this.morphTargetsRelative?(Ue.addVectors(this.boundingBox.min,We.min),this.boundingBox.expandByPoint(Ue),Ue.addVectors(this.boundingBox.max,We.max),this.boundingBox.expandByPoint(Ue)):(this.boundingBox.expandByPoint(We.min),this.boundingBox.expandByPoint(We.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&C('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return C("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new z,1/0);if(t){const i=this.boundingSphere.center;if(We.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];Fe.setFromBufferAttribute(i),this.morphTargetsRelative?(Ue.addVectors(We.min,Fe.min),We.expandByPoint(Ue),Ue.addVectors(We.max,Fe.max),We.expandByPoint(Ue)):(We.expandByPoint(Fe.min),We.expandByPoint(Fe.max))}We.getCenter(i);let r=0;for(let e=0,s=t.count;e<s;e++)Ue.fromBufferAttribute(t,e),r=Math.max(r,i.distanceToSquared(Ue));if(e)for(let s=0,n=e.length;s<n;s++){const n=e[s],a=this.morphTargetsRelative;for(let e=0,s=n.count;e<s;e++)Ue.fromBufferAttribute(n,e),a&&(ze.fromBufferAttribute(t,e),Ue.add(ze)),r=Math.max(r,i.distanceToSquared(Ue))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&C('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void C("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.position,r=e.normal,s=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Me(new Float32Array(4*i.count),4));const n=this.getAttribute("tangent"),a=[],o=[];for(let t=0;t<i.count;t++)a[t]=new z,o[t]=new z;const l=new z,h=new z,c=new z,A=new D,d=new D,u=new D,f=new z,g=new z;function p(t,e,r){l.fromBufferAttribute(i,t),h.fromBufferAttribute(i,e),c.fromBufferAttribute(i,r),A.fromBufferAttribute(s,t),d.fromBufferAttribute(s,e),u.fromBufferAttribute(s,r),h.sub(l),c.sub(l),d.sub(A),u.sub(A);const n=1/(d.x*u.y-u.x*d.y);isFinite(n)&&(f.copy(h).multiplyScalar(u.y).addScaledVector(c,-d.y).multiplyScalar(n),g.copy(c).multiplyScalar(d.x).addScaledVector(h,-u.x).multiplyScalar(n),a[t].add(f),a[e].add(f),a[r].add(f),o[t].add(g),o[e].add(g),o[r].add(g))}let m=this.groups;0===m.length&&(m=[{start:0,count:t.count}]);for(let e=0,i=m.length;e<i;++e){const i=m[e],r=i.start;for(let e=r,s=r+i.count;e<s;e+=3)p(t.getX(e+0),t.getX(e+1),t.getX(e+2))}const b=new z,y=new z,w=new z,I=new z;function B(t){w.fromBufferAttribute(r,t),I.copy(w);const e=a[t];b.copy(e),b.sub(w.multiplyScalar(w.dot(e))).normalize(),y.crossVectors(I,e);const i=y.dot(o[t])<0?-1:1;n.setXYZW(t,b.x,b.y,b.z,i)}for(let e=0,i=m.length;e<i;++e){const i=m[e],r=i.start;for(let e=r,s=r+i.count;e<s;e+=3)B(t.getX(e+0)),B(t.getX(e+1)),B(t.getX(e+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Me(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const r=new z,s=new z,n=new z,a=new z,o=new z,l=new z,h=new z,c=new z;if(t)for(let A=0,d=t.count;A<d;A+=3){const d=t.getX(A+0),u=t.getX(A+1),f=t.getX(A+2);r.fromBufferAttribute(e,d),s.fromBufferAttribute(e,u),n.fromBufferAttribute(e,f),h.subVectors(n,s),c.subVectors(r,s),h.cross(c),a.fromBufferAttribute(i,d),o.fromBufferAttribute(i,u),l.fromBufferAttribute(i,f),a.add(h),o.add(h),l.add(h),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(u,o.x,o.y,o.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),s.fromBufferAttribute(e,t+1),n.fromBufferAttribute(e,t+2),h.subVectors(n,s),c.subVectors(r,s),h.cross(c),i.setXYZ(t+0,h.x,h.y,h.z),i.setXYZ(t+1,h.x,h.y,h.z),i.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Ue.fromBufferAttribute(t,e),Ue.normalize(),t.setXYZ(e,Ue.x,Ue.y,Ue.z)}toNonIndexed(){function t(t,e){const i=t.array,r=t.itemSize,s=t.normalized,n=new i.constructor(e.length*r);let a=0,o=0;for(let s=0,l=e.length;s<l;s++){a=t.isInterleavedBufferAttribute?e[s]*t.data.stride+t.offset:e[s]*r;for(let t=0;t<r;t++)n[o++]=i[a++]}return new Me(n,r,s)}if(null===this.index)return x("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ne,i=this.index.array,r=this.attributes;for(const s in r){const n=t(r[s],i);e.setAttribute(s,n)}const s=this.morphAttributes;for(const r in s){const n=[],a=s[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],i);n.push(r)}e.morphAttributes[r]=n}e.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let t=0,i=n.length;t<i;t++){const i=n[t];e.addGroup(i.start,i.count,i.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const r=i[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let s=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],n=[];for(let e=0,r=i.length;e<r;e++){const r=i[e];n.push(r.toJSON(t.data))}n.length>0&&(r[e]=n,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere=a.toJSON()),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone());const r=t.attributes;for(const t in r){const i=r[t];this.setAttribute(t,i.clone(e))}const s=t.morphAttributes;for(const t in s){const i=[],r=s[t];for(let t=0,s=r.length;t<s;t++)i.push(r[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let t=0,e=n.length;t<e;t++){const e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Le=new Mt,Oe=new Et,Ve=new wt,He=new z,Ge=new z,Je=new z,qe=new z,Ze=new z,Ye=new z,Ke=new z,je=new z;class Xe extends ie{constructor(t=new Ne,e=new Se){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){const e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,n=i.morphTargetsRelative;e.fromBufferAttribute(r,t);const a=this.morphTargetInfluences;if(s&&a){Ye.set(0,0,0);for(let i=0,r=s.length;i<r;i++){const r=a[i],o=s[i];0!==r&&(Ze.fromBufferAttribute(o,t),n?Ye.addScaledVector(Ze,r):Ye.addScaledVector(Ze.sub(e),r))}e.add(Ye)}return e}raycast(t,e){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0!==r){if(null===i.boundingSphere&&i.computeBoundingSphere(),Ve.copy(i.boundingSphere),Ve.applyMatrix4(s),Oe.copy(t.ray).recast(t.near),!1===Ve.containsPoint(Oe.origin)){if(null===Oe.intersectSphere(Ve,He))return;if(Oe.origin.distanceToSquared(He)>(t.far-t.near)**2)return}Le.copy(s).invert(),Oe.copy(t.ray).applyMatrix4(Le),null!==i.boundingBox&&!1===Oe.intersectsBox(i.boundingBox)||this._computeIntersections(t,e,Oe)}}_computeIntersections(t,e,i){let r;const s=this.geometry,n=this.material,a=s.index,o=s.attributes.position,l=s.attributes.uv,h=s.attributes.uv1,c=s.attributes.normal,A=s.groups,d=s.drawRange;if(null!==a)if(Array.isArray(n))for(let s=0,o=A.length;s<o;s++){const o=A[s],u=n[o.materialIndex];for(let s=Math.max(o.start,d.start),n=Math.min(a.count,Math.min(o.start+o.count,d.start+d.count));s<n;s+=3){r=$e(this,u,t,i,l,h,c,a.getX(s),a.getX(s+1),a.getX(s+2)),r&&(r.faceIndex=Math.floor(s/3),r.face.materialIndex=o.materialIndex,e.push(r))}}else{for(let s=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);s<o;s+=3){r=$e(this,n,t,i,l,h,c,a.getX(s),a.getX(s+1),a.getX(s+2)),r&&(r.faceIndex=Math.floor(s/3),e.push(r))}}else if(void 0!==o)if(Array.isArray(n))for(let s=0,a=A.length;s<a;s++){const a=A[s],u=n[a.materialIndex];for(let s=Math.max(a.start,d.start),n=Math.min(o.count,Math.min(a.start+a.count,d.start+d.count));s<n;s+=3){r=$e(this,u,t,i,l,h,c,s,s+1,s+2),r&&(r.faceIndex=Math.floor(s/3),r.face.materialIndex=a.materialIndex,e.push(r))}}else{for(let s=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);s<a;s+=3){r=$e(this,n,t,i,l,h,c,s,s+1,s+2),r&&(r.faceIndex=Math.floor(s/3),e.push(r))}}}}function $e(t,e,i,r,s,n,a,o,l,h){t.getVertexPosition(o,Ge),t.getVertexPosition(l,Je),t.getVertexPosition(h,qe);const c=function(t,e,i,r,s,n,a,o){let l;if(l=1===e.side?r.intersectTriangle(a,n,s,!0,o):r.intersectTriangle(s,n,a,0===e.side,o),null===l)return null;je.copy(o),je.applyMatrix4(t.matrixWorld);const h=i.ray.origin.distanceTo(je);return h<i.near||h>i.far?null:{distance:h,point:je.clone(),object:t}}(t,e,i,r,Ge,Je,qe,Ke);if(c){const t=new z;pe.getBarycoord(Ke,Ge,Je,qe,t),s&&(c.uv=pe.getInterpolatedAttribute(s,o,l,h,t,new D)),n&&(c.uv1=pe.getInterpolatedAttribute(n,o,l,h,t,new D)),a&&(c.normal=pe.getInterpolatedAttribute(a,o,l,h,t,new z),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const e={a:o,b:l,c:h,normal:new z,materialIndex:0};pe.getNormal(Ge,Je,qe,e.normal),c.face=e,c.barycoord=t}return c}class ti extends tt{constructor(t=null,e=1,i=1,r,s,n,a,o,l=1003,h=1003,c,A){super(null,n,a,o,l,h,r,s,c,A),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ei extends Me{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const ii=new Mt,ri=new Mt,si=[],ni=new it,ai=new Mt,oi=new Xe,li=new wt;class hi extends Xe{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new ei(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let t=0;t<i;t++)this.setMatrixAt(t,ai)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new it),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,ii),ni.copy(t.boundingBox).applyMatrix4(ii),this.boundingBox.union(ni)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new wt),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,ii),li.copy(t.boundingSphere).applyMatrix4(ii),this.boundingSphere.union(li)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,s=t*(i.length+1)+1;for(let t=0;t<i.length;t++)i[t]=r[s+t]}raycast(t,e){const i=this.matrixWorld,r=this.count;if(oi.geometry=this.geometry,oi.material=this.material,void 0!==oi.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),li.copy(this.boundingSphere),li.applyMatrix4(i),!1!==t.ray.intersectsSphere(li)))for(let s=0;s<r;s++){this.getMatrixAt(s,ii),ri.multiplyMatrices(i,ii),oi.matrixWorld=ri,oi.raycast(t,si);for(let t=0,i=si.length;t<i;t++){const i=si[t];i.instanceId=s,i.object=this,e.push(i)}si.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new ei(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const i=e.morphTargetInfluences,r=i.length+1;null===this.morphTexture&&(this.morphTexture=new ti(new Float32Array(r*this.count),r,this.count,1028,s));const n=this.morphTexture.source.data.data;let a=0;for(let t=0;t<i.length;t++)a+=i[t];const o=this.geometry.morphTargetsRelative?1:1-a,l=r*t;n[l]=o,n.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ci=new z,Ai=new z,di=new U;class ui{constructor(t=new z(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=ci.subVectors(i,e).cross(Ai.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(ci),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(i,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||di.getNormalMatrix(t),r=this.coplanarPoint(ci).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}function fi(t,e){return t&&t.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t):t}class gi{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],s=e[i-1];t:{e:{let n;i:{r:if(!(t<r)){for(let n=i+2;;){if(void 0===r){if(t<s)break r;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===n)break;if(s=r,r=e[++i],t<r)break e}n=e.length;break i}if(t>=s)break t;{const a=e[1];t<a&&(i=2,s=a);for(let n=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===n)break;if(r=s,s=e[--i-1],t>=s)break e}n=i,i=0}}for(;i<n;){const r=i+n>>>1;t<e[r]?n=r:i=r+1}if(r=e[i],s=e[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let t=0;t!==r;++t)e[t]=i[s+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class pi extends gi{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:l,endingEnd:l}}intervalChanged_(t,e,i){const r=this.parameterPositions;let s=t-2,n=t+1,a=r[s],o=r[n];if(void 0===a)switch(this.getSettings_().endingStart){case h:s=t,a=2*e-i;break;case c:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case h:n=t,o=2*i-e;break;case c:n=1,o=i+r[1]-r[0];break;default:n=t-1,o=e}const l=.5*(i-e),A=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-i),this._offsetPrev=s*A,this._offsetNext=n*A}interpolate_(t,e,i,r){const s=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,h=this._offsetPrev,c=this._offsetNext,A=this._weightPrev,d=this._weightNext,u=(i-e)/(r-e),f=u*u,g=f*u,p=-A*g+2*A*f-A*u,m=(1+A)*g+(-1.5-2*A)*f+(-.5+A)*u+1,b=(-1-d)*g+(1.5+d)*f+.5*u,y=d*g-d*f;for(let t=0;t!==a;++t)s[t]=p*n[h+t]+m*n[l+t]+b*n[o+t]+y*n[c+t];return s}}class mi extends gi{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,h=(i-e)/(r-e),c=1-h;for(let t=0;t!==a;++t)s[t]=n[l+t]*c+n[o+t]*h;return s}}class bi extends gi{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class yi{constructor(t,e,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=fi(e,this.TimeBufferType),this.values=fi(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:fi(t.times,Array),values:fi(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new bi(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new mi(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new pi(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case n:e=this.InterpolantFactoryMethodDiscrete;break;case a:e=this.InterpolantFactoryMethodLinear;break;case o:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return x("KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return n;case this.InterpolantFactoryMethodLinear:return a;case this.InterpolantFactoryMethodSmooth:return o}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let s=0,n=r-1;for(;s!==r&&i[s]<t;)++s;for(;-1!==n&&i[n]>e;)--n;if(++n,0!==s||n!==r){s>=n&&(n=Math.max(n,1),s=n-1);const t=this.getValueSize();this.times=i.slice(s,n),this.values=this.values.slice(s*t,n*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(C("KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,s=i.length;0===s&&(C("KeyframeTrack: Track is empty.",this),t=!1);let n=null;for(let e=0;e!==s;e++){const r=i[e];if("number"==typeof r&&isNaN(r)){C("KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==n&&n>r){C("KeyframeTrack: Out of order keys.",this,e,r,n),t=!1;break}n=r}if(void 0!==r&&y(r))for(let e=0,i=r.length;e!==i;++e){const i=r[e];if(isNaN(i)){C("KeyframeTrack: Value is not a valid number.",this,e,i),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===o,s=t.length-1;let n=1;for(let a=1;a<s;++a){let s=!1;const o=t[a];if(o!==t[a+1]&&(1!==a||o!==t[0]))if(r)s=!0;else{const t=a*i,r=t-i,n=t+i;for(let a=0;a!==i;++a){const i=e[t+a];if(i!==e[r+a]||i!==e[n+a]){s=!0;break}}}if(s){if(a!==n){t[n]=t[a];const r=a*i,s=n*i;for(let t=0;t!==i;++t)e[s+t]=e[r+t]}++n}}if(s>0){t[n]=t[s];for(let t=s*i,r=n*i,a=0;a!==i;++a)e[r+a]=e[t+a];++n}return n!==t.length?(this.times=t.slice(0,n),this.values=e.slice(0,n*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}yi.prototype.ValueTypeName="",yi.prototype.TimeBufferType=Float32Array,yi.prototype.ValueBufferType=Float32Array,yi.prototype.DefaultInterpolation=a;class wi extends yi{constructor(t,e,i){super(t,e,i)}}wi.prototype.ValueTypeName="bool",wi.prototype.ValueBufferType=Array,wi.prototype.DefaultInterpolation=n,wi.prototype.InterpolantFactoryMethodLinear=void 0,wi.prototype.InterpolantFactoryMethodSmooth=void 0;class Ii extends yi{constructor(t,e,i,r){super(t,e,i,r)}}Ii.prototype.ValueTypeName="color";class Bi extends yi{constructor(t,e,i,r){super(t,e,i,r)}}Bi.prototype.ValueTypeName="number";class xi extends gi{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=(i-e)/(r-e);let l=t*a;for(let t=l+a;l!==t;l+=4)R.slerpFlat(s,0,n,l-a,n,l,o);return s}}class Ci extends yi{constructor(t,e,i,r){super(t,e,i,r)}InterpolantFactoryMethodLinear(t){return new xi(this.times,this.values,this.getValueSize(),t)}}Ci.prototype.ValueTypeName="quaternion",Ci.prototype.InterpolantFactoryMethodSmooth=void 0;class Si extends yi{constructor(t,e,i){super(t,e,i)}}Si.prototype.ValueTypeName="string",Si.prototype.ValueBufferType=Array,Si.prototype.DefaultInterpolation=n,Si.prototype.InterpolantFactoryMethodLinear=void 0,Si.prototype.InterpolantFactoryMethodSmooth=void 0;class ki extends yi{constructor(t,e,i,r){super(t,e,i,r)}}ki.prototype.ValueTypeName="vector";class _i{constructor(t,e,i){const r=this;let s,n=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this._abortController=null,this.itemStart=function(t){o++,!1===n&&void 0!==r.onStart&&r.onStart(t,a,o),n=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,o),a===o&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=l.length;e<i;e+=2){const i=l[e],r=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const Ei=new _i;class Mi{constructor(t){this.manager=void 0!==t?t:Ei,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise((function(r,s){i.load(t,r,e,s)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}Mi.DEFAULT_MATERIAL_NAME="__DEFAULT";Error;new WeakMap;new WeakMap;const Pi="\\[\\]\\.:\\/",Ti=new RegExp("["+Pi+"]","g"),Qi="[^"+Pi+"]",vi="[^"+Pi.replace("\\.","")+"]",Di=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Qi)+/(WCOD+)?/.source.replace("WCOD",vi)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qi)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qi)+"$"),Ri=["material","materials","bones","map"];class zi{constructor(t,e,i){this.path=e,this.parsedPath=i||zi.parseTrackName(e),this.node=zi.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new zi.Composite(t,e,i):new zi(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Ti,"")}static parseTrackName(t){const e=Di.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=i.nodeName.substring(r+1);-1!==Ri.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let r=0;r<t.length;r++){const s=t[r];if(s.name===e||s.uuid===e)return s;const n=i(s.children);if(n)return n}return null},r=i(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)t[e++]=i[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,r=e.propertyName;let s=e.propertyIndex;if(t||(t=zi.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void x("PropertyBinding: No target node found for track: "+this.path+".");if(i){let r=e.objectIndex;switch(i){case"materials":if(!t.material)return void C("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void C("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void C("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void C("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void C("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void C("PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==r){if(void 0===t[r])return void C("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const n=t[r];if(void 0===n){return void C("PropertyBinding: Trying to update property for track: "+e.nodeName+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?a=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===r){if(!t.geometry)return void C("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void C("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}o=this.BindingType.ArrayElement,this.resolvedProperty=n,this.propertyIndex=s}else void 0!==n.fromArray&&void 0!==n.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=n):Array.isArray(n)?(o=this.BindingType.EntireArray,this.resolvedProperty=n):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}zi.Composite=class{constructor(t,e,i){const r=i||zi.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];void 0!==r&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},zi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},zi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},zi.prototype.GetterByBindingType=[zi.prototype._getValue_direct,zi.prototype._getValue_array,zi.prototype._getValue_arrayElement,zi.prototype._getValue_toArray],zi.prototype.SetterByBindingTypeAndVersioning=[[zi.prototype._setValue_direct,zi.prototype._setValue_direct_setNeedsUpdate,zi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[zi.prototype._setValue_array,zi.prototype._setValue_array_setNeedsUpdate,zi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[zi.prototype._setValue_arrayElement,zi.prototype._setValue_arrayElement_setNeedsUpdate,zi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[zi.prototype._setValue_fromArray,zi.prototype._setValue_fromArray_setNeedsUpdate,zi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"182"}})),"undefined"!=typeof window&&(window.__THREE__?x("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="182");const Wi=2.718281828459045,Fi=2.302585092994046,Ui=.6931471805599453,Ni=1.4426950408889634,Li=.4342944819032518,Oi=3.141592653589793,Vi=.7071067811865476,Hi=1.4142135623730951;function Gi(t){throw new Error(t+": Waiting for WASM to compile")}function Ji(t){if(!Number.isFinite(t))return NaN;const e=(t=function(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}(t))/(2*Math.PI)*Zi.length,i=Math.floor(e),r=(i+1)%Zi.length,s=e-i;return Zi[i]*(1-s)+Zi[r]*s}function qi(t){return Math.sin(t+Math.PI/2)}Math={E:Wi,LN10:Fi,LN2:Ui,LOG2E:Ni,LOG10E:Li,PI:Oi,SQRT1_2:Vi,SQRT2:Hi,abs:Math.abs,acos:()=>Gi("acos"),asin:()=>Gi("asin"),atan:()=>Gi("atan"),atan2:()=>Gi("atan2"),ceil:Math.ceil,cos:qi,exp:()=>Gi("exp"),floor:Math.floor,log:()=>Gi("log"),max:Math.max,min:Math.min,pow:()=>Gi("pow"),random:Math.random,round:Math.round,sin:Ji,sqrt:()=>Gi("sqrt"),tan:()=>Gi("tan"),clz32:Math.clz32,imul:Math.imul,sign:Math.sign,log10:()=>Gi("log10"),log2:()=>Gi("log2"),log1p:t=>Math.log(1+t),expm1:t=>Math.exp(t)-1,cosh:t=>(Math.exp(t)+Math.exp(-t))/2,sinh:t=>(Math.exp(t)-Math.exp(-t))/2,tanh:t=>{const e=Math.exp(2*t);return(e-1)/(e+1)},acosh:t=>Math.log(t+Math.sqrt(t*t-1)),asinh:t=>Math.log(t+Math.sqrt(t*t+1)),atanh:t=>Math.log((1+t)/(1-t))/2,hypot:(...t)=>{let e=0;for(const i of t)e+=i*i;return Math.sqrt(e)},trunc:Math.trunc,cbrt:t=>t==1/0?1/0:t==-1/0?-1/0:t<0?-Math.pow(-t,1/3):Math.pow(t,1/3),fround:Math.fround,[Symbol.toStringTag]:"Math"};const Zi=[0,.01745240643728351,.03489949670250097,.05233595624294383,.0697564737441253,.08715574274765817,.10452846326765346,.12186934340514748,.13917310096006544,.15643446504023087,.17364817766693033,.1908089953765448,.20791169081775931,.22495105434386498,.24192189559966773,.25881904510252074,.27563735581699916,.2923717047227367,.3090169943749474,.3255681544571567,.3420201433256687,.35836794954530027,.374606593415912,.3907311284892737,.40673664307580015,.42261826174069944,.4383711467890774,.45399049973954675,.4694715627858908,.48480962024633706,.49999999999999994,.5150380749100542,.5299192642332049,.544639035015027,.5591929034707468,.573576436351046,.5877852522924731,.6018150231520483,.6156614753256583,.6293203910498375,.6427876096865393,.6560590289905073,.6691306063588582,.6819983600624985,.6946583704589973,.7071067811865475,.7193398003386511,.7313537016191705,.7431448254773942,.7547095802227719,.766044443118978,.7771459614569708,.7880107536067219,.7986355100472928,.8090169943749475,.8191520442889918,.8290375725550417,.8386705679454239,.848048096156426,.8571673007021122,.8660254037844386,.8746197071393957,.8829475928589269,.8910065241883678,.898794046299167,.9063077870366499,.9135454576426009,.9205048534524404,.9271838545667873,.9335804264972017,.9396926207859083,.9455185755993167,.9510565162951535,.9563047559630354,.9612616959383189,.9659258262890683,.9702957262759965,.9743700647852352,.9781476007338057,.981627183447664,.984807753012208,.9876883405951378,.9902680687415704,.992546151641322,.9945218953682733,.9961946980917455,.9975640502598242,.9986295347545738,.9993908270190958,.9998476951563913,1,.9998476951563913,.9993908270190958,.9986295347545738,.9975640502598242,.9961946980917455,.9945218953682734,.9925461516413221,.9902680687415704,.9876883405951377,.984807753012208,.981627183447664,.9781476007338057,.9743700647852352,.9702957262759965,.9659258262890683,.9612616959383189,.9563047559630355,.9510565162951536,.9455185755993168,.9396926207859084,.9335804264972017,.9271838545667874,.9205048534524404,.913545457642601,.90630778703665,.8987940462991669,.8910065241883679,.8829475928589271,.8746197071393959,.8660254037844387,.8571673007021123,.8480480961564261,.8386705679454239,.8290375725550417,.819152044288992,.8090169943749475,.7986355100472927,.788010753606722,.777145961456971,.766044443118978,.7547095802227721,.7431448254773945,.7313537016191706,.7193398003386511,.7071067811865476,.6946583704589975,.6819983600624986,.669130606358858,.6560590289905073,.6427876096865395,.6293203910498374,.6156614753256584,.6018150231520486,.5877852522924732,.5735764363510459,.5591929034707469,.5446390350150273,.5299192642332049,.5150380749100544,.49999999999999994,.48480962024633717,.4694715627858907,.45399049973954686,.4383711467890777,.4226182617406995,.40673664307580004,.39073112848927377,.37460659341591224,.35836794954530066,.3420201433256689,.3255681544571566,.3090169943749475,.29237170472273705,.2756373558169992,.258819045102521,.24192189559966773,.2249510543438652,.20791169081775931,.19080899537654497,.1736481776669307,.15643446504023098,.13917310096006533,.12186934340514755,.10452846326765373,.0871557427476582,.06975647374412552,.05233595624294425,.03489949670250114,.01745240643728344,12246467991473532e-32,-.017452406437283192,-.0348994967025009,-.052335956242943564,-.06975647374412483,-.08715574274765794,-.1045284632676535,-.12186934340514774,-.13917310096006552,-.15643446504023073,-.17364817766693047,-.19080899537654472,-.20791169081775907,-.22495105434386498,-.2419218955996675,-.25881904510252035,-.2756373558169986,-.29237170472273677,-.30901699437494773,-.32556815445715676,-.34202014332566866,-.35836794954530043,-.374606593415912,-.39073112848927355,-.4067366430757998,-.4226182617406993,-.43837114678907707,-.45399049973954625,-.4694715627858905,-.48480962024633734,-.5000000000000001,-.5150380749100542,-.5299192642332048,-.5446390350150271,-.5591929034707467,-.5735764363510458,-.587785252292473,-.601815023152048,-.6156614753256578,-.6293203910498372,-.6427876096865393,-.6560590289905074,-.6691306063588582,-.6819983600624984,-.6946583704589974,-.7071067811865475,-.7193398003386509,-.7313537016191705,-.743144825477394,-.7547095802227717,-.7660444431189779,-.7771459614569711,-.7880107536067221,-.7986355100472928,-.8090169943749473,-.8191520442889916,-.8290375725550414,-.838670567945424,-.848048096156426,-.8571673007021121,-.8660254037844384,-.8746197071393955,-.882947592858927,-.8910065241883678,-.8987940462991668,-.90630778703665,-.913545457642601,-.9205048534524403,-.9271838545667873,-.9335804264972016,-.9396926207859082,-.9455185755993168,-.9510565162951535,-.9563047559630353,-.961261695938319,-.9659258262890683,-.9702957262759965,-.9743700647852351,-.9781476007338056,-.981627183447664,-.984807753012208,-.9876883405951377,-.9902680687415703,-.992546151641322,-.9945218953682733,-.9961946980917455,-.9975640502598242,-.9986295347545739,-.9993908270190958,-.9998476951563913,-1,-.9998476951563913,-.9993908270190958,-.9986295347545739,-.9975640502598243,-.9961946980917455,-.9945218953682733,-.992546151641322,-.9902680687415704,-.9876883405951378,-.9848077530122081,-.9816271834476641,-.9781476007338056,-.9743700647852352,-.9702957262759966,-.9659258262890684,-.961261695938319,-.9563047559630354,-.9510565162951536,-.945518575599317,-.9396926207859083,-.9335804264972017,-.9271838545667874,-.9205048534524405,-.9135454576426011,-.9063077870366503,-.898794046299167,-.8910065241883679,-.8829475928589271,-.8746197071393956,-.8660254037844386,-.8571673007021123,-.8480480961564262,-.8386705679454243,-.8290375725550416,-.8191520442889918,-.8090169943749476,-.798635510047293,-.7880107536067223,-.7771459614569713,-.7660444431189781,-.7547095802227722,-.743144825477394,-.7313537016191703,-.7193398003386512,-.7071067811865477,-.6946583704589976,-.6819983600624989,-.6691306063588588,-.6560590289905074,-.6427876096865396,-.6293203910498372,-.6156614753256582,-.6018150231520483,-.5877852522924734,-.5735764363510465,-.5591929034707473,-.544639035015027,-.529919264233205,-.5150380749100545,-.5000000000000004,-.48480962024633767,-.4694715627858908,-.45399049973954697,-.4383711467890778,-.4226182617406992,-.40673664307580015,-.3907311284892739,-.37460659341591235,-.35836794954530077,-.34202014332566943,-.3255681544571567,-.3090169943749477,-.29237170472273716,-.27563735581699894,-.2588190451025207,-.24192189559966787,-.22495105434386534,-.20791169081775987,-.19080899537654467,-.1736481776669304,-.15643446504023112,-.13917310096006588,-.12186934340514811,-.1045284632676543,-.08715574274765832,-.06975647374412564,-.05233595624294348,-.034899496702500823,-.01745240643728356];var Yi;!function(t){t[t.Init=0]="Init",t[t.Verify=1]="Verify",t[t.TestDeterminism=2]="TestDeterminism",t[t.CreateCar=3]="CreateCar",t[t.DeleteCar=4]="DeleteCar",t[t.StartCar=5]="StartCar",t[t.ControlCar=6]="ControlCar",t[t.PauseCar=7]="PauseCar",t[t.VerifyResult=8]="VerifyResult",t[t.DeterminismResult=9]="DeterminismResult",t[t.UpdateResult=10]="UpdateResult"}(Yi||(Yi={}));const Ki=Yi;Object.create;Object.create;function ji(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)}function Xi(t,e,i,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,i):s?s.value=i:e.set(t,i),i}"function"==typeof SuppressedError&&SuppressedError;var $i;$i=new WeakMap;const tr=class{constructor(t){$i.set(this,void 0),Xi(this,$i,t,"f")}dispose(){}getControls(t){return ji(this,$i,"f").getFrame(t)}};function er(t){let e=t.length;for(;--e>=0;)t[e]=0}const ir=256,rr=286,sr=30,nr=15,ar=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),or=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),hr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cr=new Array(576);er(cr);const Ar=new Array(60);er(Ar);const dr=new Array(512);er(dr);const ur=new Array(256);er(ur);const fr=new Array(29);er(fr);const gr=new Array(sr);function pr(t,e,i,r,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}let mr,br,yr;function wr(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}er(gr);const Ir=t=>t<256?dr[t]:dr[256+(t>>>7)],Br=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},xr=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,Br(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},Cr=(t,e,i)=>{xr(t,i[2*e],i[2*e+1])},Sr=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},kr=(t,e,i)=>{const r=new Array(16);let s,n,a=0;for(s=1;s<=nr;s++)a=a+i[s-1]<<1,r[s]=a;for(n=0;n<=e;n++){let e=t[2*n+1];0!==e&&(t[2*n]=Sr(r[e]++,e))}},_r=t=>{let e;for(e=0;e<rr;e++)t.dyn_ltree[2*e]=0;for(e=0;e<sr;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Er=t=>{t.bi_valid>8?Br(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Mr=(t,e,i,r)=>{const s=2*e,n=2*i;return t[s]<t[n]||t[s]===t[n]&&r[e]<=r[i]},Pr=(t,e,i)=>{const r=t.heap[i];let s=i<<1;for(;s<=t.heap_len&&(s<t.heap_len&&Mr(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!Mr(e,r,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=r},Tr=(t,e,i)=>{let r,s,n,a,o=0;if(0!==t.sym_next)do{r=255&t.pending_buf[t.sym_buf+o++],r+=(255&t.pending_buf[t.sym_buf+o++])<<8,s=t.pending_buf[t.sym_buf+o++],0===r?Cr(t,s,e):(n=ur[s],Cr(t,n+ir+1,e),a=ar[n],0!==a&&(s-=fr[n],xr(t,s,a)),r--,n=Ir(r),Cr(t,n,i),a=or[n],0!==a&&(r-=gr[n],xr(t,r,a)))}while(o<t.sym_next);Cr(t,256,e)},Qr=(t,e)=>{const i=e.dyn_tree,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,n=e.stat_desc.elems;let a,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<n;a++)0!==i[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,i[2*l]=1,t.depth[l]=0,t.opt_len--,s&&(t.static_len-=r[2*l+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)Pr(t,i,a);l=n;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Pr(t,i,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,i[2*l]=i[2*a]+i[2*o],t.depth[l]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,i[2*a+1]=i[2*o+1]=l,t.heap[1]=l++,Pr(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,r=e.max_code,s=e.stat_desc.static_tree,n=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,c,A,d,u,f,g=0;for(d=0;d<=nr;d++)t.bl_count[d]=0;for(i[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)c=t.heap[h],d=i[2*i[2*c+1]+1]+1,d>l&&(d=l,g++),i[2*c+1]=d,c>r||(t.bl_count[d]++,u=0,c>=o&&(u=a[c-o]),f=i[2*c],t.opt_len+=f*(d+u),n&&(t.static_len+=f*(s[2*c+1]+u)));if(0!==g){do{for(d=l-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(d=l;0!==d;d--)for(c=t.bl_count[d];0!==c;)A=t.heap[--h],A>r||(i[2*A+1]!==d&&(t.opt_len+=(d-i[2*A+1])*i[2*A],i[2*A+1]=d),c--)}})(t,e),kr(i,h,t.bl_count)},vr=(t,e,i)=>{let r,s,n=-1,a=e[1],o=0,l=7,h=4;for(0===a&&(l=138,h=3),e[2*(i+1)+1]=65535,r=0;r<=i;r++)s=a,a=e[2*(r+1)+1],++o<l&&s===a||(o<h?t.bl_tree[2*s]+=o:0!==s?(s!==n&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,n=s,0===a?(l=138,h=3):s===a?(l=6,h=3):(l=7,h=4))},Dr=(t,e,i)=>{let r,s,n=-1,a=e[1],o=0,l=7,h=4;for(0===a&&(l=138,h=3),r=0;r<=i;r++)if(s=a,a=e[2*(r+1)+1],!(++o<l&&s===a)){if(o<h)do{Cr(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==n&&(Cr(t,s,t.bl_tree),o--),Cr(t,16,t.bl_tree),xr(t,o-3,2)):o<=10?(Cr(t,17,t.bl_tree),xr(t,o-3,3)):(Cr(t,18,t.bl_tree),xr(t,o-11,7));o=0,n=s,0===a?(l=138,h=3):s===a?(l=6,h=3):(l=7,h=4)}};let Rr=!1;const zr=(t,e,i,r)=>{xr(t,0+(r?1:0),3),Er(t),Br(t,i),Br(t,~i),i&&t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i};var Wr=(t,e,i,r)=>{let s,n,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<ir;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),Qr(t,t.l_desc),Qr(t,t.d_desc),a=(t=>{let e;for(vr(t,t.dyn_ltree,t.l_desc.max_code),vr(t,t.dyn_dtree,t.d_desc.max_code),Qr(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*hr[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,n=t.static_len+3+7>>>3,n<=s&&(s=n)):s=n=i+5,i+4<=s&&-1!==e?zr(t,e,i,r):4===t.strategy||n===s?(xr(t,2+(r?1:0),3),Tr(t,cr,Ar)):(xr(t,4+(r?1:0),3),((t,e,i,r)=>{let s;for(xr(t,e-257,5),xr(t,i-1,5),xr(t,r-4,4),s=0;s<r;s++)xr(t,t.bl_tree[2*hr[s]+1],3);Dr(t,t.dyn_ltree,e-1),Dr(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),Tr(t,t.dyn_ltree,t.dyn_dtree)),_r(t),r&&Er(t)},Fr={_tr_init:t=>{Rr||((()=>{let t,e,i,r,s;const n=new Array(16);for(i=0,r=0;r<28;r++)for(fr[r]=i,t=0;t<1<<ar[r];t++)ur[i++]=r;for(ur[i-1]=r,s=0,r=0;r<16;r++)for(gr[r]=s,t=0;t<1<<or[r];t++)dr[s++]=r;for(s>>=7;r<sr;r++)for(gr[r]=s<<7,t=0;t<1<<or[r]-7;t++)dr[256+s++]=r;for(e=0;e<=nr;e++)n[e]=0;for(t=0;t<=143;)cr[2*t+1]=8,t++,n[8]++;for(;t<=255;)cr[2*t+1]=9,t++,n[9]++;for(;t<=279;)cr[2*t+1]=7,t++,n[7]++;for(;t<=287;)cr[2*t+1]=8,t++,n[8]++;for(kr(cr,287,n),t=0;t<sr;t++)Ar[2*t+1]=5,Ar[2*t]=Sr(t,5);mr=new pr(cr,ar,257,rr,nr),br=new pr(Ar,or,0,sr,nr),yr=new pr(new Array(0),lr,0,19,7)})(),Rr=!0),t.l_desc=new wr(t.dyn_ltree,mr),t.d_desc=new wr(t.dyn_dtree,br),t.bl_desc=new wr(t.bl_tree,yr),t.bi_buf=0,t.bi_valid=0,_r(t)},_tr_stored_block:zr,_tr_flush_block:Wr,_tr_tally:(t,e,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(ur[i]+ir+1)]++,t.dyn_dtree[2*Ir(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{xr(t,2,3),Cr(t,256,cr),(t=>{16===t.bi_valid?(Br(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var Ur=(t,e,i,r)=>{let s=65535&t,n=t>>>16&65535,a=0;for(;0!==i;){a=i>2e3?2e3:i,i-=a;do{s=s+e[r++]|0,n=n+s|0}while(--a);s%=65521,n%=65521}return s|n<<16};const Nr=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var Lr=(t,e,i,r)=>{const s=Nr,n=r+i;t^=-1;for(let i=r;i<n;i++)t=t>>>8^s[255&(t^e[i])];return~t},Or={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Hr,_tr_stored_block:Gr,_tr_flush_block:Jr,_tr_tally:qr,_tr_align:Zr}=Fr,{Z_NO_FLUSH:Yr,Z_PARTIAL_FLUSH:Kr,Z_FULL_FLUSH:jr,Z_FINISH:Xr,Z_BLOCK:$r,Z_OK:ts,Z_STREAM_END:es,Z_STREAM_ERROR:is,Z_DATA_ERROR:rs,Z_BUF_ERROR:ss,Z_DEFAULT_COMPRESSION:ns,Z_FILTERED:as,Z_HUFFMAN_ONLY:os,Z_RLE:ls,Z_FIXED:hs,Z_DEFAULT_STRATEGY:cs,Z_UNKNOWN:As,Z_DEFLATED:ds}=Vr,us=258,fs=262,gs=42,ps=113,ms=666,bs=(t,e)=>(t.msg=Or[e],e),ys=t=>2*t-(t>4?9:0),ws=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Is=t=>{let e,i,r,s=t.w_size;e=t.hash_size,r=e;do{i=t.head[--r],t.head[r]=i>=s?i-s:0}while(--e);e=s,r=e;do{i=t.prev[--r],t.prev[r]=i>=s?i-s:0}while(--e)};let Bs=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const xs=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},Cs=(t,e)=>{Jr(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,xs(t.strm)},Ss=(t,e)=>{t.pending_buf[t.pending++]=e},ks=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},_s=(t,e,i,r)=>{let s=t.avail_in;return s>r&&(s=r),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),i),1===t.state.wrap?t.adler=Ur(t.adler,e,s,i):2===t.state.wrap&&(t.adler=Lr(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)},Es=(t,e)=>{let i,r,s=t.max_chain_length,n=t.strstart,a=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-fs?t.strstart-(t.w_size-fs):0,h=t.window,c=t.w_mask,A=t.prev,d=t.strstart+us;let u=h[n+a-1],f=h[n+a];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,h[i+a]===f&&h[i+a-1]===u&&h[i]===h[n]&&h[++i]===h[n+1]){n+=2,i++;do{}while(h[++n]===h[++i]&&h[++n]===h[++i]&&h[++n]===h[++i]&&h[++n]===h[++i]&&h[++n]===h[++i]&&h[++n]===h[++i]&&h[++n]===h[++i]&&h[++n]===h[++i]&&n<d);if(r=us-(d-n),n=d-us,r>a){if(t.match_start=e,a=r,r>=o)break;u=h[n+a-1],f=h[n+a]}}}while((e=A[e&c])>l&&0!=--s);return a<=t.lookahead?a:t.lookahead},Ms=t=>{const e=t.w_size;let i,r,s;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-fs)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Is(t),r+=e),0===t.strm.avail_in)break;if(i=_s(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Bs(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Bs(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<fs&&0!==t.strm.avail_in)},Ps=(t,e)=>{let i,r,s,n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,o=t.strm.avail_in;do{if(i=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,r=t.strstart-t.block_start,i>r+t.strm.avail_in&&(i=r+t.strm.avail_in),i>s&&(i=s),i<n&&(0===i&&e!==Xr||e===Yr||i!==r+t.strm.avail_in))break;a=e===Xr&&i===r+t.strm.avail_in?1:0,Gr(t,0,0,a),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,xs(t.strm),r&&(r>i&&(r=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,i-=r),i&&(_s(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(0===a);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==Yr&&e!==Xr&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(_s(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,n=s>t.w_size?t.w_size:s,r=t.strstart-t.block_start,(r>=n||(r||e===Xr)&&e!==Yr&&0===t.strm.avail_in&&r<=s)&&(i=r>s?s:r,a=e===Xr&&0===t.strm.avail_in&&i===r?1:0,Gr(t,t.block_start,i,a),t.block_start+=i,xs(t.strm)),a?3:1)},Ts=(t,e)=>{let i,r;for(;;){if(t.lookahead<fs){if(Ms(t),t.lookahead<fs&&e===Yr)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Bs(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-fs&&(t.match_length=Es(t,i)),t.match_length>=3)if(r=qr(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Bs(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Bs(t,t.ins_h,t.window[t.strstart+1]);else r=qr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Cs(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Xr?(Cs(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Cs(t,!1),0===t.strm.avail_out)?1:2},Qs=(t,e)=>{let i,r,s;for(;;){if(t.lookahead<fs){if(Ms(t),t.lookahead<fs&&e===Yr)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Bs(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-fs&&(t.match_length=Es(t,i),t.match_length<=5&&(t.strategy===as||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=qr(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Bs(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Cs(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=qr(t,0,t.window[t.strstart-1]),r&&Cs(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=qr(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Xr?(Cs(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Cs(t,!1),0===t.strm.avail_out)?1:2};function vs(t,e,i,r,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=r,this.func=s}const Ds=[new vs(0,0,0,0,Ps),new vs(4,4,8,4,Ts),new vs(4,5,16,8,Ts),new vs(4,6,32,32,Ts),new vs(4,4,16,16,Qs),new vs(8,16,32,32,Qs),new vs(8,16,128,128,Qs),new vs(8,32,128,256,Qs),new vs(32,128,258,1024,Qs),new vs(32,258,258,4096,Qs)];function Rs(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ds,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ws(this.dyn_ltree),ws(this.dyn_dtree),ws(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ws(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ws(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const zs=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==gs&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==ps&&e.status!==ms?1:0},Ws=t=>{if(zs(t))return bs(t,is);t.total_in=t.total_out=0,t.data_type=As;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?gs:ps,t.adler=2===e.wrap?0:1,e.last_flush=-2,Hr(e),ts},Fs=t=>{const e=Ws(t);var i;return e===ts&&((i=t.state).window_size=2*i.w_size,ws(i.head),i.max_lazy_match=Ds[i.level].max_lazy,i.good_match=Ds[i.level].good_length,i.nice_match=Ds[i.level].nice_length,i.max_chain_length=Ds[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),e},Us=(t,e,i,r,s,n)=>{if(!t)return is;let a=1;if(e===ns&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>9||i!==ds||r<8||r>15||e<0||e>9||n<0||n>hs||8===r&&1!==a)return bs(t,is);8===r&&(r=9);const o=new Rs;return t.state=o,o.strm=t,o.status=gs,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=n,o.method=i,Fs(t)};var Ns={deflateInit:(t,e)=>Us(t,e,ds,15,8,cs),deflateInit2:Us,deflateReset:Fs,deflateResetKeep:Ws,deflateSetHeader:(t,e)=>zs(t)||2!==t.state.wrap?is:(t.state.gzhead=e,ts),deflate:(t,e)=>{if(zs(t)||e>$r||e<0)return t?bs(t,is):is;const i=t.state;if(!t.output||0!==t.avail_in&&!t.input||i.status===ms&&e!==Xr)return bs(t,0===t.avail_out?ss:is);const r=i.last_flush;if(i.last_flush=e,0!==i.pending){if(xs(t),0===t.avail_out)return i.last_flush=-1,ts}else if(0===t.avail_in&&ys(e)<=ys(r)&&e!==Xr)return bs(t,ss);if(i.status===ms&&0!==t.avail_in)return bs(t,ss);if(i.status===gs&&0===i.wrap&&(i.status=ps),i.status===gs){let e=ds+(i.w_bits-8<<4)<<8,r=-1;if(r=i.strategy>=os||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=r<<6,0!==i.strstart&&(e|=32),e+=31-e%31,ks(i,e),0!==i.strstart&&(ks(i,t.adler>>>16),ks(i,65535&t.adler)),t.adler=1,i.status=ps,xs(t),0!==i.pending)return i.last_flush=-1,ts}if(57===i.status)if(t.adler=0,Ss(i,31),Ss(i,139),Ss(i,8),i.gzhead)Ss(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ss(i,255&i.gzhead.time),Ss(i,i.gzhead.time>>8&255),Ss(i,i.gzhead.time>>16&255),Ss(i,i.gzhead.time>>24&255),Ss(i,9===i.level?2:i.strategy>=os||i.level<2?4:0),Ss(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Ss(i,255&i.gzhead.extra.length),Ss(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Lr(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Ss(i,0),Ss(i,0),Ss(i,0),Ss(i,0),Ss(i,0),Ss(i,9===i.level?2:i.strategy>=os||i.level<2?4:0),Ss(i,3),i.status=ps,xs(t),0!==i.pending)return i.last_flush=-1,ts;if(69===i.status){if(i.gzhead.extra){let e=i.pending,r=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+r>i.pending_buf_size;){let s=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+s),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>e&&(t.adler=Lr(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex+=s,xs(t),0!==i.pending)return i.last_flush=-1,ts;e=0,r-=s}let s=new Uint8Array(i.gzhead.extra);i.pending_buf.set(s.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending+=r,i.gzhead.hcrc&&i.pending>e&&(t.adler=Lr(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let e,r=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>r&&(t.adler=Lr(t.adler,i.pending_buf,i.pending-r,r)),xs(t),0!==i.pending)return i.last_flush=-1,ts;r=0}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Ss(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>r&&(t.adler=Lr(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let e,r=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>r&&(t.adler=Lr(t.adler,i.pending_buf,i.pending-r,r)),xs(t),0!==i.pending)return i.last_flush=-1,ts;r=0}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Ss(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>r&&(t.adler=Lr(t.adler,i.pending_buf,i.pending-r,r))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(xs(t),0!==i.pending))return i.last_flush=-1,ts;Ss(i,255&t.adler),Ss(i,t.adler>>8&255),t.adler=0}if(i.status=ps,xs(t),0!==i.pending)return i.last_flush=-1,ts}if(0!==t.avail_in||0!==i.lookahead||e!==Yr&&i.status!==ms){let r=0===i.level?Ps(i,e):i.strategy===os?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(Ms(t),0===t.lookahead)){if(e===Yr)return 1;break}if(t.match_length=0,i=qr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Cs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Xr?(Cs(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Cs(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===ls?((t,e)=>{let i,r,s,n;const a=t.window;for(;;){if(t.lookahead<=us){if(Ms(t),t.lookahead<=us&&e===Yr)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,r=a[s],r===a[++s]&&r===a[++s]&&r===a[++s])){n=t.strstart+us;do{}while(r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&s<n);t.match_length=us-(n-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=qr(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=qr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Cs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Xr?(Cs(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Cs(t,!1),0===t.strm.avail_out)?1:2})(i,e):Ds[i.level].func(i,e);if(3!==r&&4!==r||(i.status=ms),1===r||3===r)return 0===t.avail_out&&(i.last_flush=-1),ts;if(2===r&&(e===Kr?Zr(i):e!==$r&&(Gr(i,0,0,!1),e===jr&&(ws(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),xs(t),0===t.avail_out))return i.last_flush=-1,ts}return e!==Xr?ts:i.wrap<=0?es:(2===i.wrap?(Ss(i,255&t.adler),Ss(i,t.adler>>8&255),Ss(i,t.adler>>16&255),Ss(i,t.adler>>24&255),Ss(i,255&t.total_in),Ss(i,t.total_in>>8&255),Ss(i,t.total_in>>16&255),Ss(i,t.total_in>>24&255)):(ks(i,t.adler>>>16),ks(i,65535&t.adler)),xs(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?ts:es)},deflateEnd:t=>{if(zs(t))return is;const e=t.state.status;return t.state=null,e===ps?bs(t,rs):ts},deflateSetDictionary:(t,e)=>{let i=e.length;if(zs(t))return is;const r=t.state,s=r.wrap;if(2===s||1===s&&r.status!==gs||r.lookahead)return is;if(1===s&&(t.adler=Ur(t.adler,e,i,0)),r.wrap=0,i>=r.w_size){0===s&&(ws(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(i-r.w_size,i),0),e=t,i=r.w_size}const n=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,Ms(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=Bs(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,Ms(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=a,t.input=o,t.avail_in=n,r.wrap=s,ts},deflateInfo:"pako deflate (from Nodeca project)"};const Ls=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Os=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)Ls(i,e)&&(t[e]=i[e])}}return t},Vs=t=>{let e=0;for(let i=0,r=t.length;i<r;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,r=0,s=t.length;e<s;e++){let s=t[e];i.set(s,r),r+=s.length}return i};let Hs=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Hs=!1}const Gs=new Uint8Array(256);for(let t=0;t<256;t++)Gs[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Gs[254]=Gs[254]=1;var Js=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,i,r,s,n,a=t.length,o=0;for(s=0;s<a;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(r=t.charCodeAt(s+1),56320==(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),s++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(o),n=0,s=0;n<o;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(r=t.charCodeAt(s+1),56320==(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),s++)),i<128?e[n++]=i:i<2048?(e[n++]=192|i>>>6,e[n++]=128|63&i):i<65536?(e[n++]=224|i>>>12,e[n++]=128|i>>>6&63,e[n++]=128|63&i):(e[n++]=240|i>>>18,e[n++]=128|i>>>12&63,e[n++]=128|i>>>6&63,e[n++]=128|63&i);return e},qs=(t,e)=>{const i=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let r,s;const n=new Array(2*i);for(s=0,r=0;r<i;){let e=t[r++];if(e<128){n[s++]=e;continue}let a=Gs[e];if(a>4)n[s++]=65533,r+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&r<i;)e=e<<6|63&t[r++],a--;a>1?n[s++]=65533:e<65536?n[s++]=e:(e-=65536,n[s++]=55296|e>>10&1023,n[s++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Hs)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let r=0;r<e;r++)i+=String.fromCharCode(t[r]);return i})(n,s)},Zs=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+Gs[t[i]]>e?i:e};var Ys=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ks=Object.prototype.toString,{Z_NO_FLUSH:js,Z_SYNC_FLUSH:Xs,Z_FULL_FLUSH:$s,Z_FINISH:tn,Z_OK:en,Z_STREAM_END:rn,Z_DEFAULT_COMPRESSION:sn,Z_DEFAULT_STRATEGY:nn,Z_DEFLATED:an}=Vr;function on(t){this.options=Os({level:sn,method:an,chunkSize:16384,windowBits:15,memLevel:8,strategy:nn},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ys,this.strm.avail_out=0;let i=Ns.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==en)throw new Error(Or[i]);if(e.header&&Ns.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Js(e.dictionary):"[object ArrayBuffer]"===Ks.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=Ns.deflateSetDictionary(this.strm,t),i!==en)throw new Error(Or[i]);this._dict_set=!0}}function ln(t,e){const i=new on(e);if(i.push(t,!0),i.err)throw i.msg||Or[i.err];return i.result}on.prototype.push=function(t,e){const i=this.strm,r=this.options.chunkSize;let s,n;if(this.ended)return!1;for(n=e===~~e?e:!0===e?tn:js,"string"==typeof t?i.input=Js(t):"[object ArrayBuffer]"===Ks.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(r),i.next_out=0,i.avail_out=r),(n===Xs||n===$s)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(s=Ns.deflate(i,n),s===rn)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),s=Ns.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===en;if(0!==i.avail_out){if(n>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},on.prototype.onData=function(t){this.chunks.push(t)},on.prototype.onEnd=function(t){t===en&&(this.result=Vs(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var hn={Deflate:on,deflate:ln,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ln(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ln(t,e)},constants:Vr};const cn=16209;var An=function(t,e){let i,r,s,n,a,o,l,h,c,A,d,u,f,g,p,m,b,y,w,I,B,x,C,S;const k=t.state;i=t.next_in,C=t.input,r=i+(t.avail_in-5),s=t.next_out,S=t.output,n=s-(e-t.avail_out),a=s+(t.avail_out-257),o=k.dmax,l=k.wsize,h=k.whave,c=k.wnext,A=k.window,d=k.hold,u=k.bits,f=k.lencode,g=k.distcode,p=(1<<k.lenbits)-1,m=(1<<k.distbits)-1;t:do{u<15&&(d+=C[i++]<<u,u+=8,d+=C[i++]<<u,u+=8),b=f[d&p];e:for(;;){if(y=b>>>24,d>>>=y,u-=y,y=b>>>16&255,0===y)S[s++]=65535&b;else{if(!(16&y)){if(64&y){if(32&y){k.mode=16191;break t}t.msg="invalid literal/length code",k.mode=cn;break t}b=f[(65535&b)+(d&(1<<y)-1)];continue e}for(w=65535&b,y&=15,y&&(u<y&&(d+=C[i++]<<u,u+=8),w+=d&(1<<y)-1,d>>>=y,u-=y),u<15&&(d+=C[i++]<<u,u+=8,d+=C[i++]<<u,u+=8),b=g[d&m];;){if(y=b>>>24,d>>>=y,u-=y,y=b>>>16&255,16&y){if(I=65535&b,y&=15,u<y&&(d+=C[i++]<<u,u+=8,u<y&&(d+=C[i++]<<u,u+=8)),I+=d&(1<<y)-1,I>o){t.msg="invalid distance too far back",k.mode=cn;break t}if(d>>>=y,u-=y,y=s-n,I>y){if(y=I-y,y>h&&k.sane){t.msg="invalid distance too far back",k.mode=cn;break t}if(B=0,x=A,0===c){if(B+=l-y,y<w){w-=y;do{S[s++]=A[B++]}while(--y);B=s-I,x=S}}else if(c<y){if(B+=l+c-y,y-=c,y<w){w-=y;do{S[s++]=A[B++]}while(--y);if(B=0,c<w){y=c,w-=y;do{S[s++]=A[B++]}while(--y);B=s-I,x=S}}}else if(B+=c-y,y<w){w-=y;do{S[s++]=A[B++]}while(--y);B=s-I,x=S}for(;w>2;)S[s++]=x[B++],S[s++]=x[B++],S[s++]=x[B++],w-=3;w&&(S[s++]=x[B++],w>1&&(S[s++]=x[B++]))}else{B=s-I;do{S[s++]=S[B++],S[s++]=S[B++],S[s++]=S[B++],w-=3}while(w>2);w&&(S[s++]=S[B++],w>1&&(S[s++]=S[B++]))}break}if(64&y){t.msg="invalid distance code",k.mode=cn;break t}b=g[(65535&b)+(d&(1<<y)-1)]}}break}}while(i<r&&s<a);w=u>>3,i-=w,u-=w<<3,d&=(1<<u)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=s<a?a-s+257:257-(s-a),k.hold=d,k.bits=u};const dn=15,un=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),gn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var mn=(t,e,i,r,s,n,a,o)=>{const l=o.bits;let h,c,A,d,u,f,g=0,p=0,m=0,b=0,y=0,w=0,I=0,B=0,x=0,C=0,S=null;const k=new Uint16Array(16),_=new Uint16Array(16);let E,M,P,T=null;for(g=0;g<=dn;g++)k[g]=0;for(p=0;p<r;p++)k[e[i+p]]++;for(y=l,b=dn;b>=1&&0===k[b];b--);if(y>b&&(y=b),0===b)return s[n++]=20971520,s[n++]=20971520,o.bits=1,0;for(m=1;m<b&&0===k[m];m++);for(y<m&&(y=m),B=1,g=1;g<=dn;g++)if(B<<=1,B-=k[g],B<0)return-1;if(B>0&&(0===t||1!==b))return-1;for(_[1]=0,g=1;g<dn;g++)_[g+1]=_[g]+k[g];for(p=0;p<r;p++)0!==e[i+p]&&(a[_[e[i+p]]++]=p);if(0===t?(S=T=a,f=20):1===t?(S=un,T=fn,f=257):(S=gn,T=pn,f=0),C=0,p=0,g=m,u=n,w=y,I=0,A=-1,x=1<<y,d=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){E=g-I,a[p]+1<f?(M=0,P=a[p]):a[p]>=f?(M=T[a[p]-f],P=S[a[p]-f]):(M=96,P=0),h=1<<g-I,c=1<<w,m=c;do{c-=h,s[u+(C>>I)+c]=E<<24|M<<16|P}while(0!==c);for(h=1<<g-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,p++,0==--k[g]){if(g===b)break;g=e[i+a[p]]}if(g>y&&(C&d)!==A){for(0===I&&(I=y),u+=m,w=g-I,B=1<<w;w+I<b&&(B-=k[w+I],!(B<=0));)w++,B<<=1;if(x+=1<<w,1===t&&x>852||2===t&&x>592)return 1;A=C&d,s[A]=y<<24|w<<16|u-n}}return 0!==C&&(s[u+C]=g-I<<24|64<<16),o.bits=y,0};const{Z_FINISH:bn,Z_BLOCK:yn,Z_TREES:wn,Z_OK:In,Z_STREAM_END:Bn,Z_NEED_DICT:xn,Z_STREAM_ERROR:Cn,Z_DATA_ERROR:Sn,Z_MEM_ERROR:kn,Z_BUF_ERROR:_n,Z_DEFLATED:En}=Vr,Mn=16180,Pn=16190,Tn=16191,Qn=16192,vn=16194,Dn=16199,Rn=16200,zn=16206,Wn=16209,Fn=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Un(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Nn=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Mn||e.mode>16211?1:0},Ln=t=>{if(Nn(t))return Cn;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Mn,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,In},On=t=>{if(Nn(t))return Cn;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ln(t)},Vn=(t,e)=>{let i;if(Nn(t))return Cn;const r=t.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Cn:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=i,r.wbits=e,On(t))},Hn=(t,e)=>{if(!t)return Cn;const i=new Un;t.state=i,i.strm=t,i.window=null,i.mode=Mn;const r=Vn(t,e);return r!==In&&(t.state=null),r};let Gn,Jn,qn=!0;const Zn=t=>{if(qn){Gn=new Int32Array(512),Jn=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(mn(1,t.lens,0,288,Gn,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;mn(2,t.lens,0,32,Jn,0,t.work,{bits:5}),qn=!1}t.lencode=Gn,t.lenbits=9,t.distcode=Jn,t.distbits=5},Yn=(t,e,i,r)=>{let s;const n=t.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Uint8Array(n.wsize)),r>=n.wsize?(n.window.set(e.subarray(i-n.wsize,i),0),n.wnext=0,n.whave=n.wsize):(s=n.wsize-n.wnext,s>r&&(s=r),n.window.set(e.subarray(i-r,i-r+s),n.wnext),(r-=s)?(n.window.set(e.subarray(i-r,i),0),n.wnext=r,n.whave=n.wsize):(n.wnext+=s,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=s))),0};var Kn={inflateReset:On,inflateReset2:Vn,inflateResetKeep:Ln,inflateInit:t=>Hn(t,15),inflateInit2:Hn,inflate:(t,e)=>{let i,r,s,n,a,o,l,h,c,A,d,u,f,g,p,m,b,y,w,I,B,x,C=0;const S=new Uint8Array(4);let k,_;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Nn(t)||!t.output||!t.input&&0!==t.avail_in)return Cn;i=t.state,i.mode===Tn&&(i.mode=Qn),a=t.next_out,s=t.output,l=t.avail_out,n=t.next_in,r=t.input,o=t.avail_in,h=i.hold,c=i.bits,A=o,d=l,x=In;t:for(;;)switch(i.mode){case Mn:if(0===i.wrap){i.mode=Qn;break}for(;c<16;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(2&i.wrap&&35615===h){0===i.wbits&&(i.wbits=15),i.check=0,S[0]=255&h,S[1]=h>>>8&255,i.check=Lr(i.check,S,2,0),h=0,c=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",i.mode=Wn;break}if((15&h)!==En){t.msg="unknown compression method",i.mode=Wn;break}if(h>>>=4,c-=4,B=8+(15&h),0===i.wbits&&(i.wbits=B),B>15||B>i.wbits){t.msg="invalid window size",i.mode=Wn;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&h?16189:Tn,h=0,c=0;break;case 16181:for(;c<16;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(i.flags=h,(255&i.flags)!==En){t.msg="unknown compression method",i.mode=Wn;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=Wn;break}i.head&&(i.head.text=h>>8&1),512&i.flags&&4&i.wrap&&(S[0]=255&h,S[1]=h>>>8&255,i.check=Lr(i.check,S,2,0)),h=0,c=0,i.mode=16182;case 16182:for(;c<32;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}i.head&&(i.head.time=h),512&i.flags&&4&i.wrap&&(S[0]=255&h,S[1]=h>>>8&255,S[2]=h>>>16&255,S[3]=h>>>24&255,i.check=Lr(i.check,S,4,0)),h=0,c=0,i.mode=16183;case 16183:for(;c<16;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}i.head&&(i.head.xflags=255&h,i.head.os=h>>8),512&i.flags&&4&i.wrap&&(S[0]=255&h,S[1]=h>>>8&255,i.check=Lr(i.check,S,2,0)),h=0,c=0,i.mode=16184;case 16184:if(1024&i.flags){for(;c<16;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}i.length=h,i.head&&(i.head.extra_len=h),512&i.flags&&4&i.wrap&&(S[0]=255&h,S[1]=h>>>8&255,i.check=Lr(i.check,S,2,0)),h=0,c=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(u=i.length,u>o&&(u=o),u&&(i.head&&(B=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(r.subarray(n,n+u),B)),512&i.flags&&4&i.wrap&&(i.check=Lr(i.check,r,u,n)),o-=u,n+=u,i.length-=u),i.length))break t;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===o)break t;u=0;do{B=r[n+u++],i.head&&B&&i.length<65536&&(i.head.name+=String.fromCharCode(B))}while(B&&u<o);if(512&i.flags&&4&i.wrap&&(i.check=Lr(i.check,r,u,n)),o-=u,n+=u,B)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===o)break t;u=0;do{B=r[n+u++],i.head&&B&&i.length<65536&&(i.head.comment+=String.fromCharCode(B))}while(B&&u<o);if(512&i.flags&&4&i.wrap&&(i.check=Lr(i.check,r,u,n)),o-=u,n+=u,B)break t}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;c<16;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(4&i.wrap&&h!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Wn;break}h=0,c=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=Tn;break;case 16189:for(;c<32;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}t.adler=i.check=Fn(h),h=0,c=0,i.mode=Pn;case Pn:if(0===i.havedict)return t.next_out=a,t.avail_out=l,t.next_in=n,t.avail_in=o,i.hold=h,i.bits=c,xn;t.adler=i.check=1,i.mode=Tn;case Tn:if(e===yn||e===wn)break t;case Qn:if(i.last){h>>>=7&c,c-=7&c,i.mode=zn;break}for(;c<3;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}switch(i.last=1&h,h>>>=1,c-=1,3&h){case 0:i.mode=16193;break;case 1:if(Zn(i),i.mode=Dn,e===wn){h>>>=2,c-=2;break t}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=Wn}h>>>=2,c-=2;break;case 16193:for(h>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Wn;break}if(i.length=65535&h,h=0,c=0,i.mode=vn,e===wn)break t;case vn:i.mode=16195;case 16195:if(u=i.length,u){if(u>o&&(u=o),u>l&&(u=l),0===u)break t;s.set(r.subarray(n,n+u),a),o-=u,n+=u,l-=u,a+=u,i.length-=u;break}i.mode=Tn;break;case 16196:for(;c<14;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(i.nlen=257+(31&h),h>>>=5,c-=5,i.ndist=1+(31&h),h>>>=5,c-=5,i.ncode=4+(15&h),h>>>=4,c-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Wn;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;c<3;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}i.lens[E[i.have++]]=7&h,h>>>=3,c-=3}for(;i.have<19;)i.lens[E[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,k={bits:i.lenbits},x=mn(0,i.lens,0,19,i.lencode,0,i.work,k),i.lenbits=k.bits,x){t.msg="invalid code lengths set",i.mode=Wn;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;C=i.lencode[h&(1<<i.lenbits)-1],p=C>>>24,m=C>>>16&255,b=65535&C,!(p<=c);){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(b<16)h>>>=p,c-=p,i.lens[i.have++]=b;else{if(16===b){for(_=p+2;c<_;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(h>>>=p,c-=p,0===i.have){t.msg="invalid bit length repeat",i.mode=Wn;break}B=i.lens[i.have-1],u=3+(3&h),h>>>=2,c-=2}else if(17===b){for(_=p+3;c<_;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}h>>>=p,c-=p,B=0,u=3+(7&h),h>>>=3,c-=3}else{for(_=p+7;c<_;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}h>>>=p,c-=p,B=0,u=11+(127&h),h>>>=7,c-=7}if(i.have+u>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Wn;break}for(;u--;)i.lens[i.have++]=B}}if(i.mode===Wn)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=Wn;break}if(i.lenbits=9,k={bits:i.lenbits},x=mn(1,i.lens,0,i.nlen,i.lencode,0,i.work,k),i.lenbits=k.bits,x){t.msg="invalid literal/lengths set",i.mode=Wn;break}if(i.distbits=6,i.distcode=i.distdyn,k={bits:i.distbits},x=mn(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,k),i.distbits=k.bits,x){t.msg="invalid distances set",i.mode=Wn;break}if(i.mode=Dn,e===wn)break t;case Dn:i.mode=Rn;case Rn:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=n,t.avail_in=o,i.hold=h,i.bits=c,An(t,d),a=t.next_out,s=t.output,l=t.avail_out,n=t.next_in,r=t.input,o=t.avail_in,h=i.hold,c=i.bits,i.mode===Tn&&(i.back=-1);break}for(i.back=0;C=i.lencode[h&(1<<i.lenbits)-1],p=C>>>24,m=C>>>16&255,b=65535&C,!(p<=c);){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(m&&!(240&m)){for(y=p,w=m,I=b;C=i.lencode[I+((h&(1<<y+w)-1)>>y)],p=C>>>24,m=C>>>16&255,b=65535&C,!(y+p<=c);){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}h>>>=y,c-=y,i.back+=y}if(h>>>=p,c-=p,i.back+=p,i.length=b,0===m){i.mode=16205;break}if(32&m){i.back=-1,i.mode=Tn;break}if(64&m){t.msg="invalid literal/length code",i.mode=Wn;break}i.extra=15&m,i.mode=16201;case 16201:if(i.extra){for(_=i.extra;c<_;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}i.length+=h&(1<<i.extra)-1,h>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;C=i.distcode[h&(1<<i.distbits)-1],p=C>>>24,m=C>>>16&255,b=65535&C,!(p<=c);){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(!(240&m)){for(y=p,w=m,I=b;C=i.distcode[I+((h&(1<<y+w)-1)>>y)],p=C>>>24,m=C>>>16&255,b=65535&C,!(y+p<=c);){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}h>>>=y,c-=y,i.back+=y}if(h>>>=p,c-=p,i.back+=p,64&m){t.msg="invalid distance code",i.mode=Wn;break}i.offset=b,i.extra=15&m,i.mode=16203;case 16203:if(i.extra){for(_=i.extra;c<_;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}i.offset+=h&(1<<i.extra)-1,h>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Wn;break}i.mode=16204;case 16204:if(0===l)break t;if(u=d-l,i.offset>u){if(u=i.offset-u,u>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Wn;break}u>i.wnext?(u-=i.wnext,f=i.wsize-u):f=i.wnext-u,u>i.length&&(u=i.length),g=i.window}else g=s,f=a-i.offset,u=i.length;u>l&&(u=l),l-=u,i.length-=u;do{s[a++]=g[f++]}while(--u);0===i.length&&(i.mode=Rn);break;case 16205:if(0===l)break t;s[a++]=i.length,l--,i.mode=Rn;break;case zn:if(i.wrap){for(;c<32;){if(0===o)break t;o--,h|=r[n++]<<c,c+=8}if(d-=l,t.total_out+=d,i.total+=d,4&i.wrap&&d&&(t.adler=i.check=i.flags?Lr(i.check,s,d,a-d):Ur(i.check,s,d,a-d)),d=l,4&i.wrap&&(i.flags?h:Fn(h))!==i.check){t.msg="incorrect data check",i.mode=Wn;break}h=0,c=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;c<32;){if(0===o)break t;o--,h+=r[n++]<<c,c+=8}if(4&i.wrap&&h!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Wn;break}h=0,c=0}i.mode=16208;case 16208:x=Bn;break t;case Wn:x=Sn;break t;case 16210:return kn;default:return Cn}return t.next_out=a,t.avail_out=l,t.next_in=n,t.avail_in=o,i.hold=h,i.bits=c,(i.wsize||d!==t.avail_out&&i.mode<Wn&&(i.mode<zn||e!==bn))&&Yn(t,t.output,t.next_out,d-t.avail_out),A-=t.avail_in,d-=t.avail_out,t.total_in+=A,t.total_out+=d,i.total+=d,4&i.wrap&&d&&(t.adler=i.check=i.flags?Lr(i.check,s,d,t.next_out-d):Ur(i.check,s,d,t.next_out-d)),t.data_type=i.bits+(i.last?64:0)+(i.mode===Tn?128:0)+(i.mode===Dn||i.mode===vn?256:0),(0===A&&0===d||e===bn)&&x===In&&(x=_n),x},inflateEnd:t=>{if(Nn(t))return Cn;let e=t.state;return e.window&&(e.window=null),t.state=null,In},inflateGetHeader:(t,e)=>{if(Nn(t))return Cn;const i=t.state;return 2&i.wrap?(i.head=e,e.done=!1,In):Cn},inflateSetDictionary:(t,e)=>{const i=e.length;let r,s,n;return Nn(t)?Cn:(r=t.state,0!==r.wrap&&r.mode!==Pn?Cn:r.mode===Pn&&(s=1,s=Ur(s,e,i,0),s!==r.check)?Sn:(n=Yn(t,e,i,i),n?(r.mode=16210,kn):(r.havedict=1,In)))},inflateInfo:"pako inflate (from Nodeca project)"};var jn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Xn=Object.prototype.toString,{Z_NO_FLUSH:$n,Z_FINISH:ta,Z_OK:ea,Z_STREAM_END:ia,Z_NEED_DICT:ra,Z_STREAM_ERROR:sa,Z_DATA_ERROR:na,Z_MEM_ERROR:aa}=Vr;function oa(t){this.options=Os({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ys,this.strm.avail_out=0;let i=Kn.inflateInit2(this.strm,e.windowBits);if(i!==ea)throw new Error(Or[i]);if(this.header=new jn,Kn.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Js(e.dictionary):"[object ArrayBuffer]"===Xn.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=Kn.inflateSetDictionary(this.strm,e.dictionary),i!==ea)))throw new Error(Or[i])}function la(t,e){const i=new oa(e);if(i.push(t),i.err)throw i.msg||Or[i.err];return i.result}oa.prototype.push=function(t,e){const i=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let n,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?ta:$n,"[object ArrayBuffer]"===Xn.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(r),i.next_out=0,i.avail_out=r),n=Kn.inflate(i,a),n===ra&&s&&(n=Kn.inflateSetDictionary(i,s),n===ea?n=Kn.inflate(i,a):n===na&&(n=ra));i.avail_in>0&&n===ia&&i.state.wrap>0&&0!==t[i.next_in];)Kn.inflateReset(i),n=Kn.inflate(i,a);switch(n){case sa:case na:case ra:case aa:return this.onEnd(n),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(0===i.avail_out||n===ia))if("string"===this.options.to){let t=Zs(i.output,i.next_out),e=i.next_out-t,s=qs(i.output,t);i.next_out=e,i.avail_out=r-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(s)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(n!==ea||0!==o){if(n===ia)return n=Kn.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},oa.prototype.onData=function(t){this.chunks.push(t)},oa.prototype.onEnd=function(t){t===ea&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Vs(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ha={Inflate:oa,inflate:la,inflateRaw:function(t,e){return(e=e||{}).raw=!0,la(t,e)},ungzip:la,constants:Vr};const{Deflate:ca,deflate:Aa,deflateRaw:da,gzip:ua}=hn,{Inflate:fa,inflate:ga,inflateRaw:pa,ungzip:ma}=ha;var ba,ya,wa,Ia,Ba,xa,Ca,Sa,ka,_a,Ea,Ma={Deflate:ca,deflate:Aa,deflateRaw:da,gzip:ua,Inflate:fa,inflate:ga,inflateRaw:pa,ungzip:ma,constants:Vr};function Pa(t){let e;t=(t=t.replace(/-/g,"+")).replace(/_/g,"/");try{e=atob(t)}catch{return null}const i=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const r=e.charCodeAt(t);if(r>255)return null;i[t]=r}return i}class Ta{constructor(t){ba.add(this),wa.set(this,[]),Ia.set(this,[]),Ba.set(this,[]),xa.set(this,[]),Ca.set(this,[]),Sa.set(this,null),null!=t&&(Xi(this,wa,t.up,"f"),Xi(this,Ia,t.right,"f"),Xi(this,Ba,t.down,"f"),Xi(this,xa,t.left,"f"),Xi(this,Ca,t.reset,"f"))}recordFrame(t,e){if(t>ya.maxFrames)throw new Error("Frame number exceeds maximum frame count.");if(null!=ji(this,Sa,"f")&&t<=ji(this,Sa,"f"))throw new Error("Frame number must be greater than the previous recorded frame.");Xi(this,Sa,t,"f");const i=ji(this,wa,"f").length%2!=0,r=ji(this,Ia,"f").length%2!=0,s=ji(this,Ba,"f").length%2!=0,n=ji(this,xa,"f").length%2!=0,a=ji(this,Ca,"f").length%2!=0;e.up!=i&&ji(this,wa,"f").push(t),e.right!=r&&ji(this,Ia,"f").push(t),e.down!=s&&ji(this,Ba,"f").push(t),e.left!=n&&ji(this,xa,"f").push(t),e.reset!=a&&ji(this,Ca,"f").push(t)}getFrame(t){return{up:(ji(this,ba,"m",ka).call(this,t,ji(this,wa,"f"))+1)%2!=0,right:(ji(this,ba,"m",ka).call(this,t,ji(this,Ia,"f"))+1)%2!=0,down:(ji(this,ba,"m",ka).call(this,t,ji(this,Ba,"f"))+1)%2!=0,left:(ji(this,ba,"m",ka).call(this,t,ji(this,xa,"f"))+1)%2!=0,reset:(ji(this,ba,"m",ka).call(this,t,ji(this,Ca,"f"))+1)%2!=0}}serialize(){const t=new Uint8Array(3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length+3+3*ji(this,Ba,"f").length+3+3*ji(this,xa,"f").length+3+3*ji(this,Ca,"f").length);ji(this,ba,"m",_a).call(this,ji(this,wa,"f"),t.subarray(0,3+3*ji(this,wa,"f").length)),ji(this,ba,"m",_a).call(this,ji(this,Ia,"f"),t.subarray(3+3*ji(this,wa,"f").length,3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length)),ji(this,ba,"m",_a).call(this,ji(this,Ba,"f"),t.subarray(3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length,3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length+3+3*ji(this,Ba,"f").length)),ji(this,ba,"m",_a).call(this,ji(this,xa,"f"),t.subarray(3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length+3+3*ji(this,Ba,"f").length,3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length+3+3*ji(this,Ba,"f").length+3+3*ji(this,xa,"f").length)),ji(this,ba,"m",_a).call(this,ji(this,Ca,"f"),t.subarray(3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length+3+3*ji(this,Ba,"f").length+3+3*ji(this,xa,"f").length,3+3*ji(this,wa,"f").length+3+3*ji(this,Ia,"f").length+3+3*ji(this,Ba,"f").length+3+3*ji(this,xa,"f").length+3+3*ji(this,Ca,"f").length));const e=new Ma.Deflate({level:9});return e.push(new Uint8Array(t),!0),function(t){let e="";for(const i of t)e+=String.fromCharCode(i);let i=btoa(e);return i=i.replace(/\+/g,"-"),i=i.replace(/\//g,"_"),i=i.replace(/=/g,""),i}(e.result)}static deserialize(t){const e=Pa(t);if(null==e)return null;const i=new Ma.Inflate;if(i.push(e,!0),i.err)return null;const r=i.result;if(!(r instanceof Uint8Array))return null;const s=ji(ya,ya,"m",Ea).call(ya,r);if(null==s)return null;const n=ji(ya,ya,"m",Ea).call(ya,r.subarray(3+3*s.length));if(null==n)return null;const a=ji(ya,ya,"m",Ea).call(ya,r.subarray(3+3*s.length+3+3*n.length));if(null==a)return null;const o=ji(ya,ya,"m",Ea).call(ya,r.subarray(3+3*s.length+3+3*n.length+3+3*a.length));if(null==o)return null;const l=ji(ya,ya,"m",Ea).call(ya,r.subarray(3+3*s.length+3+3*n.length+3+3*a.length+3+3*o.length));return null==l?null:new ya({up:s,right:n,down:a,left:o,reset:l})}}ya=Ta,wa=new WeakMap,Ia=new WeakMap,Ba=new WeakMap,xa=new WeakMap,Ca=new WeakMap,Sa=new WeakMap,ba=new WeakSet,ka=function(t,e){let i=-1;for(let r=0;r<e.length;++r){const s=e[r];if(s==t){i=r;break}if(s>t)break;i=r}return i},_a=function(t,e){e[0]=255&t.length,e[1]=t.length>>>8&255,e[2]=t.length>>>16&255;for(let i=0;i<t.length;++i){let r;r=0==i?t[i]:t[i]-t[i-1],e[3+3*i]=255&r,e[3+3*i+1]=r>>>8&255,e[3+3*i+2]=r>>>16&255}},Ea=function(t){if(t.length<3)return null;const e=t[0]|t[1]<<8|t[2]<<16;if(t.length<3+3*e)return null;const i=[];for(let r=0;r<e;++r){const e=t[3+3*r]|t[3+3*r+1]<<8|t[3+3*r+2]<<16;0==r?i.push(e):i.push(i[r-1]+e)}return i},Ta.maxFrames=5999999;const Qa=Ta;var va=i(1312);const Da=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],Ra=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function za(t){let e=0,i="";for(;e<8*t.length;){const r=Fa(t,e);let s;30&~r?(s=r,e+=6):(s=31&r,e+=5),i+=Da[s]}return i}function Wa(t){let e=0;const i=[],r=t.length;for(let s=0;s<r;s++){const n=t.charCodeAt(s);if(n>=Ra.length)return null;const a=Ra[n];if(-1==a)return null;30&~a?(Ua(i,e,6,a,s==r-1),e+=6):(Ua(i,e,5,a,s==r-1),e+=5)}return new Uint8Array(i)}function Fa(t,e){if(e>=8*t.length)throw new Error("Out of range");const i=Math.floor(e/8),r=t[i],s=e-8*i;if(s<=2||i>=t.length-1)return(r&63<<s)>>>s;return(r&63<<s)>>>s|(t[i+1]&63>>>8-s)<<8-s}function Ua(t,e,i,r,s){const n=Math.floor(e/8);for(;n>=t.length;)t.push(0);const a=e-8*n;if(t[n]|=r<<a&255,a>8-i&&!s){const e=n+1;e>=t.length&&t.push(0),t[e]|=r>>8-a}}var Na;class La{constructor(t=28){if(Na.set(this,void 0),!(Number.isSafeInteger(t)&&t>=0&&t<180))throw new Error("Representation is not a safe integer or is out of range");Xi(this,Na,t,"f")}clone(){return new La(ji(this,Na,"f"))}toDegrees(){return 2*ji(this,Na,"f")}static fromDegrees(t){const e=Math.round(t/2%180);return new La(e)}getSunPosition(){const t=2*ji(this,Na,"f")*(Math.PI/180),e=Math.cos(t),i=Math.sin(t);return new z(e,.78,i).normalize()}get representation(){return ji(this,Na,"f")}}Na=new WeakMap;const Oa=La;var Va;!function(t){t[t.Summer=0]="Summer",t[t.Winter=1]="Winter",t[t.Desert=2]="Desert"}(Va||(Va={}));const Ha=Va;var Ga;!function(t){t[t.Default=0]="Default",t[t.Summer=1]="Summer",t[t.Winter=2]="Winter",t[t.Desert=3]="Desert",t[t.Custom0=32]="Custom0",t[t.Custom1=33]="Custom1",t[t.Custom2=34]="Custom2",t[t.Custom3=35]="Custom3",t[t.Custom4=36]="Custom4",t[t.Custom5=37]="Custom5",t[t.Custom6=38]="Custom6",t[t.Custom7=39]="Custom7",t[t.Custom8=40]="Custom8"}(Ga||(Ga={}));const Ja=Ga;var qa;!function(t){t[t.Straight=0]="Straight",t[t.TurnSharp=1]="TurnSharp",t[t.SlopeUp=2]="SlopeUp",t[t.SlopeDown=3]="SlopeDown",t[t.Slope=4]="Slope",t[t.Start=5]="Start",t[t.Finish=6]="Finish",t[t.ToWideMiddle=7]="ToWideMiddle",t[t.ToWideLeft=8]="ToWideLeft",t[t.ToWideRight=9]="ToWideRight",t[t.StraightWide=10]="StraightWide",t[t.InnerCornerWide=11]="InnerCornerWide",t[t.OuterCornerWide=12]="OuterCornerWide",t[t.SlopeUpLeftWide=13]="SlopeUpLeftWide",t[t.SlopeUpRightWide=14]="SlopeUpRightWide",t[t.SlopeDownLeftWide=15]="SlopeDownLeftWide",t[t.SlopeDownRightWide=16]="SlopeDownRightWide",t[t.SlopeLeftWide=17]="SlopeLeftWide",t[t.SlopeRightWide=18]="SlopeRightWide",t[t.PillarTop=19]="PillarTop",t[t.PillarMiddle=20]="PillarMiddle",t[t.PillarBottom=21]="PillarBottom",t[t.PillarShort=22]="PillarShort",t[t.PlanePillarBottom=23]="PlanePillarBottom",t[t.PlanePillarShort=24]="PlanePillarShort",t[t.Plane=25]="Plane",t[t.PlaneWall=26]="PlaneWall",t[t.PlaneWallCorner=27]="PlaneWallCorner",t[t.PlaneWallInnerCorner=28]="PlaneWallInnerCorner",t[t.Block=29]="Block",t[t.WallTrackTop=30]="WallTrackTop",t[t.WallTrackMiddle=31]="WallTrackMiddle",t[t.WallTrackBottom=32]="WallTrackBottom",t[t.PlaneSlopeUp=33]="PlaneSlopeUp",t[t.PlaneSlopeDown=34]="PlaneSlopeDown",t[t.PlaneSlope=35]="PlaneSlope",t[t.TurnShort=36]="TurnShort",t[t.TurnLong=37]="TurnLong",t[t.SlopeUpLong=38]="SlopeUpLong",t[t.SlopeDownLong=39]="SlopeDownLong",t[t.TurnSLeft=41]="TurnSLeft",t[t.TurnSRight=42]="TurnSRight",t[t.IntersectionT=43]="IntersectionT",t[t.IntersectionCross=44]="IntersectionCross",t[t.PillarBranch1=45]="PillarBranch1",t[t.PillarBranch2=46]="PillarBranch2",t[t.PillarBranch3=47]="PillarBranch3",t[t.PillarBranch4=48]="PillarBranch4",t[t.WallTrackBottomCorner=49]="WallTrackBottomCorner",t[t.WallTrackMiddleCorner=50]="WallTrackMiddleCorner",t[t.WallTrackTopCorner=51]="WallTrackTopCorner",t[t.Checkpoint=52]="Checkpoint",t[t.HalfBlock=53]="HalfBlock",t[t.QuarterBlock=54]="QuarterBlock",t[t.HalfPlane=55]="HalfPlane",t[t.QuarterPlane=56]="QuarterPlane",t[t.PlaneBridge=57]="PlaneBridge",t[t.SignArrowLeft=58]="SignArrowLeft",t[t.SignArrowRight=59]="SignArrowRight",t[t.SignArrowUp=61]="SignArrowUp",t[t.SignArrowDown=62]="SignArrowDown",t[t.SignWarning=63]="SignWarning",t[t.SignWrongWay=64]="SignWrongWay",t[t.CheckpointWide=65]="CheckpointWide",t[t.WallTrackCeiling=66]="WallTrackCeiling",t[t.WallTrackFloor=67]="WallTrackFloor",t[t.BlockSlopedDown=68]="BlockSlopedDown",t[t.BlockSlopedDownInnerCorner=69]="BlockSlopedDownInnerCorner",t[t.BlockSlopedDownOuterCorner=70]="BlockSlopedDownOuterCorner",t[t.BlockSlopedUp=71]="BlockSlopedUp",t[t.BlockSlopedUpInnerCorner=72]="BlockSlopedUpInnerCorner",t[t.BlockSlopedUpOuterCorner=73]="BlockSlopedUpOuterCorner",t[t.FinishWide=74]="FinishWide",t[t.PlaneCheckpoint=75]="PlaneCheckpoint",t[t.PlaneFinish=76]="PlaneFinish",t[t.PlaneCheckpointWide=77]="PlaneCheckpointWide",t[t.PlaneFinishWide=78]="PlaneFinishWide",t[t.WallTrackBottomInnerCorner=79]="WallTrackBottomInnerCorner",t[t.WallTrackInnerCorner=80]="WallTrackInnerCorner",t[t.WallTrackTopInnerCorner=81]="WallTrackTopInnerCorner",t[t.TurnLong2=82]="TurnLong2",t[t.TurnLong3=83]="TurnLong3",t[t.BlockSlopeUp=85]="BlockSlopeUp",t[t.BlockSlopeDown=86]="BlockSlopeDown",t[t.BlockSlopeVerticalTop=87]="BlockSlopeVerticalTop",t[t.BlockSlopeVerticalBottom=88]="BlockSlopeVerticalBottom",t[t.PlaneSlopeVerticalBottom=90]="PlaneSlopeVerticalBottom",t[t.StartWide=91]="StartWide",t[t.PlaneStart=92]="PlaneStart",t[t.PlaneStartWide=93]="PlaneStartWide",t[t.TurnShortLeftWide=94]="TurnShortLeftWide",t[t.TurnShortRightWide=95]="TurnShortRightWide",t[t.TurnLongLeftWide=96]="TurnLongLeftWide",t[t.TurnLongRightWide=97]="TurnLongRightWide",t[t.SlopeUpVertical=98]="SlopeUpVertical",t[t.IntersectionY=99]="IntersectionY",t[t.IntersectionYLong=100]="IntersectionYLong",t[t.PillarBranch1Top=101]="PillarBranch1Top",t[t.PillarBranch1Bottom=102]="PillarBranch1Bottom",t[t.PillarBranch1Middle=103]="PillarBranch1Middle",t[t.PillarBranch2Top=104]="PillarBranch2Top",t[t.PillarBranch2Middle=105]="PillarBranch2Middle",t[t.PillarBranch2Bottom=106]="PillarBranch2Bottom",t[t.PillarBranch3Top=107]="PillarBranch3Top",t[t.PillarBranch3Middle=108]="PillarBranch3Middle",t[t.PillarBranch3Bottom=109]="PillarBranch3Bottom",t[t.PillarBranch4Top=110]="PillarBranch4Top",t[t.PillarBranch4Middle=111]="PillarBranch4Middle",t[t.PillarBranch4Bottom=112]="PillarBranch4Bottom",t[t.PillarBranch5=113]="PillarBranch5",t[t.PillarBranch5Top=114]="PillarBranch5Top",t[t.PillarBranch5Middle=115]="PillarBranch5Middle",t[t.PillarBranch5Bottom=116]="PillarBranch5Bottom",t[t.ToWideDouble=117]="ToWideDouble",t[t.ToWideDiagonal=118]="ToWideDiagonal",t[t.StraightPillarBottom=119]="StraightPillarBottom",t[t.StraightPillarShort=120]="StraightPillarShort",t[t.TurnSharpPillarBottom=121]="TurnSharpPillarBottom",t[t.TurnSharpPillarShort=122]="TurnSharpPillarShort",t[t.IntersectionTPillarBottom=123]="IntersectionTPillarBottom",t[t.IntersectionTPillarShort=124]="IntersectionTPillarShort",t[t.IntersectionCrossPillarBottom=125]="IntersectionCrossPillarBottom",t[t.IntersectionCrossPillarShort=126]="IntersectionCrossPillarShort",t[t.PlaneBridgeCorner=127]="PlaneBridgeCorner",t[t.PlaneBridgeIntersectionT=128]="PlaneBridgeIntersectionT",t[t.PlaneBridgeIntersectionCross=129]="PlaneBridgeIntersectionCross",t[t.BlockBridge=130]="BlockBridge",t[t.BlockBridgeCorner=131]="BlockBridgeCorner",t[t.BlockBridgeIntersectionT=132]="BlockBridgeIntersectionT",t[t.BlockBridgeIntersectionCross=133]="BlockBridgeIntersectionCross",t[t.WallTrackCeilingCorner=134]="WallTrackCeilingCorner",t[t.WallTrackCeilingPlaneCorner=135]="WallTrackCeilingPlaneCorner",t[t.WallTrackFloorCorner=136]="WallTrackFloorCorner",t[t.WallTrackFloorPlaneCorner=137]="WallTrackFloorPlaneCorner",t[t.SlopeUpVerticalLeftWide=138]="SlopeUpVerticalLeftWide",t[t.SlopeUpVerticalRightWide=139]="SlopeUpVerticalRightWide",t[t.BlockSlopeVerticalCornerTop=140]="BlockSlopeVerticalCornerTop",t[t.BlockSlopeVerticalCornerBottom=141]="BlockSlopeVerticalCornerBottom",t[t.WallTrackSlopeToVertical=142]="WallTrackSlopeToVertical",t[t.PlaneSlopeToVertical=143]="PlaneSlopeToVertical",t[t.BlockSlopeToVertical=144]="BlockSlopeToVertical",t[t.PlaneSlopeUpLong=145]="PlaneSlopeUpLong",t[t.PlaneSlopeDownLong=146]="PlaneSlopeDownLong",t[t.SlopeUpLongLeftWide=147]="SlopeUpLongLeftWide",t[t.SlopeUpLongRightWide=148]="SlopeUpLongRightWide",t[t.SlopeDownLongLeftWide=149]="SlopeDownLongLeftWide",t[t.SlopeDownLongRightWide=150]="SlopeDownLongRightWide",t[t.BlockSlopeUpLong=151]="BlockSlopeUpLong",t[t.BlockSlopeDownLong=152]="BlockSlopeDownLong",t[t.BlockSlopeVerticalInnerCornerBottom=153]="BlockSlopeVerticalInnerCornerBottom",t[t.BlockSlopeVerticalInnerCornerTop=154]="BlockSlopeVerticalInnerCornerTop",t[t.BlockInnerCorner=155]="BlockInnerCorner",t[t.SlopeToVertical=156]="SlopeToVertical",t[t.SlopeToVerticalLeftWide=157]="SlopeToVerticalLeftWide",t[t.SlopeToVerticalRightWide=158]="SlopeToVerticalRightWide",t[t.StraightTilted=159]="StraightTilted",t[t.TurnShortTilted=160]="TurnShortTilted",t[t.TurnLongTilted=161]="TurnLongTilted",t[t.TurnLong2Tilted=162]="TurnLong2Tilted",t[t.TurnLong3Tilted=163]="TurnLong3Tilted",t[t.TurnSLongLeft=164]="TurnSLongLeft",t[t.TurnSLongRight=165]="TurnSLongRight",t[t.ToTiltedLeft=166]="ToTiltedLeft",t[t.ToTiltedRight=167]="ToTiltedRight",t[t.PillarTopSlope=168]="PillarTopSlope",t[t.PillarShortSlope=169]="PillarShortSlope",t[t.HalfPlaneSlopeBottomLeft=170]="HalfPlaneSlopeBottomLeft",t[t.HalfPlaneSlopeBottomRight=171]="HalfPlaneSlopeBottomRight",t[t.HalfPlaneSlopeTopLeft=172]="HalfPlaneSlopeTopLeft",t[t.HalfPlaneSlopeTopRight=173]="HalfPlaneSlopeTopRight",t[t.HalfBlockSlopeBottomLeft=174]="HalfBlockSlopeBottomLeft",t[t.HalfBlockSlopeBottomRight=175]="HalfBlockSlopeBottomRight",t[t.HalfBlockSlopeTopLeft=176]="HalfBlockSlopeTopLeft",t[t.HalfBlockSlopeTopRight=177]="HalfBlockSlopeTopRight",t[t.PlaneWallSlopeLeft=178]="PlaneWallSlopeLeft",t[t.PlaneWallSlopeRight=179]="PlaneWallSlopeRight",t[t.PlaneWallSlopeUpLeft=180]="PlaneWallSlopeUpLeft",t[t.PlaneWallSlopeUpRight=181]="PlaneWallSlopeUpRight",t[t.PlaneWallSlopeDownLeft=182]="PlaneWallSlopeDownLeft",t[t.PlaneWallSlopeDownRight=183]="PlaneWallSlopeDownRight",t[t.PlaneWallSlopeUpLongLeft=184]="PlaneWallSlopeUpLongLeft",t[t.PlaneWallSlopeUpLongRight=185]="PlaneWallSlopeUpLongRight",t[t.PlaneWallSlopeDownLongLeft=186]="PlaneWallSlopeDownLongLeft",t[t.PlaneWallSlopeDownLongRight=187]="PlaneWallSlopeDownLongRight"}(qa||(qa={}));const Za=qa;var Ya;!function(t){t[t.YPositive=0]="YPositive",t[t.YNegative=1]="YNegative",t[t.XPositive=2]="XPositive",t[t.XNegative=3]="XNegative",t[t.ZPositive=4]="ZPositive",t[t.ZNegative=5]="ZNegative"}(Ya||(Ya={}));const Ka=Ya;var ja;!function(t){t[t.Special=0]="Special",t[t.Road=1]="Road",t[t.RoadTurns=2]="RoadTurns",t[t.RoadWide=3]="RoadWide",t[t.Plane=4]="Plane",t[t.Block=5]="Block",t[t.WallTrack=6]="WallTrack",t[t.Pillar=7]="Pillar",t[t.Sign=8]="Sign"}(ja||(ja={}));const Xa=ja;var $a;!function(t){t[t.Checkpoint=0]="Checkpoint",t[t.Finish=1]="Finish"}($a||($a={}));const to=$a,eo=[[new R(0,0,0,1),new R(0,.7071067811865475,0,.7071067811865476),new R(0,1,0,0),new R(0,.7071067811865476,0,-.7071067811865475)],[new R(0,0,1,0),new R(.7071067811865475,0,.7071067811865476,0),new R(1,0,0,0),new R(.7071067811865476,0,-.7071067811865475,0)],[new R(0,0,-.7071067811865477,.7071067811865475),new R(.5,.5,-.5,.5),new R(.7071067811865475,.7071067811865477,0,0),new R(.5,.5,.5,-.5)],[new R(0,0,.7071067811865475,.7071067811865476),new R(.5,-.5,.5,.5),new R(.7071067811865476,-.7071067811865475,0,0),new R(.5,-.5,-.5,-.5)],[new R(.7071067811865475,0,0,.7071067811865476),new R(.5,.5,.5,.5),new R(0,.7071067811865476,.7071067811865475,0),new R(-.5,.5,.5,-.5)],[new R(-.7071067811865477,0,0,.7071067811865475),new R(-.5,-.5,.5,.5),new R(0,-.7071067811865475,.7071067811865477,0),new R(.5,-.5,.5,-.5)]];function io(t,e){return eo[e][t].clone()}var ro;class so{constructor(t){ro.set(this,void 0);const e=[];for(const[i,r,s]of t)e.push([i,r,s]);Xi(this,ro,e,"f")}rotated(t,e){return new so(ji(this,ro,"f").map((([i,r,s])=>function(t,e,i,r,s){if(s==Ka.YNegative||s==Ka.XNegative||s==Ka.ZNegative)switch(r){case 0:break;case 1:[t,i]=[-i-1,t];break;case 2:[t,i]=[-t-1,-i-1];break;case 3:[t,i]=[i,-t-1];break;default:throw new Error("Invalid rotation")}else switch(r){case 0:break;case 1:[t,i]=[i,-t-1];break;case 2:[t,i]=[-t-1,-i-1];break;case 3:[t,i]=[-i-1,t];break;default:throw new Error("Invalid rotation")}return s==Ka.YPositive||(s==Ka.YNegative?[t,e]=[-t-1,-e-1]:s==Ka.XPositive?[t,e]=[e,-t-1]:s==Ka.XNegative?[t,e]=[-e-1,t]:s==Ka.ZPositive?[e,i]=[-i-1,e]:[e,i]=[i,-e-1]),[t,e,i]}(i,r,s,t,e))))}forEach(t){for(let e=0;e<ji(this,ro,"f").length;e++){const[i,r,s]=ji(this,ro,"f")[e];t(i,r,s,e)}}some(t){for(let e=0;e<ji(this,ro,"f").length;e++){const[i,r,s]=ji(this,ro,"f")[e];if(t(i,r,s,e))return!0}return!1}get length(){return ji(this,ro,"f").length}}ro=new WeakMap;const no=so,ao=[{id:Ja.Summer,colors:{}},{id:Ja.Winter,colors:{Road:"#5077b2",RoadBarrier:"#898989",RoadEdgeWhite:"#ffffff",RoadEdgeRed:"#1f3d6b",BlockSurface:"#878787",Pillar:"#2b4d7f",PillarEdge:"#071428",WallTrack:"#5077b2",WallTrackBottom:"#878787",WallTrackSides:"#ffffff",PlaneWall:"#1f3d6b",PlaneWallDetail:"#878787",SignYellow:"#1b2a89",SignRed:"#841901",SignBlack:"#5077b2"}},{id:Ja.Desert,colors:{Road:"#997240",RoadBarrier:"#211001",RoadEdgeRed:"#5b2424",RoadEdgeWhite:"#510808",BlockSurface:"#b78f5b",Pillar:"#99713d",PillarEdge:"#1c1105",WallTrack:"#260b0b",WallTrackBottom:"#160606",WallTrackSides:"#75562e",PlaneWall:"#633030",PlaneWallDetail:"#aa8a53",SignYellow:"#997240",SignRed:"#d80202",SignBlack:"#601d1d"}}],oo=ao.concat([{id:Ja.Custom0,colors:{BlockSurface:"#131313"}},{id:Ja.Custom1,colors:{BlockSurface:"#501b1b"}},{id:Ja.Custom2,colors:{BlockSurface:"#7f4d2b"}},{id:Ja.Custom3,colors:{BlockSurface:"#93862d"}},{id:Ja.Custom4,colors:{BlockSurface:"#2a5e30"}},{id:Ja.Custom5,colors:{BlockSurface:"#236363"}},{id:Ja.Custom6,colors:{BlockSurface:"#20244b"}},{id:Ja.Custom7,colors:{BlockSurface:"#592759"}},{id:Ja.Custom8,colors:{BlockSurface:"#302318"}}]);class lo{constructor(t,e,i,r,s,n,a=null,o=null){const l=[];for(const[t,e]of n)for(let i=t[0];i<=e[0];i++)for(let r=t[1];r<=e[1];r++)for(let s=t[2];s<=e[2];s++){if(null!=l.find((([t,e,n])=>t==i&&e==r&&n==s)))throw new Error("Duplicate tile in track part");l.push([i,r,s])}this.checksum=t,this.category=e,this.id=i,this.models=r,this.colors=s,this.tiles=new no(l),this.detector=a,this.startOffset=o,Object.freeze(this)}}const ho=[new lo("6d94d798abd14dc3bce4e99c180309d993ad43adb5f2c90eef8e350eedafe7cf",Xa.Special,Za.Start,[["Road","Start"]],ao,[[[-2,0,-2],[1,0,1]]],null,new z(0,.35,1.35)),new lo("f29e34b2e05e0a4751109ae564b03fe8878a79cc6b26288f1117ed296d09c5bb",Xa.Special,Za.StartWide,[["RoadWide","StartWide"]],ao,[[[-2,0,-2],[5,0,1]]],null,new z(-10,.35,1.35)),new lo("3c304054f415fbede4f73a43517db04302f38b16fa2cd4e587082b37b75e20e5",Xa.Special,Za.PlaneStart,[["Planes","PlaneStart"]],ao,[[[-2,0,-2],[1,0,1]]],null,new z(0,.35,1.35)),new lo("f08710416bdaa3d91d0d43f014e45d421fdb4587a334993bad0056f3dbbcb6bb",Xa.Special,Za.PlaneStartWide,[["Planes","PlaneStartWide"]],ao,[[[-2,0,-2],[5,0,1]]],null,new z(-10,.35,1.35)),new lo("223fc87c72bb64b58677062ffa08ab7eafd78071bced7c53233606763cd5316b",Xa.Special,Za.Checkpoint,[["Road","Checkpoint"]],ao,[[[-2,0,-2],[1,0,1]]],{type:to.Checkpoint,center:[0,2.2,0],size:[10.5,3.8,1]}),new lo("82d9a9879cee92c04c8d4ba2e16fc31bb1917a31f5802a3bb5177ca9a5cfee01",Xa.Special,Za.CheckpointWide,[["RoadWide","CheckpointWide"]],ao,[[[-2,0,-2],[5,0,1]]],{type:to.Checkpoint,center:[10,2.2,0],size:[30.6,3.8,1]}),new lo("fe8946d7f09724b5e11f493eb5c2a5b5e3d502b15beaad003f8134ac63558948",Xa.Special,Za.PlaneCheckpoint,[["Planes","PlaneCheckpoint"]],ao,[[[-2,0,-2],[1,0,1]]],{type:to.Checkpoint,center:[0,2.2,0],size:[18.25,3.8,1]}),new lo("d486d9b851db35dd44c15f9e0bb3bf582118daf7be514598a19307f61cf46678",Xa.Special,Za.PlaneCheckpointWide,[["Planes","PlaneCheckpointWide"]],ao,[[[-2,0,-2],[5,0,1]]],{type:to.Checkpoint,center:[10,2.2,0],size:[38.25,3.8,1]}),new lo("c01200d573a3594a6a4cb73ebb600964d653e4a89267d3297f3969220742aa79",Xa.Special,Za.Finish,[["Road","Finish"]],ao,[[[-2,0,-2],[1,0,1]]],{type:to.Finish,center:[0,2.2,0],size:[10.5,3.8,2]}),new lo("a9cefdff816e94a643210c58582c2809de0e3e0e0478b8d5baabd7fe81f13e73",Xa.Special,Za.FinishWide,[["RoadWide","FinishWide"]],ao,[[[-2,0,-2],[5,0,1]]],{type:to.Finish,center:[10,2.2,0],size:[30.6,3.8,2]}),new lo("75e5f09fe8a18ecafaf1fb80929173ef0a7dc0b785596bbe0ccd85a934d79578",Xa.Special,Za.PlaneFinish,[["Planes","PlaneFinish"]],ao,[[[-2,0,-2],[1,0,1]]],{type:to.Finish,center:[0,2.2,0],size:[18.25,3.8,2]}),new lo("5801b3268c75809728c63450d06000c5f6fcfd5d72691902f99d7d19d25e1d78",Xa.Special,Za.PlaneFinishWide,[["Planes","PlaneFinishWide"]],ao,[[[-2,0,-2],[5,0,1]]],{type:to.Finish,center:[10,2.2,0],size:[38.25,3.8,2]}),new lo("3421096c1986d008da88b5fac64cd4c475603138c9bf8a98ab6d581dda6befa7",Xa.Road,Za.Straight,[["Road","Straight"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("bdc3bcdafec9bc26835dc76159f7223da7da5babb3a5770129fa11046c748b69",Xa.Road,Za.StraightPillarBottom,[["Road","Straight"],["Pillar","SurfacePillarBottom"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("2758e984d87b3170f6618c9c689554ef169fd5f80ea7f0df292ffd69792d414e",Xa.Road,Za.StraightPillarShort,[["Road","Straight"],["Pillar","SurfacePillarShort"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("fb5a81784022cfc2d3d0007a032976c8dfd066e72a3bc92f671c98c5cca36aaa",Xa.Road,Za.TurnSharp,[["Road","TurnSharp"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("3da2e9a93da06b1376c33486f30a5f02d8c2f125f5b7d8b41166049ecd95f269",Xa.Road,Za.TurnSharpPillarBottom,[["Road","TurnSharp"],["Pillar","SurfacePillarBottom"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("c642122276547382e37dcb857b130088f4dc0d208dc7fdb6055b2a93080a3ffe",Xa.Road,Za.TurnSharpPillarShort,[["Road","TurnSharp"],["Pillar","SurfacePillarShort"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("7d8d1eed719515ba7e48b5ef4a53b6b4bb2bef42496b6b40d2551230435ecb66",Xa.Road,Za.SlopeUp,[["Road","SlopeUp"]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[1,1,-2]]]),new lo("d6d54dbf283f7209032541fc6b924dc879d914f253e391cf8b34dde8354661be",Xa.Road,Za.SlopeUpLong,[["Road","SlopeUpLong"]],ao,[[[-2,0,-4],[1,0,1]],[[-2,1,-5],[1,1,-4]],[[-2,1,-6],[1,2,-6]]]),new lo("435e8cf33d28e52f75890cba1cb6529991148afd701f9b40e9ab876c11b2c448",Xa.Road,Za.SlopeDown,[["Road","SlopeDown"]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,0],[1,1,1]]]),new lo("01990158f65e5d499030d8c6d0ce80d34c136189ae1a9430d4260ea7a85e91a9",Xa.Road,Za.SlopeDownLong,[["Road","SlopeDownLong"]],ao,[[[-2,0,-2],[1,0,0]],[[-2,1,-1],[1,1,5]],[[-2,2,3],[1,2,5]]]),new lo("f4fe25138e88fc36b796c9251c696f1e44bf77502ee8e4e7d9ed2d8c8be2fd98",Xa.Road,Za.Slope,[["Road","Slope"]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,2,-2]]]),new lo("2cfd3548dbd3dcf793f1597a1350864b5f14ed46e907d163977b73363896c3d4",Xa.Road,Za.SlopeUpVertical,[["Road","SlopeUpVertical"]],ao,[[[-2,0,-1],[1,0,1]],[[-2,1,-1],[1,1,-1]],[[-2,1,-2],[1,3,-2]]]),new lo("3de87fd1ea3a4ffbf353a03e3c90da97e62b03f85d07ad4bc947e9ceed20b7d8",Xa.Road,Za.SlopeToVertical,[["Road","SlopeToVertical"]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,3,-2]],[[-2,2,-1],[-2,2,-1]],[[1,2,-1],[1,2,-1]]]),new lo("63628b23e104a3eb3c2ba8189cd408a10fbb6ebcd6fa4359d981e3c3804c13d8",Xa.Road,Za.IntersectionT,[["Road","IntersectionT"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("400dc4643653001d283bb13f740593fc2300c547bb4d2a962054ba6aabf3721c",Xa.Road,Za.IntersectionTPillarBottom,[["Road","IntersectionT"],["Pillar","SurfacePillarBottom"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("60355388650d35fcbddaaac29e0d03bc2ae46db1a05cd23ddd3f2722ec2d409e",Xa.Road,Za.IntersectionTPillarShort,[["Road","IntersectionT"],["Pillar","SurfacePillarShort"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("74197b3731c2befd03498bf5172859f0b3652f1972c19e43a99bb938769573df",Xa.Road,Za.IntersectionCross,[["Road","IntersectionCross"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("464e69b5c4f2667c246ade9ed33fd3e50b49438ed0ab787a086dfe74c217ff6c",Xa.Road,Za.IntersectionCrossPillarBottom,[["Road","IntersectionCross"],["Pillar","SurfacePillarBottom"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("90004caf354627289265314966f11b5656e6879ca7de10507e6c50cd95254b75",Xa.Road,Za.IntersectionCrossPillarShort,[["Road","IntersectionCross"],["Pillar","SurfacePillarShort"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("6259b51229152128dc859e1bffc614b60464799c401182dccae58131ee155b1c",Xa.Road,Za.IntersectionY,[["Road","IntersectionY"]],ao,[[[-6,0,-10],[-3,0,-8]],[[-5,0,-7],[-2,0,-5]],[[-4,0,-4],[3,0,-4]],[[-3,0,-3],[2,0,-2]],[[-2,0,-1],[1,0,1]],[[-1,0,-5],[4,0,-5]],[[1,0,-7],[4,0,-6]],[[2,0,-10],[5,0,-8]]]),new lo("846db907fcc382dd462283874fcbceab9c8c06fab6e7654a5cf6811dffcf086e",Xa.Road,Za.IntersectionYLong,[["Road","IntersectionYLong"]],ao,[[[-6,0,-14],[-3,0,-11]],[[-5,0,-10],[-2,0,-8]],[[-4,0,-7],[3,0,-5]],[[-3,0,-4],[2,0,-3]],[[-2,0,-2],[1,0,1]],[[-1,0,-8],[4,0,-8]],[[1,0,-10],[4,0,-9]],[[2,0,-14],[5,0,-11]]]),new lo("48992a178b504f5205eb7613e273f61a2916b16b9b3d402208dcf711b29d20d3",Xa.Road,Za.StraightTilted,[["Road","Straight",{offset:new z(0,5,0),scale:new z(1,.894425810573391,1),quaternion:(new R).setFromEuler(new Ut(0,0,-.46364760900081))}]],ao,[[[-2,1,-2],[0,1,1]],[[0,0,-2],[1,0,1]]]),new lo("d06cc41bda0172e626ad85fca987f426c60b86c3fabd3635d8ddc17f0b38afcd",Xa.Road,Za.ToTiltedLeft,[["Road","ToTilted",{flipX:!0,offset:new z(0,5,0)}]],ao,[[[-2,0,-10],[-1,0,1]],[[-2,1,-3],[1,1,1]],[[-1,1,-10],[1,1,-4]]]),new lo("36bbe97fc3c199f694f3aefc0ba5ee6e6b3859cf8adeaabab77d53eb921d8979",Xa.Road,Za.ToTiltedRight,[["Road","ToTilted",{offset:new z(0,5,0)}]],ao,[[[-2,1,-10],[0,1,1]],[[0,0,-10],[1,0,1]],[[1,1,-3],[1,1,1]]]),new lo("fd261825d8261ce05c214e0f12e3640a38f448866ee662136fbdee4f2e0bae22",Xa.RoadTurns,Za.TurnShort,[["Road","TurnShort"]],ao,[[[-2,0,0],[1,0,1]],[[-2,0,-1],[2,0,-1]],[[-1,0,-2],[3,0,-2]],[[-1,0,-3],[5,0,-3]],[[0,0,-4],[5,0,-4]],[[1,0,-5],[5,0,-5]],[[3,0,-6],[5,0,-6]]]),new lo("830000386e11f915cc7be618600256c438ace73ed2b6f0f3ec2990d8c25760fd",Xa.RoadTurns,Za.TurnLong,[["Road","TurnLong"]],ao,[[[-2,0,-1],[1,0,1]],[[-1,0,-2],[2,0,-2]],[[-1,0,-3],[2,0,-3]],[[-1,0,-4],[3,0,-4]],[[0,0,-5],[4,0,-5]],[[1,0,-6],[6,0,-6]],[[2,0,-7],[9,0,-7]],[[3,0,-8],[9,0,-8]],[[4,0,-9],[9,0,-9]],[[7,0,-10],[9,0,-10]]]),new lo("a02b464ce6f6348e13dc90199882e91be6f2220e7e13c79ad46ca9b2032adb01",Xa.RoadTurns,Za.TurnLong2,[["Road","TurnLong2"]],ao,[[[-2,0,-2],[1,0,1]],[[-1,0,-4],[2,0,-3]],[[-1,0,-5],[3,0,-5]],[[0,0,-6],[4,0,-6]],[[0,0,-7],[5,0,-7]],[[1,0,-8],[6,0,-8]],[[2,0,-9],[7,0,-9]],[[3,0,-10],[9,0,-10]],[[4,0,-11],[13,0,-11]],[[5,0,-12],[13,0,-12]],[[7,0,-13],[13,0,-13]],[[10,0,-14],[13,0,-14]]]),new lo("a9e794783cdb96e81c95a476f9cbe9e43a5f0357e34d7d278e449a701e44afc3",Xa.RoadTurns,Za.TurnLong3,[["Road","TurnLong3"]],ao,[[[-2,0,-2],[1,0,1]],[[-1,0,-4],[2,0,-3]],[[-1,0,-5],[2,0,-5]],[[0,0,-6],[3,0,-6]],[[0,0,-7],[3,0,-7]],[[0,0,-8],[4,0,-8]],[[1,0,-9],[5,0,-9]],[[2,0,-10],[6,0,-10]],[[2,0,-11],[7,0,-11]],[[3,0,-12],[8,0,-12]],[[4,0,-13],[10,0,-13]],[[5,0,-14],[13,0,-14]],[[7,0,-15],[17,0,-15]],[[8,0,-16],[17,0,-16]],[[11,0,-17],[17,0,-17]],[[14,0,-18],[17,0,-18]]]),new lo("285f8b84f4dcbb2cbf59be0a54038a01d7cd672cbce96fa0427b589562ebf45e",Xa.RoadTurns,Za.TurnSLeft,[["Road","TurnS",{flipX:!0}]],ao,[[[-2,0,-1],[1,0,1]],[[-3,0,-3],[0,0,-2]],[[-4,0,-4],[0,0,-4]],[[-5,0,-5],[-1,0,-5]],[[-5,0,-7],[-2,0,-6]],[[-6,0,-10],[-3,0,-8]]]),new lo("fd7fea58c90ec42781be6192ac4f1086945d48986bc2f0f0702c1ede2c7bd6be",Xa.RoadTurns,Za.TurnSRight,[["Road","TurnS"]],ao,[[[-2,0,-1],[1,0,1]],[[-1,0,-3],[2,0,-2]],[[-1,0,-4],[3,0,-4]],[[0,0,-5],[4,0,-5]],[[1,0,-7],[4,0,-6]],[[2,0,-10],[5,0,-8]]]),new lo("190ba45df20d893be69c2f9e92d420e3aca4070340a836bb2062ea3ffdeb83e8",Xa.RoadTurns,Za.TurnSLongLeft,[["Road","TurnSLong",{flipX:!0}]],ao,[[[-6,0,-14],[-3,0,-11]],[[-5,0,-10],[-2,0,-8]],[[-4,0,-7],[-1,0,-5]],[[-3,0,-4],[0,0,-3]],[[-2,0,-2],[1,0,1]],[[-1,0,-8],[-1,0,-8]],[[0,0,-5],[0,0,-5]]]),new lo("372b17815889b51da18fbcb77434f1a7ea0b93d2d62cd7c1ca9ec2a1854effe5",Xa.RoadTurns,Za.TurnSLongRight,[["Road","TurnSLong"]],ao,[[[-2,0,-2],[1,0,1]],[[-1,0,-5],[2,0,-3]],[[0,0,-8],[3,0,-6]],[[1,0,-10],[4,0,-9]],[[2,0,-14],[5,0,-11]],[[3,0,-5],[3,0,-5]],[[4,0,-8],[4,0,-8]]]),new lo("26bca19e63867bc0b755ff6fcca65de296c9d1f109f87540103565eb88a0e03d",Xa.RoadTurns,Za.TurnShortLeftWide,[["RoadWide","TurnShortLeftWide"]],ao,[[[-2,0,-1],[1,0,1]],[[-1,0,-2],[1,0,-2]],[[-1,0,-4],[5,0,-3]],[[0,0,-5],[5,0,-5]],[[1,0,-6],[5,0,-6]],[[2,0,-7],[9,0,-7]],[[3,0,-8],[9,0,-8]],[[4,0,-9],[9,0,-9]],[[7,0,-10],[9,0,-10]]]),new lo("e3845854f85dafd8cec193bcbecdac6cb79f625066de29524d5c10c5580611c5",Xa.RoadTurns,Za.TurnShortRightWide,[["RoadWide","TurnShortRightWide"]],ao,[[[-2,0,0],[1,0,1]],[[-2,0,-1],[2,0,-1]],[[-2,0,-2],[3,0,-2]],[[2,0,-6],[5,0,-3]]]),new lo("dc6088960a65a55c74353a1e7c8a1ca8ec99e683f6273bf666d6909b288bb84b",Xa.RoadTurns,Za.TurnLongLeftWide,[["RoadWide","TurnLongLeftWide"]],ao,[[[-2,0,-2],[1,0,1]],[[-1,0,-5],[1,0,-3]],[[0,0,-6],[1,0,-6]],[[0,0,-7],[5,0,-7]],[[1,0,-8],[5,0,-8]],[[2,0,-9],[5,0,-9]],[[3,0,-10],[5,0,-10]],[[4,0,-11],[13,0,-11]],[[5,0,-12],[13,0,-12]],[[7,0,-13],[13,0,-13]],[[10,0,-14],[13,0,-14]]]),new lo("0bbb8d6c1e4a325e10643cf45546da725c1ea18e92a3a95f753339629a06ef6c",Xa.RoadTurns,Za.TurnLongRightWide,[["RoadWide","TurnLongRightWide"]],ao,[[[-2,0,-1],[1,0,1]],[[-2,0,-3],[2,0,-2]],[[-2,0,-4],[3,0,-4]],[[-2,0,-5],[4,0,-5]],[[-2,0,-6],[6,0,-6]],[[2,0,-10],[9,0,-7]]]),new lo("3d4972c41e0e1c39b31b98c8b4ba3377477c4370fbd32cbf5a92c88b46fb7614",Xa.RoadTurns,Za.TurnShortTilted,[["Road","TurnShortTilted"]],ao,[[[-2,1,0],[0,1,1]],[[-1,1,-2],[0,1,-1]],[[0,0,-2],[2,0,-1]],[[0,0,0],[1,0,1]],[[0,1,-4],[2,1,-3]],[[1,0,-3],[5,0,-3]],[[1,1,-2],[1,1,-2]],[[2,0,-4],[5,0,-4]],[[2,1,-5],[5,1,-5]],[[3,0,-2],[3,0,-2]],[[3,1,-4],[5,1,-4]],[[4,1,-6],[5,1,-6]]]),new lo("5d48577ff2562e2abfe287bc0519dd0de692f3665e5596b3ef629069a59a21ab",Xa.RoadTurns,Za.TurnLongTilted,[["Road","TurnLongTilted"]],ao,[[[-2,1,0],[0,1,1]],[[-1,1,-3],[0,1,-1]],[[0,0,-3],[2,0,-2]],[[0,0,-1],[1,0,1]],[[0,1,-5],[2,1,-4]],[[1,0,-4],[3,0,-4]],[[1,1,-6],[4,1,-6]],[[1,1,-3],[1,1,-3]],[[2,0,-5],[4,0,-5]],[[2,1,-7],[5,1,-7]],[[3,0,-6],[6,0,-6]],[[3,1,-8],[9,1,-8]],[[4,0,-7],[9,0,-7]],[[5,0,-8],[9,0,-8]],[[5,1,-9],[9,1,-9]],[[8,1,-10],[9,1,-10]]]),new lo("abf9d95b8b0bf58bf4fe8df599e4ccee1b527c7c63f15636374742c1ebc2b93a",Xa.RoadTurns,Za.TurnLong2Tilted,[["Road","TurnLong2Tilted"]],ao,[[[-2,1,-1],[0,1,1]],[[-1,1,-4],[0,1,-2]],[[0,0,-3],[1,0,1]],[[0,1,-6],[1,1,-5]],[[1,0,-5],[2,0,-4]],[[1,1,-8],[3,1,-7]],[[1,1,-4],[1,1,-4]],[[2,0,-7],[4,0,-6]],[[2,0,-3],[2,0,-3]],[[2,1,-9],[5,1,-9]],[[2,1,-6],[2,1,-6]],[[3,0,-8],[6,0,-8]],[[3,0,-5],[3,0,-5]],[[3,1,-10],[6,1,-10]],[[4,0,-9],[7,0,-9]],[[4,1,-11],[8,1,-11]],[[4,1,-8],[4,1,-8]],[[5,0,-10],[9,0,-10]],[[6,1,-12],[13,1,-12]],[[7,0,-11],[13,0,-11]],[[8,1,-13],[13,1,-13]],[[9,0,-12],[13,0,-12]],[[11,1,-14],[13,1,-14]]]),new lo("f64a25f9f9306a760e247f68ce37404d175462993e146853ce1f1b7ac7353bef",Xa.RoadTurns,Za.TurnLong3Tilted,[["Road","TurnLong3Tilted"]],ao,[[[-2,1,-1],[0,1,1]],[[-1,1,-5],[1,1,-4]],[[-1,1,-3],[0,1,-2]],[[0,0,-4],[1,0,1]],[[0,1,-7],[1,1,-6]],[[1,0,-7],[3,0,-6]],[[1,0,-5],[2,0,-5]],[[1,1,-9],[3,1,-8]],[[2,0,-8],[4,0,-8]],[[2,0,-4],[2,0,-4]],[[2,1,-10],[4,1,-10]],[[2,1,-7],[2,1,-7]],[[3,0,-10],[5,0,-9]],[[3,1,-12],[5,1,-11]],[[4,0,-11],[7,0,-11]],[[4,1,-13],[8,1,-13]],[[5,0,-12],[8,0,-12]],[[6,0,-13],[10,0,-13]],[[6,0,-10],[6,0,-10]],[[6,1,-14],[9,1,-14]],[[6,1,-12],[6,1,-12]],[[7,1,-15],[11,1,-15]],[[8,0,-14],[12,0,-14]],[[9,0,-15],[17,0,-15]],[[9,1,-16],[17,1,-16]],[[11,1,-17],[17,1,-17]],[[12,0,-16],[17,0,-16]],[[15,1,-18],[17,1,-18]]]),new lo("2af8aa6050028dd6ee69b7150e83a6d8819e1848a7b1c782848d3f6448c5091a",Xa.RoadWide,Za.ToWideMiddle,[["RoadWide","ToWideMiddle"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("26341cfe6bec34f46b10ffcd9a7706a8156b9ac41ed2cdfd166f9f8d3e9bc8f3",Xa.RoadWide,Za.ToWideLeft,[["RoadWide","ToWideSide",{flipX:!0}]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("3f82ebd6c72110b532a20673f8b54c7b25ae5988a51d3793bf383fea8ffcffc3",Xa.RoadWide,Za.ToWideRight,[["RoadWide","ToWideSide"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("f5cecce9870f41f8cba7a9fbe631c315370a7a82824d04977ec857dbb1dfed29",Xa.RoadWide,Za.ToWideDouble,[["RoadWide","ToWideDouble"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("99dc726611397f81b47459d32c7bfb8232322d1ca976ba9a3e71cc15451d8cfb",Xa.RoadWide,Za.ToWideDiagonal,[["RoadWide","ToWideDiagonal"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("47d7e3fb334681911e122babef127881a36a763fb22176854114495802d5ce84",Xa.RoadWide,Za.StraightWide,[["RoadWide","StraightWide"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("521adc95ed5a4809eeff7eec872c3d6449e4d6a7e4941d672f1e06a50a6615de",Xa.RoadWide,Za.InnerCornerWide,[["RoadWide","InnerCornerWide"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("d82274b362794e3c1772510002d5015dde345f1e72dd675c8bac41cf2331398b",Xa.RoadWide,Za.OuterCornerWide,[["RoadWide","OuterCornerWide"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("8c2541fab7e5e930b9280b3ef1e5bfc3092c17901c87457515df577f625c4303",Xa.RoadWide,Za.SlopeUpLeftWide,[["RoadWide","SlopeUpWide",{flipX:!0}]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[1,1,-2]]]),new lo("6c908d749b8150b47d96c2d0c493ed8bf125035a250025fbe94b6078503bcfce",Xa.RoadWide,Za.SlopeUpRightWide,[["RoadWide","SlopeUpWide"]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[1,1,-2]]]),new lo("676c22b45763bd86c8bb8d34a2fa7a38abde40618892742de598d866b4925b42",Xa.RoadWide,Za.SlopeUpLongLeftWide,[["RoadWide","SlopeUpLongWide",{flipX:!0}]],ao,[[[-2,0,-4],[1,0,1]],[[-2,1,-5],[1,1,-4]],[[-2,1,-6],[1,2,-6]]]),new lo("e783f085e8ec313dcd1bbb0849fe5e669ccbb075baac4d289fd442a9cd4ba562",Xa.RoadWide,Za.SlopeUpLongRightWide,[["RoadWide","SlopeUpLongWide"]],ao,[[[-2,0,-4],[1,0,1]],[[-2,1,-5],[1,1,-4]],[[-2,1,-6],[1,2,-6]]]),new lo("4229bf84ab08f86a24d24b610a8225885f3cb68726ef74f4b314d7705c9eb2da",Xa.RoadWide,Za.SlopeDownLeftWide,[["RoadWide","SlopeDownWide",{flipX:!0}]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,0],[1,1,1]]]),new lo("a141744b0ffb4df202f230f1f97443f4198032aacf94e7259b7b0127df6bd838",Xa.RoadWide,Za.SlopeDownRightWide,[["RoadWide","SlopeDownWide"]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,0],[1,1,1]]]),new lo("0fd78ec94545d4f7c41515ab7dafafb331b146118e3a14835fb6e6c9cb12e4af",Xa.RoadWide,Za.SlopeDownLongLeftWide,[["RoadWide","SlopeDownLongWide",{flipX:!0}]],ao,[[[-2,0,-2],[1,0,0]],[[-2,1,-1],[1,1,5]],[[-2,2,3],[1,2,5]]]),new lo("997f1fd3e53bc438066f32e6ea33300a8371b297c7d74f4c25f48f3370fd5752",Xa.RoadWide,Za.SlopeDownLongRightWide,[["RoadWide","SlopeDownLongWide"]],ao,[[[-2,0,-2],[1,0,0]],[[-2,1,-1],[1,1,5]],[[-2,2,3],[1,2,5]]]),new lo("bde16df3b12aab766167803dc302428bc8d3a4f95efcdeb8660b773e00e6ecb0",Xa.RoadWide,Za.SlopeLeftWide,[["RoadWide","SlopeWide",{flipX:!0}]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,2,-2]]]),new lo("1524c4b16a08292aa84fbe0f0369d09453e75061fc39a9a0503e6caf4843a301",Xa.RoadWide,Za.SlopeRightWide,[["RoadWide","SlopeWide"]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,2,-2]]]),new lo("b598ff14bda99600434b24a619132fec4bffcc535483b9b57b0c8c09c1be1f1b",Xa.RoadWide,Za.SlopeUpVerticalLeftWide,[["RoadWide","SlopeUpVerticalWide"]],ao,[[[-2,0,-1],[1,0,1]],[[-2,1,-1],[1,1,-1]],[[-2,1,-2],[1,3,-2]]]),new lo("4e0275d3a01eaca6ec5118b8b816ed292cb7172710cf9b7801068424ab684b22",Xa.RoadWide,Za.SlopeUpVerticalRightWide,[["RoadWide","SlopeUpVerticalWide",{flipX:!0}]],ao,[[[-2,0,-1],[1,0,1]],[[-2,1,-1],[1,1,-1]],[[-2,1,-2],[1,3,-2]]]),new lo("feff879bfa80db0dc58d93fe8e34ca793aa508002df55a27cba2d99cfefa4691",Xa.RoadWide,Za.SlopeToVerticalLeftWide,[["RoadWide","SlopeToVerticalWide",{flipX:!0}]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,3,-2]],[[-2,2,-1],[-2,2,-1]]]),new lo("88a9c7425f1e5b287ce571f744348a4a330409fced83f13b5a1c7e8e51e9ead4",Xa.RoadWide,Za.SlopeToVerticalRightWide,[["RoadWide","SlopeToVerticalWide"]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,3,-2]],[[1,2,-1],[1,2,-1]]]),new lo("896b47675cc2ff58494979168f6fd36c27c43da29aed6a52fdf80f054630166a",Xa.Plane,Za.Plane,[["Planes","Plane"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("dc9afb98a8bb998d3b76c3563385e58c1749e56ff43fbc7577b1f57ba8360702",Xa.Plane,Za.PlanePillarBottom,[["Planes","Plane"],["Pillar","SurfacePillarBottom"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("f59ad95edd26814236ab30b73f6f4f68003885ef150201a4ace14b832abcf438",Xa.Plane,Za.PlanePillarShort,[["Planes","Plane"],["Pillar","SurfacePillarShort"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("48247a66b232461083fa2aa36644e7e8779f5b426d474efd375ee7d21d009c9a",Xa.Plane,Za.HalfPlane,[["Planes","HalfPlane"]],ao,[[[-2,0,1],[1,0,1]],[[-2,0,0],[0,0,0]],[[-2,0,-1],[-1,0,-1]],[[-2,0,-2],[-2,0,-2]]]),new lo("eac8530d1a025291674bf34b206f75700dc8626012d8d33ed398f7aed746dac8",Xa.Plane,Za.QuarterPlane,[["Planes","QuarterPlane"]],ao,[[[-2,0,1],[-2,0,1]],[[-2,0,-1],[-1,0,0]],[[-2,0,-2],[-2,0,-2]]]),new lo("2dda4d3801c9cd4c117dc3c8239bea28cafe70ef2127986c2d6b455744fc8019",Xa.Plane,Za.PlaneSlopeUp,[["Planes","PlaneSlopeUp"]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[1,1,-2]]]),new lo("ff295081bdf76f76ad286007c813d37b5af22b06f337ad8fe43cddbd221255b4",Xa.Plane,Za.PlaneSlopeUpLong,[["Planes","PlaneSlopeUpLong"]],ao,[[[-2,0,-4],[1,0,1]],[[-2,1,-5],[1,1,-4]],[[-2,1,-6],[1,2,-6]]]),new lo("f1ac897525aa3fcae4fb678ca681bf559d993517b5f4f323b25789b64fe3f477",Xa.Plane,Za.PlaneSlopeDown,[["Planes","PlaneSlopeDown"]],ao,[[[-2,0,-2],[1,0,1]],[[-2,1,0],[1,1,1]]]),new lo("549dbef42b80ca6cfa7eecb1397918b2fc9ccd15ceb1c494c41944b8a0d50d7b",Xa.Plane,Za.PlaneSlopeDownLong,[["Planes","PlaneSlopeDownLong"]],ao,[[[-2,0,-2],[1,0,0]],[[-2,1,-1],[1,1,5]],[[-2,2,3],[1,2,5]]]),new lo("2e9a2af92aea4a70361adba95230f3126911aa357299c0fe6c1e0611945961c0",Xa.Plane,Za.PlaneSlope,[["Planes","PlaneSlope"]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,2,-2]]]),new lo("76408f7250687477995d65c39e60554466c6b96376d2ff0c9c9c497e1ee823bf",Xa.Plane,Za.HalfPlaneSlopeBottomLeft,[["Planes","HalfPlaneSlopeBottom"]],ao,[[[-2,0,0],[0,0,1]],[[-2,1,-2],[-2,1,0]],[[-2,2,-2],[-2,2,-2]],[[-1,1,-1],[-1,1,0]],[[0,1,0],[0,1,0]],[[1,0,1],[1,0,1]]]),new lo("bb77b8de31e4d193112947bb0c3d9d62985b10d8982acaaf58df54d483863873",Xa.Plane,Za.HalfPlaneSlopeBottomRight,[["Planes","HalfPlaneSlopeBottom",{flipX:!0}]],ao,[[[-2,0,1],[1,0,1]],[[-1,0,0],[1,1,0]],[[0,1,-1],[1,1,-1]],[[1,1,-2],[1,2,-2]]]),new lo("6984589cd1276691a8c2161fec8205194ea7545c8962b3f61f672ec02cf534f9",Xa.Plane,Za.HalfPlaneSlopeTopLeft,[["Planes","HalfPlaneSlopeTop",{flipX:!0}]],ao,[[[-2,0,0],[-1,1,0]],[[-2,0,1],[-2,0,1]],[[-2,1,-2],[0,1,-1]],[[-2,2,-2],[1,2,-2]],[[1,1,-2],[1,1,-2]]]),new lo("992d36738e4882dd1da1ca3c2a396c79ae7fcb2ba47649de7cb0f888f18e04b3",Xa.Plane,Za.HalfPlaneSlopeTopRight,[["Planes","HalfPlaneSlopeTop"]],ao,[[[-2,1,-2],[1,2,-2]],[[-1,1,-1],[1,1,-1]],[[0,0,0],[1,1,0]],[[1,0,1],[1,0,1]]]),new lo("ba0d6ec33647740bf4c60e542d1758095afa3ef451bdaec76c783dd32116e4cb",Xa.Plane,Za.PlaneSlopeVerticalBottom,[["Planes","PlaneSlopeVertical"]],ao,[[[-2,0,-1],[1,0,1]],[[-2,1,-1],[1,1,-1]],[[-2,1,-2],[1,3,-2]]]),new lo("6f750b74664474a57a22f22b4f8b7f2fef330eb00f9041385ec0acfbc2b09302",Xa.Plane,Za.PlaneSlopeToVertical,[["Planes","PlaneSlopeToVertical"]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,3,-2]]]),new lo("5f6d1ece085d450643f1399af53673dcc6bbbf413094d8dd5ee6816d80e1c8ae",Xa.Plane,Za.PlaneBridge,[["Planes","PlaneBridge"]],ao,[[[-1,0,-2],[0,0,1]]]),new lo("32b91fc4cdf95f5b7a490d81058522bae14741601dd44c73cc110121aa1dd6e6",Xa.Plane,Za.PlaneBridgeCorner,[["Planes","PlaneBridgeCorner"]],ao,[[[-1,0,-1],[0,0,1]],[[1,0,-1],[1,0,0]]]),new lo("2db870b1821fb655437bd0527569d5a6843718fa0775682701437432265a1a88",Xa.Plane,Za.PlaneBridgeIntersectionT,[["Planes","PlaneBridgeIntersectionT"]],ao,[[[-1,0,-1],[0,0,1]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]]]),new lo("33aa0e7524b74dcdae4aed89856c09d25248c4cab8f70dcc31b347f0a00fcb52",Xa.Plane,Za.PlaneBridgeIntersectionCross,[["Planes","PlaneBridgeIntersectionCross"]],ao,[[[-1,0,-1],[0,0,1]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]],[[-1,0,-2],[0,0,-2]]]),new lo("bd7cc4ab180fc0a6936fef828ae3a91566b3dd621b888fbcc57c9ac11dcb713b",Xa.Plane,Za.PlaneWall,[["Planes","PlaneWall"]],ao,[[[-2,0,1],[1,0,1]]]),new lo("d92568164028bb2e65799abd9dc6ba66cfe8a28515c09fbe5ac175f5966af66a",Xa.Plane,Za.PlaneWallCorner,[["Planes","PlaneWallCorner"]],ao,[[[-2,0,1],[1,0,1]],[[1,0,-2],[1,0,0]]]),new lo("792ab5a6f0e2bf8e556575ef12731ec30755855d4394f98eb4ca7ec8b713933c",Xa.Plane,Za.PlaneWallInnerCorner,[["Planes","PlaneWallInnerCorner"]],ao,[[[1,0,1],[1,0,1]]]),new lo("9f1a6ce37a3b0601346f4d30d8a81075c8eefd3d873cbb24fbe5cf6d5da3093f",Xa.Plane,Za.PlaneWallSlopeLeft,[["Planes","PlaneWallSlope"]],ao,[[[1,0,0],[1,1,1]],[[1,1,-2],[1,2,-1]]]),new lo("0a28443c2fc0e51527b4d3a5a0d98302fc368839b614db5c7d90f151a97c7542",Xa.Plane,Za.PlaneWallSlopeRight,[["Planes","PlaneWallSlope",{flipX:!0}]],ao,[[[-2,0,0],[-2,1,1]],[[-2,1,-2],[-2,2,-1]]]),new lo("b55dca4b19a0f61db43849e444eaa1d9289519ef7e5a4b6e02c7c02ba80f84f4",Xa.Plane,Za.PlaneWallSlopeUpLeft,[["Planes","PlaneWallSlopeUp"]],ao,[[[1,0,-2],[1,1,1]]]),new lo("70c5288fe8e74957d820cc34995566ad26478e00e5314e36e836e0f803b38061",Xa.Plane,Za.PlaneWallSlopeUpRight,[["Planes","PlaneWallSlopeUp",{flipX:!0}]],ao,[[[-2,0,-2],[-2,1,1]]]),new lo("9b16670e084f2e054c61f253abb7b24e29e0b11800de23b9a2877f17c33dd4a9",Xa.Plane,Za.PlaneWallSlopeDownLeft,[["Planes","PlaneWallSlopeDown"]],ao,[[[1,0,-2],[1,1,1]]]),new lo("bf441ad2d47b48000b7535e2dd39c209257f2614363494827200330dfea97e11",Xa.Plane,Za.PlaneWallSlopeDownRight,[["Planes","PlaneWallSlopeDown",{flipX:!0}]],ao,[[[-2,0,-2],[-2,1,1]]]),new lo("8d561c6d1e116c92c5f9ecb9715e57b510dfd38d8e4ba2183429d28238c6ac83",Xa.Plane,Za.PlaneWallSlopeUpLongLeft,[["Planes","PlaneWallSlopeUpLong"]],ao,[[[1,0,-4],[1,1,1]],[[1,1,-6],[1,2,-5]],[[1,2,-4],[1,2,-4]]]),new lo("ab013301c7b3b91cf48ae1a8d47842f85ac688677cc14e0baa3b3a5a3ce0bb3b",Xa.Plane,Za.PlaneWallSlopeUpLongRight,[["Planes","PlaneWallSlopeUpLong",{flipX:!0}]],ao,[[[-2,0,-4],[-2,1,1]],[[-2,1,-6],[-2,2,-5]],[[-2,2,-4],[-2,2,-4]]]),new lo("79fc30fd9032052b23a30f03fde4e4932b4a3a6a57c1e2b64631fb5d6c5f1052",Xa.Plane,Za.PlaneWallSlopeDownLongLeft,[["Planes","PlaneWallSlopeDownLong"]],ao,[[[1,0,-2],[1,1,0]],[[1,1,1],[1,2,5]],[[1,2,0],[1,2,0]]]),new lo("5aeda192c725700634faf36a401b9bf0b4df869b311da546080569f66c741a66",Xa.Plane,Za.PlaneWallSlopeDownLongRight,[["Planes","PlaneWallSlopeDownLong",{flipX:!0}]],ao,[[[-2,0,-2],[-2,1,0]],[[-2,1,1],[-2,2,5]],[[-2,2,0],[-2,2,0]]]),new lo("de0d588c4b2fe6b32d72a7e0e2984285955f805ccb86d3c269f7155401cd6b20",Xa.Block,Za.Block,[["Blocks","Block"]],oo,[[[-2,0,-2],[1,0,1]]]),new lo("1ce6b585c0e99d71877fefe015ff16336ae62eb0caebeca62dd09d836092d7b6",Xa.Block,Za.HalfBlock,[["Blocks","HalfBlock"]],oo,[[[-2,0,1],[1,0,1]],[[-2,0,0],[0,0,0]],[[-2,0,-1],[-1,0,-1]],[[-2,0,-2],[-2,0,-2]]]),new lo("0d5f0609c3c98f687d55d3a73313225c1642f6285ddaca3ed536db742c85958d",Xa.Block,Za.QuarterBlock,[["Blocks","QuarterBlock"]],oo,[[[-2,0,1],[-2,0,1]],[[-2,0,-1],[-1,0,0]],[[-2,0,-2],[-2,0,-2]]]),new lo("18fc1c569c6fc04f95f10174143d19e7a9ea4e387302363f4ae60883c1acd3f0",Xa.Block,Za.BlockSlopedDown,[["Blocks","BlockSlopedDown"]],oo,[[[-2,0,-2],[1,0,-1]],[[-2,1,-2],[1,1,1]]]),new lo("22dd5b2804c88994a4d283cb822f47de3c72f82376e4c9332d39feae85206c0f",Xa.Block,Za.BlockSlopedDownInnerCorner,[["Blocks","BlockSlopedDownInnerCorner"]],oo,[[[-2,0,-2],[-1,0,1]],[[0,0,-2],[1,0,-1]],[[-2,1,-2],[1,1,1]]]),new lo("81a71b4cc6ef8520f20fd738457abc31b04258c97f9862f70190fd2a0ba91382",Xa.Block,Za.BlockSlopedDownOuterCorner,[["Blocks","BlockSlopedDownOuterCorner"]],oo,[[[-2,0,-2],[-1,0,-1]],[[-2,1,-2],[1,1,1]]]),new lo("f4e19d3bc49994a85fecd187b76c21d258e7f30f0506d90bc6f173336e11627d",Xa.Block,Za.BlockSlopedUp,[["Blocks","BlockSlopedUp"]],oo,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[1,1,-1]]]),new lo("fd9309468e97131bbbd1404fac34a7137cb176327789b955c1aea30267e1cded",Xa.Block,Za.BlockSlopedUpInnerCorner,[["Blocks","BlockSlopedUpInnerCorner"]],oo,[[[-2,1,-2],[-1,1,1]],[[0,1,-2],[1,1,-1]],[[-2,0,-2],[1,0,1]]]),new lo("1321fb07ece1b80b99dc4671b52673ac028fbf43322e9e652ad633ff6afac21b",Xa.Block,Za.BlockSlopedUpOuterCorner,[["Blocks","BlockSlopedUpOuterCorner"]],oo,[[[-2,1,-2],[-1,1,-1]],[[-2,0,-2],[1,0,1]]]),new lo("84d11f91b9410afafd2801d85bcfd87f9390272180e3f49ab77d108e328dbd1d",Xa.Block,Za.HalfBlockSlopeBottomLeft,[["Blocks","HalfBlockSlopeBottom"]],ao,[[[-2,0,-2],[-2,0,1]],[[-2,1,-2],[-2,1,-1]],[[-1,0,-1],[-1,0,1]],[[-1,1,-1],[-1,1,-1]],[[0,0,0],[0,0,1]],[[1,0,1],[1,0,1]]]),new lo("84d77134750b28ec4d4e66d37052a5d83cd97e18144e1b849155976d35418d3b",Xa.Block,Za.HalfBlockSlopeBottomRight,[["Blocks","HalfBlockSlopeBottom",{flipX:!0}]],ao,[[[-2,0,1],[1,0,1]],[[-1,0,0],[1,0,0]],[[0,0,-1],[1,1,-1]],[[1,0,-2],[1,1,-2]]]),new lo("185b3f1a8ed7f7b1eb8da5e6911a181560a3dab738e59f01cb54af58391eb223",Xa.Block,Za.HalfBlockSlopeTopLeft,[["Blocks","HalfBlockSlopeTop",{flipX:!0}]],ao,[[[-2,0,-2],[0,1,-1]],[[-2,0,0],[-1,0,0]],[[-2,0,1],[-2,0,1]],[[1,0,-2],[1,1,-2]]]),new lo("813b1bbe0eebb47629848d50e815cd28760b3e6c56e549a4a53faea4b33726ab",Xa.Block,Za.HalfBlockSlopeTopRight,[["Blocks","HalfBlockSlopeTop"]],ao,[[[-2,0,-2],[1,1,-2]],[[-1,0,-1],[1,1,-1]],[[0,0,0],[1,0,0]],[[1,0,1],[1,0,1]]]),new lo("b97c17388fc38139f2f5a98a36d94831095f79db709dd97748ad2904bc54d689",Xa.Block,Za.BlockSlopeDown,[["Blocks","BlockSlopeDown"]],oo,[[[-2,0,-2],[1,0,1]]]),new lo("50276826bbfb9fcb11a8519b8dae8a2b1cf82817d5431418d9a376664261be82",Xa.Block,Za.BlockSlopeUp,[["Blocks","BlockSlopeUp"]],oo,[[[-2,0,-2],[1,0,1]]]),new lo("63fd3032796397f8e25669c1c1d3fc97b8ec0e5fc88bfcb5c00a2a2c2b517888",Xa.Block,Za.BlockSlopeDownLong,[["Blocks","BlockSlopeDownLong"]],oo,[[[-2,0,-2],[1,0,5]],[[-2,1,0],[1,1,5]]]),new lo("2d29131222a8d891b4350e6a2f335b114e001cf22e4e2f170dc9b86c4b2fd325",Xa.Block,Za.BlockSlopeUpLong,[["Blocks","BlockSlopeUpLong"]],oo,[[[-2,0,-6],[1,0,1]],[[-2,1,-6],[1,1,-4]]]),new lo("0bbcd96c91b69e6e8005bfae5b64455b0d6510cb1595f3fca7f77c86ddda4560",Xa.Block,Za.BlockSlopeVerticalTop,[["Blocks","BlockSlopeVertical",{flipY:!0}]],oo,[[[-2,3,-2],[1,3,1]],[[-2,2,-2],[1,2,-1]],[[-2,0,-2],[1,1,-2]]]),new lo("e81a123c0be3f8f168fb584d53e8aa038785569bbf2cd1c1cead2272889591e0",Xa.Block,Za.BlockSlopeVerticalBottom,[["Blocks","BlockSlopeVertical"]],oo,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[1,1,-1]],[[-2,2,-2],[1,3,-2]]]),new lo("39c8bfd9a12ba536f34db14b3ac24afd133f3dd67ecc30f8ab90138a5a545520",Xa.Block,Za.BlockSlopeToVertical,[["Blocks","BlockSlopeToVertical"]],oo,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[1,1,-1]],[[-2,2,-2],[1,3,-2]]]),new lo("3a2f05b1c2c2fd976997fa473f1adb3ba14495701dc5a998f8697798384c6946",Xa.Block,Za.BlockSlopeVerticalCornerTop,[["Blocks","BlockSlopeVerticalCornerBottom",{flipY:!0}]],oo,[[[-2,3,-2],[1,3,1]],[[-2,2,-2],[0,2,0]],[[1,2,-2],[1,2,-1]],[[-2,2,1],[-1,2,1]],[[-2,1,-2],[-1,1,-1]],[[-2,1,0],[-1,1,0]],[[0,1,-2],[0,1,-1]],[[1,1,-2],[1,1,-2]],[[-2,1,1],[-2,1,1]],[[-2,0,-2],[-1,0,-1]],[[-2,0,0],[-2,0,1]],[[0,0,-2],[1,0,-2]]]),new lo("3e4fa43e69aa1dbee584e16451a95a16229bba8d638df2bf6f6c9ffb3a9629c9",Xa.Block,Za.BlockInnerCorner,[["Blocks","BlockInnerCorner"]],oo,[[[-2,0,0],[-2,0,1]],[[-2,0,-2],[-1,0,-1]],[[0,0,-2],[1,0,-2]]]),new lo("cc9c95eef56def4cf013e4ac85b8013a2b4f4b4346f1f5dd41fa017de763ef17",Xa.Block,Za.BlockSlopeVerticalCornerBottom,[["Blocks","BlockSlopeVerticalCornerBottom"]],oo,[[[-2,0,-2],[1,0,1]],[[-2,1,-2],[0,1,0]],[[1,1,-2],[1,1,-1]],[[-2,1,1],[-1,1,1]],[[-2,2,-2],[-1,2,-1]],[[-2,2,0],[-1,2,0]],[[0,2,-2],[0,2,-1]],[[1,2,-2],[1,2,-2]],[[-2,2,1],[-2,2,1]],[[-2,3,-2],[-1,3,-1]],[[-2,3,0],[-2,3,1]],[[0,3,-2],[1,3,-2]]]),new lo("e4c82c8e512d52269cb6588fa34b06c179340ea40e71f74cbadadc7e8353f5a2",Xa.Block,Za.BlockSlopeVerticalInnerCornerTop,[["Blocks","BlockSlopeVerticalInnerCorner",{flipY:!0}]],oo,[[[-2,3,-2],[0,3,1]],[[1,3,-2],[1,3,0]],[[-2,2,-2],[-2,2,-1]],[[-1,2,-2],[-1,2,-2]],[[-2,0,-2],[-2,1,-2]]]),new lo("926fdc6e82ecd709cc535faea6bb8778c6e2e91edb39eb6ae6308076dca2ed18",Xa.Block,Za.BlockSlopeVerticalInnerCornerBottom,[["Blocks","BlockSlopeVerticalInnerCorner"]],oo,[[[-2,0,-2],[0,0,1]],[[1,0,-2],[1,0,0]],[[-2,1,-2],[-2,1,-1]],[[-1,1,-2],[-1,1,-2]],[[-2,2,-2],[-2,3,-2]]]),new lo("1086515ba3c1d8e5ec76b378f0bdbc77fc5a57fc8eba8972f0d5e611be945235",Xa.Block,Za.BlockBridge,[["Blocks","BlockBridge"]],oo,[[[-1,0,-2],[0,0,1]]]),new lo("5426ad4ff64af3f1a0f0794ad30cfc20434dfffdf44d93010f5f98671c246ff3",Xa.Block,Za.BlockBridgeCorner,[["Blocks","BlockBridgeCorner"]],oo,[[[-1,0,-1],[0,0,1]],[[1,0,-1],[1,0,0]]]),new lo("784b9b4459e838e5b8f74f6250769ffa52ec5cc3608abc24c380a2e792c3d338",Xa.Block,Za.BlockBridgeIntersectionT,[["Blocks","BlockBridgeIntersectionT"]],oo,[[[-1,0,-1],[0,0,1]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]]]),new lo("dfbcbc107a3c12217bfa3b224a5757d08e995705d1c122bb2c2665bbb8447b1c",Xa.Block,Za.BlockBridgeIntersectionCross,[["Blocks","BlockBridgeIntersectionCross"]],oo,[[[-1,0,-1],[0,0,1]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]],[[-1,0,-2],[0,0,-2]]]),new lo("a00d7077d07af7f2125d4db731b5b76ca182b65eb90fbe76061e196a7c0b1652",Xa.WallTrack,Za.WallTrackTop,[["WallTrack","WallTrackBottom",{flipY:!0}]],ao,[[[-2,3,-1],[1,3,1]],[[-2,2,-1],[1,2,-1]],[[-2,0,-2],[1,2,-2]]]),new lo("010d187fbfbd399bfe880bbea1b548678c239eba0be2913e5cb8a69fbd17adf7",Xa.WallTrack,Za.WallTrackMiddle,[["WallTrack","WallTrackMiddle"]],ao,[[[-2,0,-2],[1,0,-2]]]),new lo("72934b2ee76e187eee519baf97df49128dc32e3583795f98645774ae5639f443",Xa.WallTrack,Za.WallTrackBottom,[["WallTrack","WallTrackBottom"]],ao,[[[-2,0,-1],[1,0,1]],[[-2,1,-1],[1,1,-1]],[[-2,1,-2],[1,3,-2]]]),new lo("1ff36280441e023bd066dc3c5cdf136bd9a3a0beb9eee0aad048c9a2dfd5eafb",Xa.WallTrack,Za.WallTrackSlopeToVertical,[["WallTrack","WallTrackSlopeToVertical"]],ao,[[[-2,0,0],[1,0,1]],[[-2,1,-2],[1,1,0]],[[-2,2,-2],[1,3,-2]]]),new lo("9c7c099734168051032425b6e228665caa581282ef23db6d1ae8c958f8675531",Xa.WallTrack,Za.WallTrackTopCorner,[["WallTrack","WallTrackBottomCorner",{flipY:!0}]],ao,[[[-2,0,-1],[-2,0,1]],[[-1,0,-1],[-1,0,-1]],[[-1,0,-2],[1,0,-2]],[[-2,1,-1],[-2,1,1]],[[-1,1,-1],[-1,1,0]],[[0,1,-1],[0,1,-1]],[[-1,1,-2],[1,1,-2]],[[-2,2,0],[-2,2,1]],[[-1,2,1],[-1,2,1]],[[-1,2,-1],[0,2,0]],[[1,2,-1],[1,2,-1]],[[0,2,-2],[1,2,-2]],[[0,3,-1],[1,3,1]],[[-1,3,0],[-1,3,1]]]),new lo("4027a2439cc3e42ceda50ff3d427a31e127b25a6457b55edc2d498b474a296a7",Xa.WallTrack,Za.WallTrackMiddleCorner,[["WallTrack","WallTrackMiddleCorner"]],ao,[[[-2,0,-1],[-2,0,1]],[[-1,0,-1],[-1,0,-1]],[[-1,0,-2],[1,0,-2]]]),new lo("32c0ec55a47f619e277cb9efec3dd1b54792e7ea78c370f1e3102b7ba4ed2928",Xa.WallTrack,Za.WallTrackBottomCorner,[["WallTrack","WallTrackBottomCorner"]],ao,[[[-2,3,-1],[-2,3,1]],[[-1,3,-1],[-1,3,-1]],[[-1,3,-2],[1,3,-2]],[[-2,2,-1],[-2,2,1]],[[-1,2,-1],[-1,2,0]],[[0,2,-1],[0,2,-1]],[[-1,2,-2],[1,2,-2]],[[-2,1,0],[-2,1,1]],[[-1,1,1],[-1,1,1]],[[-1,1,-1],[0,1,0]],[[1,1,-1],[1,1,-1]],[[0,1,-2],[1,1,-2]],[[0,0,-1],[1,0,1]],[[-1,0,0],[-1,0,1]]]),new lo("786b8ff7fcb72c67e7b887a78fa7b823c48575ae1e4d3b48ae13620646ac34a7",Xa.WallTrack,Za.WallTrackTopInnerCorner,[["WallTrack","WallTrackBottomInnerCorner",{flipY:!0}]],ao,[[[-2,3,-1],[1,3,1]],[[-1,3,-2],[1,3,-2]],[[-2,2,-2],[-1,2,-1]],[[-2,0,-2],[-2,1,-2]]]),new lo("16c9c8ece47c097f60cfc7f8a2daa2f0e7ad0befb0ebfd185402013fd1ec8e0f",Xa.WallTrack,Za.WallTrackInnerCorner,[["WallTrack","WallTrackInnerCorner"]],ao,[[[-2,0,-2],[-2,0,-2]]]),new lo("413dcb45de9fdaf4fe8b78804feaa80891053063a5c432c09b50c24201166572",Xa.WallTrack,Za.WallTrackBottomInnerCorner,[["WallTrack","WallTrackBottomInnerCorner"]],ao,[[[-2,0,-1],[1,0,1]],[[-1,0,-2],[1,0,-2]],[[-2,1,-2],[-1,1,-1]],[[-2,2,-2],[-2,3,-2]]]),new lo("8b7023471502607ef19109760bee3b954ea3b3883c32f3960f75c6651c912ffd",Xa.WallTrack,Za.WallTrackFloor,[["WallTrack","WallTrackFloor"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("59e7f31827236c71db8b16f3f1f259c4c82c87a37e4d57a5a097c0d527d128f3",Xa.WallTrack,Za.WallTrackFloorCorner,[["WallTrack","WallTrackFloorCorner"]],ao,[[[-2,0,1],[1,0,1]],[[0,0,0],[1,0,0]],[[1,0,-2],[1,0,-1]]]),new lo("d58e3805b550b70940c845a807086865b21a4c36da74ffddedcfe5ce2d08e093",Xa.WallTrack,Za.WallTrackFloorPlaneCorner,[["WallTrack","WallTrackFloorPlaneCorner"]],ao,[[[-2,0,1],[1,0,1]],[[0,0,0],[1,0,0]],[[1,0,-2],[1,0,-1]]]),new lo("a56b0c1cf964b213a38167cbbac6f33acd403978ad75746eb51bcfd8c6a36148",Xa.WallTrack,Za.WallTrackCeiling,[["WallTrack","WallTrackCeiling"]],ao,[[[-2,0,-2],[1,0,1]]]),new lo("f87b592d02120312e8e93d8a27c02dcda1095ac2f09879c6efafb2ca2b49d127",Xa.WallTrack,Za.WallTrackCeilingCorner,[["WallTrack","WallTrackCeilingCorner"]],ao,[[[-2,0,1],[1,0,1]],[[0,0,0],[1,0,0]],[[1,0,-2],[1,0,-1]]]),new lo("cfce1fe50f8cd26393eadd475783830e02f0b39bad4c0e00f7aa69614b22decc",Xa.WallTrack,Za.WallTrackCeilingPlaneCorner,[["WallTrack","WallTrackCeilingPlaneCorner"]],ao,[[[-2,0,1],[1,0,1]],[[0,0,0],[1,0,0]],[[1,0,-2],[1,0,-1]]]),new lo("19656d02145f1a4ba07dbf2f236f865d34c86f823741b247b5d444a36d61c316",Xa.Pillar,Za.PillarTop,[["Pillar","PillarTop"]],ao,[[[-1,0,-1],[0,0,0]]]),new lo("dde596d55ffc00f0f00d361667239d9f71c414f03304fecb6a7d11f6f5e702f1",Xa.Pillar,Za.PillarMiddle,[["Pillar","PillarMiddle"]],ao,[[[-1,0,-1],[0,0,0]]]),new lo("dced5202d9373f9dd81a39530a87a1a7036c93ae71604a4e26c3a191abf3c197",Xa.Pillar,Za.PillarBottom,[["Pillar","PillarBottom"]],ao,[[[-1,0,-1],[0,0,0]]]),new lo("af83eebf50c302880377e4f8c1fb3b2ef96ae193e8d03c17e1fd77c73a847e63",Xa.Pillar,Za.PillarShort,[["Pillar","PillarShort"]],ao,[[[-1,0,-1],[0,0,0]]]),new lo("bad7c003302fe84912a2f36551fc9751220ebe6e747791a8df205dca9ae31cc0",Xa.Pillar,Za.PillarTopSlope,[["Pillar","PillarTopSlope"]],ao,[[[-1,0,-1],[0,0,0]],[[-1,1,-1],[0,1,-1]]]),new lo("9f34b2cd553c88364c36923d7ae5e606253865e0684f575e0538670b6116ac5a",Xa.Pillar,Za.PillarShortSlope,[["Pillar","PillarShortSlope"]],ao,[[[-1,0,-1],[0,0,0]],[[-1,1,-1],[0,1,-1]]]),new lo("25b41116fb04b1f3cdd3119f57e0000a6ea8cb12d435718ffd6bb765866c272f",Xa.Pillar,Za.PillarBranch1,[["Pillar","PillarBranch1"]],ao,[[[-1,0,-2],[0,0,0]]]),new lo("05ae39aea4f1ddd818fa57860e688c9cb875544f9b82eafe58a2eb9c19d8d91d",Xa.Pillar,Za.PillarBranch1Top,[["Pillar","PillarBranch1Top"]],ao,[[[-1,0,-2],[0,0,0]]]),new lo("06c29d92e42e0c32050af98d69eecc94ce15adf8ac81dbe53dfb577a83265f4e",Xa.Pillar,Za.PillarBranch1Middle,[["Pillar","PillarBranch1Middle"]],ao,[[[-1,0,-2],[0,0,0]]]),new lo("4a989027e0bd6db264f092bac729d9d450e012a710ea28d199f7ff52efd70fbd",Xa.Pillar,Za.PillarBranch1Bottom,[["Pillar","PillarBranch1Bottom"]],ao,[[[-1,0,-2],[0,0,0]]]),new lo("78b2ff83ad71e7f3d692abc35923fa20c2ae14c01e37d44ec430746ca1bac992",Xa.Pillar,Za.PillarBranch2,[["Pillar","PillarBranch2"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]]]),new lo("b22c93bc73ec2da9dbff218da1676d7436527ed284e264f37294e48ef1307301",Xa.Pillar,Za.PillarBranch2Top,[["Pillar","PillarBranch2Top"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]]]),new lo("79a456a8fa3da24bec6c033f6c736fa1c728745f9624ae78ca20b6a4a76afae8",Xa.Pillar,Za.PillarBranch2Middle,[["Pillar","PillarBranch2Middle"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]]]),new lo("3b81b3f965cbc9fda4fe09e830ba25f1b96ce512d87b0146a1192a6cd0d07335",Xa.Pillar,Za.PillarBranch2Bottom,[["Pillar","PillarBranch2Bottom"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]]]),new lo("27727678bbcac9d3b0172b165ca5c92b10f4b4584a3a18fef4c542f3e791f26f",Xa.Pillar,Za.PillarBranch3,[["Pillar","PillarBranch3"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]]]),new lo("50c7ac511d30ab9e065c928b776652f038be7683d948082bbefc419ee049e505",Xa.Pillar,Za.PillarBranch3Top,[["Pillar","PillarBranch3Top"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]]]),new lo("98b3bfe99e7132825f5aa93122e4e5fdec46eb2877c8eb91fa2648f709527b60",Xa.Pillar,Za.PillarBranch3Middle,[["Pillar","PillarBranch3Middle"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]]]),new lo("7326bbb558f8bcc28d5875c43b1b8e3646caadb873a14fde3ab517f779aea345",Xa.Pillar,Za.PillarBranch3Bottom,[["Pillar","PillarBranch3Bottom"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]]]),new lo("0e23c2615cfdb350bb3a700b6169589265a1d1079f61294fb497b8f80191d523",Xa.Pillar,Za.PillarBranch4,[["Pillar","PillarBranch4"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]],[[-1,0,1],[0,0,1]]]),new lo("e62b55e111dbcb3faefed0a203eac5b55051a2b11911946660310e3df3588da3",Xa.Pillar,Za.PillarBranch4Top,[["Pillar","PillarBranch4Top"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]],[[-1,0,1],[0,0,1]]]),new lo("4e2cfb89c1c591803a1440532a74c3ace37ec7fe78a526c1b57f6679c620df2e",Xa.Pillar,Za.PillarBranch4Middle,[["Pillar","PillarBranch4Middle"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]],[[-1,0,1],[0,0,1]]]),new lo("e7807350788e4570c8bb74d4a635639ef731d83e52922fac5bc10f415f73f794",Xa.Pillar,Za.PillarBranch4Bottom,[["Pillar","PillarBranch4Bottom"]],ao,[[[-1,0,-2],[0,0,0]],[[1,0,-1],[1,0,0]],[[-2,0,-1],[-2,0,0]],[[-1,0,1],[0,0,1]]]),new lo("836bfd12791bfebd99aba70531da4c9bd6e332d16c1e120a8888ea54f59456f9",Xa.Pillar,Za.PillarBranch5,[["Pillar","PillarBranch5"]],ao,[[[-2,0,-1],[1,0,0]]]),new lo("ab85228116faf9ae7b1e6cb4a03530cbec808df3d3c1d7883eb41eb7cfe231d7",Xa.Pillar,Za.PillarBranch5Top,[["Pillar","PillarBranch5Top"]],ao,[[[-2,0,-1],[1,0,0]]]),new lo("db93d5cea4e523fd67a56f8d928084ab6355331a8e5d1899115c1841866006bb",Xa.Pillar,Za.PillarBranch5Middle,[["Pillar","PillarBranch5Middle"]],ao,[[[-2,0,-1],[1,0,0]]]),new lo("dd793efa234159e3a0ff28b064ecb715e6c8bb76e06acfe4bd0d9a2f2b9bba88",Xa.Pillar,Za.PillarBranch5Bottom,[["Pillar","PillarBranch5Bottom"]],ao,[[[-2,0,-1],[1,0,0]]]),new lo("350f7d3591ffd0b2cfb8204d1c6cd0022fd3bda81ea7e950fce3abea7ec89e1a",Xa.Sign,Za.SignArrowLeft,[["Signs","SignArrowRight",{flipX:!0}]],ao,[[[-2,0,-2],[1,0,-2]]]),new lo("22e104e58bba0a609d379578e391ce50ca523c9eee1c3fddebb6d1bb2246a0b9",Xa.Sign,Za.SignArrowRight,[["Signs","SignArrowRight"]],ao,[[[-2,0,-2],[1,0,-2]]]),new lo("acba0cfe380e625285b973e09344e61740e77d6f8cac8691ef3e0a0b0878040e",Xa.Sign,Za.SignArrowUp,[["Signs","SignArrowUp"]],ao,[[[-2,0,-2],[1,0,-2]]]),new lo("8d0dbea0a26bdf3addd372f5d9a2fdecfd776a48f31218acdeb036129b248ca5",Xa.Sign,Za.SignArrowDown,[["Signs","SignArrowUp",{flipY:!0}]],ao,[[[-2,0,-2],[1,0,-2]]]),new lo("e5e1b1ca69d7b230331171be07876c4b1bdebba557c19b18ab17d91eee2771d5",Xa.Sign,Za.SignWarning,[["Signs","SignWarning"]],ao,[[[-2,0,-2],[1,0,-2]]]),new lo("64ed1fba4990a25bc774575ff8835117638d2c3e7c8f41bf0032d219e1083e4c",Xa.Sign,Za.SignWrongWay,[["Signs","SignWrongWay"]],ao,[[[-2,0,-2],[1,0,-2]]])],co=new Map;for(const t of ho){if(co.has(t.id))throw new Error("Duplicate track part id "+t.id.toString());co.set(t.id,t)}function Ao(t){const e=co.get(t);if(null==e)throw new Error("Unknown track part id "+t.toString());return e}const uo=ho.filter((t=>t.detector?.type==to.Checkpoint)).map((t=>t.id)),fo=ho.filter((t=>null!=t.startOffset)).map((t=>t.id));function go(t){if("object"!=typeof t||null==t)return null;if(!("parts"in t)||"object"!=typeof t.parts||null==t.parts)return null;const e=t.parts,i=new Zo(Ha.Summer,new Oa),r=Object.keys(e);for(const t of r){const r=parseInt(t,10);if(!(r in Za))return null;{const t=e[r];if(!Array.isArray(t))return null;if(t.length%4!=0)return null;for(let e=0;e<t.length;e+=4){const s=t[e+0],n=t[e+1],a=t[e+2],o=t[e+3];if("number"!=typeof s||"number"!=typeof n||"number"!=typeof a||"number"!=typeof o)return null;if(!(Number.isSafeInteger(s)&&Number.isSafeInteger(n)&&Number.isSafeInteger(a)&&Number.isSafeInteger(o)))return null;if(!(o>=0&&o<=3&&Math.abs(s)<=1e9&&n>=0&&n<=1e9&&Math.abs(a)<=1e9))return null;{if(uo.includes(r))return null;let t=null;fo.includes(r)&&(t=0),i.addPart(4*s,n,4*a,r,o,Ka.YPositive,Ja.Default,null,t)}}}}return i}function po(t){const e=Pa(t);if(null==e)return null;const i=new Zo(Ha.Summer,new Oa);let r=0;for(;r<e.length;){if(e.length-r<2)return null;let t=e[r+0]|e[r+1]<<8;r+=2;let s=null;if(40==t&&(t=Za.Slope,s=Za.PillarTopSlope),!(t in Za))return null;if(e.length-r<4)return null;const n=e[r+0]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;r+=4;for(let a=0;a<n;++a){if(e.length-r<3)return null;const n=(e[r+0]|e[r+1]<<8|e[r+2]<<16)-2**23;if(r+=3,e.length-r<3)return null;const a=e[r+0]|e[r+1]<<8|e[r+2]<<16;if(r+=3,e.length-r<3)return null;const o=(e[r+0]|e[r+1]<<8|e[r+2]<<16)-2**23;if(r+=3,e.length-r<1)return null;const l=3&e[r+0];if(r+=1,l<0||l>3)return null;if(uo.includes(t))return null;let h=null;fo.includes(t)&&(h=0),null!=s&&i.addPart(4*n,a,4*o,s,l,Ka.YPositive,Ja.Default,null,null),i.addPart(4*n,a,4*o,t,l,Ka.YPositive,Ja.Default,null,h)}}return i}function mo(t){const e=Wa(t);if(null==e)return null;const i=new Ma.Inflate;if(i.push(e,!0),i.err)return null;const r=i.result;if(!(r instanceof Uint8Array))return null;const s=new Zo(Ha.Summer,new Oa);let n=0;for(;n<r.length;){if(r.length-n<2)return null;let t=r[n+0]|r[n+1]<<8;n+=2;let e=null;if(40==t&&(t=Za.Slope,e=Za.PillarTopSlope),!(t in Za))return null;if(r.length-n<4)return null;const i=r[n+0]|r[n+1]<<8|r[n+2]<<16|r[n+3]<<24;n+=4;for(let a=0;a<i;++a){if(r.length-n<3)return null;const i=(r[n+0]|r[n+1]<<8|r[n+2]<<16)-2**23;if(n+=3,r.length-n<3)return null;const a=r[n+0]|r[n+1]<<8|r[n+2]<<16;if(n+=3,r.length-n<3)return null;const o=(r[n+0]|r[n+1]<<8|r[n+2]<<16)-2**23;if(n+=3,r.length-n<1)return null;const l=r[n+0];if(n+=1,l<0||l>3)return null;let h=null;if(uo.includes(t)){if(r.length-n<2)return null;h=r[n+0]|r[n+1]<<8,n+=2}let c=null;fo.includes(t)&&(c=0),null!=e&&s.addPart(4*i,a,4*o,e,l,Ka.YPositive,Ja.Default,null,null),s.addPart(4*i,a,4*o,t,l,Ka.YPositive,Ja.Default,h,c)}}return s}function bo(t){const e=Wa(t);if(null==e)return null;const i=new Ma.Inflate;if(i.push(e,!0),i.err)return null;const r=i.result;if(!(r instanceof Uint8Array))return null;const s=new Zo(Ha.Summer,new Oa);let n=0;for(;n<r.length;){if(r.length-n<2)return null;let t=r[n+0]|r[n+1]<<8;n+=2;let e=Ja.Default;if(t>=134&&t<=178)switch(t){case 134:t=Za.Block,e=Ja.Custom1;break;case 135:t=Za.HalfBlock,e=Ja.Custom1;break;case 136:t=Za.QuarterBlock,e=Ja.Custom1;break;case 137:t=Za.BlockSlopedDown,e=Ja.Custom1;break;case 138:t=Za.BlockSlopedDownInnerCorner,e=Ja.Custom1;break;case 139:t=Za.BlockSlopedDownOuterCorner,e=Ja.Custom1;break;case 140:t=Za.BlockSlopedUp,e=Ja.Custom1;break;case 141:t=Za.BlockSlopedUpInnerCorner,e=Ja.Custom1;break;case 142:t=Za.BlockSlopedUpOuterCorner,e=Ja.Custom1;break;case 143:t=Za.BlockSlopeDown,e=Ja.Custom1;break;case 144:t=Za.BlockSlopeUp,e=Ja.Custom1;break;case 145:t=Za.BlockBridge,e=Ja.Custom1;break;case 146:t=Za.BlockBridgeCorner,e=Ja.Custom1;break;case 147:t=Za.BlockBridgeIntersectionT,e=Ja.Custom1;break;case 148:t=Za.BlockBridgeIntersectionCross,e=Ja.Custom1;break;case 149:t=Za.Block,e=Ja.Custom6;break;case 150:t=Za.HalfBlock,e=Ja.Custom6;break;case 151:t=Za.QuarterBlock,e=Ja.Custom6;break;case 152:t=Za.BlockSlopedDown,e=Ja.Custom6;break;case 153:t=Za.BlockSlopedDownInnerCorner,e=Ja.Custom6;break;case 154:t=Za.BlockSlopedDownOuterCorner,e=Ja.Custom6;break;case 155:t=Za.BlockSlopedUp,e=Ja.Custom6;break;case 156:t=Za.BlockSlopedUpInnerCorner,e=Ja.Custom6;break;case 157:t=Za.BlockSlopedUpOuterCorner,e=Ja.Custom6;break;case 158:t=Za.BlockSlopeDown,e=Ja.Custom6;break;case 159:t=Za.BlockSlopeUp,e=Ja.Custom6;break;case 160:t=Za.BlockBridge,e=Ja.Custom6;break;case 161:t=Za.BlockBridgeCorner,e=Ja.Custom6;break;case 162:t=Za.BlockBridgeIntersectionT,e=Ja.Custom6;break;case 163:t=Za.BlockBridgeIntersectionCross,e=Ja.Custom6;break;case 164:t=Za.Block,e=Ja.Custom0;break;case 165:t=Za.HalfBlock,e=Ja.Custom0;break;case 166:t=Za.QuarterBlock,e=Ja.Custom0;break;case 167:t=Za.BlockSlopedDown,e=Ja.Custom0;break;case 168:t=Za.BlockSlopedDownInnerCorner,e=Ja.Custom0;break;case 169:t=Za.BlockSlopedDownOuterCorner,e=Ja.Custom0;break;case 170:t=Za.BlockSlopedUp,e=Ja.Custom0;break;case 171:t=Za.BlockSlopedUpInnerCorner,e=Ja.Custom0;break;case 172:t=Za.BlockSlopedUpOuterCorner,e=Ja.Custom0;break;case 173:t=Za.BlockSlopeDown,e=Ja.Custom0;break;case 174:t=Za.BlockSlopeUp,e=Ja.Custom0;break;case 175:t=Za.BlockBridge,e=Ja.Custom0;break;case 176:t=Za.BlockBridgeCorner,e=Ja.Custom0;break;case 177:t=Za.BlockBridgeIntersectionT,e=Ja.Custom0;break;case 178:t=Za.BlockBridgeIntersectionCross,e=Ja.Custom0}let i=null,a={x:0,y:0,z:0};if(79==t)i=Za.WallTrackFloorPlaneCorner;else if(81==t)i=Za.WallTrackCeilingPlaneCorner,a={x:0,y:3,z:0};else if(t>=87&&t<=98)switch(t){case 87:t=Za.Slope,i=Za.BlockSlopedUp;break;case 88:t=Za.SlopeUp,i=Za.BlockSlopeUp;break;case 89:t=Za.SlopeDown,i=Za.BlockSlopeDown;break;case 90:t=Za.SlopeUpLeftWide,i=Za.BlockSlopeUp;break;case 91:t=Za.SlopeUpRightWide,i=Za.BlockSlopeUp;break;case 92:t=Za.SlopeDownLeftWide,i=Za.BlockSlopeDown;break;case 93:t=Za.SlopeDownRightWide,i=Za.BlockSlopeDown;break;case 94:t=Za.SlopeLeftWide,i=Za.BlockSlopedUp;break;case 95:t=Za.SlopeRightWide,i=Za.BlockSlopedUp;break;case 96:t=Za.PlaneSlopeUp,i=Za.BlockSlopeUp;break;case 97:t=Za.PlaneSlopeDown,i=Za.BlockSlopeDown;break;case 98:t=Za.PlaneSlope,i=Za.BlockSlopedUp;break;default:throw new Error("Invalid track part id")}else 40==t?(t=Za.Slope,i=Za.PillarTopSlope):84==t?(t=Za.Slope,i=Za.PillarShortSlope):99==t?(t=Za.PlaneSlope,i=Za.PillarTopSlope):100==t&&(t=Za.PlaneSlope,i=Za.PillarShortSlope);if(!(t in Za))return null;if(r.length-n<4)return null;const o=r[n+0]|r[n+1]<<8|r[n+2]<<16|r[n+3]<<24;n+=4;for(let l=0;l<o;++l){if(r.length-n<3)return null;const o=(r[n+0]|r[n+1]<<8|r[n+2]<<16)-2**23;if(n+=3,r.length-n<3)return null;const l=r[n+0]|r[n+1]<<8|r[n+2]<<16;if(n+=3,r.length-n<3)return null;const h=(r[n+0]|r[n+1]<<8|r[n+2]<<16)-2**23;if(n+=3,r.length-n<1)return null;const c=r[n+0];if(n+=1,c<0||c>3)return null;let A=null;if(uo.includes(t)){if(r.length-n<2)return null;A=r[n+0]|r[n+1]<<8,n+=2}let d=null;fo.includes(t)&&(d=0),null!=i&&s.addPart(4*o+a.x,l+a.y,4*h+a.z,i,c,Ka.YPositive,Ja.Default,null,null),s.addPart(4*o,l,4*h,t,c,Ka.YPositive,e,A,d)}}return s}function yo(t,e){let i=t;if(e.length-i<1)return null;const r=e[i];if(i+=1,!(r in Ha))return null;if(e.length-i<1)return null;const s=e[i];if(i+=1,!Number.isSafeInteger(s)||s<0||s>=180)return null;const n=new Zo(r,new Oa(s));if(e.length-i<9)return null;const a=e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;const o=e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;const l=e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;const h=3&e[i],c=e[i]>>2&3,A=e[i]>>4&3;if(i+=1,h<1||h>4||c<1||c>4||A<1||A>4)return null;for(;i<e.length;){if(e.length-i<1)return null;let t=e[i+0];i+=1;let r=null;if(40==t?(t=Za.Slope,r=Za.PillarTopSlope):84==t?(t=Za.Slope,r=Za.PillarShortSlope):99==t?(t=Za.PlaneSlope,r=Za.PillarTopSlope):100==t&&(t=Za.PlaneSlope,r=Za.PillarShortSlope),!(t in Za))return null;if(e.length-i<4)return null;const s=e[i+0]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;for(let d=0;d<s;++d){if(e.length-i<h)return null;let s=0;for(let t=0;t<h;++t)s|=e[i+t]<<8*t;if(s+=a,i+=h,e.length-i<c)return null;let d=0;for(let t=0;t<c;++t)d|=e[i+t]<<8*t;if(d+=o,i+=c,e.length-i<A)return null;let u=0;for(let t=0;t<A;++t)u|=e[i+t]<<8*t;if(u+=l,i+=A,e.length-i<1)return null;const f=e[i+0];if(i+=1,f<0||f>3)return null;if(e.length-i<1)return null;const g=e[i+0];if(i+=1,!(g in Ka))return null;if(e.length-i<1)return null;const p=e[i+0];if(i+=1,!(p in Ja))return null;let m=null;if(uo.includes(t)){if(e.length-i<2)return null;m=e[i+0]|e[i+1]<<8,i+=2}let b=null;if(fo.includes(t)){if(e.length-i<4)return null;b=e[i+0]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24,i+=4}null!=r&&n.addPart(s,d,u,r,f,g,p,null,null),n.addPart(s,d,u,t,f,g,p,m,b)}}return n}function wo(t,e){let i=t;if(e.length-i<1)return null;const r=e[i];if(i+=1,!(r in Ha))return null;if(e.length-i<1)return null;const s=e[i];if(i+=1,!Number.isSafeInteger(s)||s<0||s>=180)return null;const n=new Zo(r,new Oa(s));if(e.length-i<9)return null;const a=e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;const o=e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;const l=e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;const h=3&e[i],c=e[i]>>2&3,A=e[i]>>4&3;if(i+=1,h<1||h>4||c<1||c>4||A<1||A>4)return null;for(;i<e.length;){if(e.length-i<1)return null;const t=e[i+0];if(i+=1,!(t in Za))return null;if(e.length-i<4)return null;const r=e[i+0]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;i+=4;for(let s=0;s<r;++s){if(e.length-i<h)return null;let r=0;for(let t=0;t<h;++t)r|=e[i+t]<<8*t;if(r+=a,i+=h,e.length-i<c)return null;let s=0;for(let t=0;t<c;++t)s|=e[i+t]<<8*t;if(s+=o,i+=c,e.length-i<A)return null;let d=0;for(let t=0;t<A;++t)d|=e[i+t]<<8*t;if(d+=l,i+=A,e.length-i<1)return null;const u=e[i];i+=1;const f=3&u;if(f<0||f>3)return null;const g=u>>2&7;if(!(g in Ka))return null;if(e.length-i<1)return null;const p=e[i+0];if(i+=1,!(p in Ja))return null;let m=null;if(uo.includes(t)){if(e.length-i<2)return null;m=e[i+0]|e[i+1]<<8,i+=2}let b=null;if(fo.includes(t)){if(e.length-i<4)return null;b=e[i+0]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24,i+=4}n.addPart(r,s,d,t,f,g,p,m,b)}}return n}var Io;!function(t){t[t.ImperialUnitsEnabled=0]="ImperialUnitsEnabled",t[t.ResetHintEnabled=1]="ResetHintEnabled",t[t.GhostCarEnabled=2]="GhostCarEnabled",t[t.DefaultCameraMode=3]="DefaultCameraMode",t[t.CockpitCameraToggle=4]="CockpitCameraToggle",t[t.Checkpoints=5]="Checkpoints",t[t.Timer=6]="Timer",t[t.Speedometer=7]="Speedometer",t[t.Language=8]="Language",t[t.ShadowQuality=9]="ShadowQuality",t[t.CloudsEnabled=10]="CloudsEnabled",t[t.ParticlesEnabled=11]="ParticlesEnabled",t[t.SkidmarksEnabled=12]="SkidmarksEnabled",t[t.FogEnabled=13]="FogEnabled",t[t.RenderScale=14]="RenderScale",t[t.ScreenPixelDensity=15]="ScreenPixelDensity",t[t.Antialiasing=16]="Antialiasing",t[t.MasterVolume=17]="MasterVolume",t[t.SoundEffectVolume=18]="SoundEffectVolume",t[t.MusicVolume=19]="MusicVolume",t[t.CheckpointVolume=20]="CheckpointVolume",t[t.GhostCarSoundsEnabled=21]="GhostCarSoundsEnabled",t[t.VibrationEnabled=22]="VibrationEnabled",t[t.TouchSteeringSide=23]="TouchSteeringSide"}(Io||(Io={}));const Bo=Io;class xo extends hi{constructor(t,e){const i=new Se({color:e,depthWrite:!1});super(t.geometry,i,t.count);for(let e=0;e<t.count;++e){const i=new Mt;t.getMatrixAt(e,i),this.setMatrixAt(e,i)}this.meshMatrix=t.matrixWorld,this.frustumCulled=!1,this.matrixAutoUpdate=!1,this.renderOrder=-1}update(t,e){var i=new Mt,r=t.normal.x*e.x+t.normal.y*e.y+t.normal.z*e.z+-t.constant*e.w,s=i.elements;s[0]=r-e.x*t.normal.x,s[4]=-e.x*t.normal.y,s[8]=-e.x*t.normal.z,s[12]=-e.x*-t.constant,s[1]=-e.y*t.normal.x,s[5]=r-e.y*t.normal.y,s[9]=-e.y*t.normal.z,s[13]=-e.y*-t.constant,s[2]=-e.z*t.normal.x,s[6]=-e.z*t.normal.y,s[10]=r-e.z*t.normal.z,s[14]=-e.z*-t.constant,s[3]=-e.w*t.normal.x,s[7]=-e.w*t.normal.y,s[11]=-e.w*t.normal.z,s[15]=r-e.w*-t.constant,this.matrix.multiplyMatrices(i,this.meshMatrix)}}var Co,So,ko,_o,Eo,Mo,Po,To,Qo,vo,Do,Ro,zo;class Wo{constructor(t,e,i,r,s,n,a,o,l,h){if(this.checkpointOrder=null,this.startOrder=null,this.x=t,this.y=e,this.z=i,this.rotation=r,this.rotationAxis=s,this.color=n,this.type=a,this.matrix=o,this.checkpointOrder=l,this.startOrder=h,null!=a.configuration.detector&&a.configuration.detector.type==to.Checkpoint){if(null==l)throw new Error("Checkpoint has no checkpoint order")}else if(null!=l)throw new Error("Non-checkpoint has checkpoint order");if(null!=a.configuration.startOffset&&null==h)throw new Error("Start part has no start order");if(null==a.configuration.startOffset&&null!=h)throw new Error("Non-start part has start order")}}class Fo{constructor(t,e,i){Co.add(this),So.set(this,void 0),ko.set(this,void 0),_o.set(this,void 0),this.environment=Ha.Summer,Eo.set(this,new Oa),Mo.set(this,[]),Po.set(this,new Map),To.set(this,new Map),Qo.set(this,{min:new D(0,0),max:new D(0,0)}),vo.set(this,[]),Xi(this,So,t,"f"),Xi(this,ko,e,"f"),Xi(this,_o,i,"f")}get sunDirection(){return ji(this,Eo,"f")}set sunDirection(t){Xi(this,Eo,t.clone(),"f")}clear(){ji(this,Mo,"f").length=0,ji(this,Po,"f").clear(),ji(this,To,"f").clear(),ji(this,Co,"m",Do).call(this)}getPartsWithin(t,e,i,r,s,n){return ji(this,Mo,"f").filter((a=>a.type.configuration.tiles.rotated(a.rotation,a.rotationAxis).some(((o,l,h)=>{const c=a.x+o,A=a.y+l,d=a.z+h;return c>=t&&c<=r&&A>=e&&A<=s&&d>=i&&d<=n})))).map((t=>({id:t.type.configuration.id,x:t.x,y:t.y,z:t.z,rotation:t.rotation,rotationAxis:t.rotationAxis,color:t.color,checkpointOrder:t.checkpointOrder,startOrder:t.startOrder})))}getPartsAt(t,e,i){const r=ji(this,Po,"f").get(t.toString()+"|"+e.toString()+"|"+i.toString());return null==r?[]:r.map((t=>({id:t.type.configuration.id,x:t.x,y:t.y,z:t.z,rotation:t.rotation,rotationAxis:t.rotationAxis,color:t.color,checkpointOrder:t.checkpointOrder,startOrder:t.startOrder})))}setPart(t,e,i,r,s,n,a,o,l){const h=ji(this,_o,"f").getPart(r);if(a!=Ja.Default&&!h.colors.has(a))throw new Error("Track part color does not exist");const c=io(s,n),A=new z(t*Fo.partSize,e*Fo.partSize,i*Fo.partSize),d=(new Mt).compose(A,c,new z(1,1,1)),u=new Wo(t,e,i,s,n,a,h,d,o,l);ji(this,Mo,"f").push(u);h.configuration.tiles.rotated(s,n).forEach(((r,s,n)=>{const a=(t+r).toString()+"|"+(e+s).toString()+"|"+(i+n).toString();if(e+s<0)throw new Error("Track part below ground");{const t=ji(this,Po,"f").get(a);null==t?ji(this,Po,"f").set(a,[u]):t.push(u)}}));const f=ji(this,To,"f").get(r);null==f?ji(this,To,"f").set(r,[u]):f.push(u)}deletePartsAt(t,e,i){const r=[],s=ji(this,Po,"f").get(t.toString()+"|"+e.toString()+"|"+i.toString());if(null!=s)for(let t=0;t<s.length;++t){const e=s[t];r.push({id:e.type.configuration.id,x:e.x,y:e.y,z:e.z,rotation:e.rotation,rotationAxis:e.rotationAxis,color:e.color,checkpointOrder:e.checkpointOrder,startOrder:e.startOrder}),ji(this,Co,"m",Ro).call(this,ji(this,Mo,"f").indexOf(e)),--t}return r}deletePartsWithin(t,e,i,r,s,n){const a=[];for(let o=0;o<ji(this,Mo,"f").length;++o){const l=ji(this,Mo,"f")[o];l.type.configuration.tiles.rotated(l.rotation,l.rotationAxis).some(((a,o,h)=>{const c=l.x+a,A=l.y+o,d=l.z+h;return c>=t&&c<=r&&A>=e&&A<=s&&d>=i&&d<=n}))&&(a.push({id:l.type.configuration.id,x:l.x,y:l.y,z:l.z,rotation:l.rotation,rotationAxis:l.rotationAxis,color:l.color,checkpointOrder:l.checkpointOrder,startOrder:l.startOrder}),ji(this,Co,"m",Ro).call(this,o),--o)}return a}deleteSpecificPart(t,e,i,r,s,n){for(let a=0;a<ji(this,Mo,"f").length;++a){const o=ji(this,Mo,"f")[a];if(o.type.configuration.id==t&&o.x==e&&o.y==i&&o.z==r&&o.rotation==s&&o.rotationAxis==n)return ji(this,Co,"m",Ro).call(this,a),{id:o.type.configuration.id,x:o.x,y:o.y,z:o.z,rotation:o.rotation,rotationAxis:o.rotationAxis,color:o.color,checkpointOrder:o.checkpointOrder,startOrder:o.startOrder}}return null}getBounds(){return ji(this,Qo,"f")}generateMeshes(){ji(this,Co,"m",Do).call(this);const t=ji(this,Eo,"f").getSunPosition(),e=new et(t.x,t.y,t.z,0);let i,r=null;if(2==ji(this,ko,"f").getSettingInteger(Bo.ShadowQuality))switch(this.environment){case Ha.Summer:r=new Ie(2511171);break;case Ha.Winter:r=new Ie(7904713);break;case Ha.Desert:r=new Ie(7958351)}switch(this.environment){case Ha.Summer:i=Ja.Summer;break;case Ha.Winter:i=Ja.Winter;break;case Ha.Desert:i=Ja.Desert}const s=ji(this,So,"f").isTrackShadowsEnabled();for(const t of ji(this,_o,"f").getAllParts())for(const[n,a]of t.colors){const o=[];for(const e of ji(this,Mo,"f")){let r=e.color;r==Ja.Default&&(r=i),e.type==t&&r==n&&o.push(e)}if(o.length>0){if(null==a)throw new Error("Mesh is not loaded");const t=new hi(a.geometry,a.material,o.length);t.matrixAutoUpdate=!1,t.matrixWorldAutoUpdate=!1,t.frustumCulled=!1,t.castShadow=s,t.receiveShadow=!0;for(let e=0;e<o.length;++e)t.setMatrixAt(e,o[e].matrix);if(ji(this,So,"f").scene.add(t),ji(this,vo,"f").push(t),null!=r){const i=new xo(t,r);i.update(new ui(new z(0,1,0),0),e),ji(this,So,"f").scene.add(i),ji(this,vo,"f").push(i)}}}ji(this,Co,"m",zo).call(this)}getCheckpoints(){let t=[];const e=ji(this,_o,"f").getPartTypesWithDetector(to.Checkpoint);for(const i of e){const e=ji(this,To,"f").get(i);null!=e&&(t=t.concat(e))}return t.map((t=>{if(null==t.checkpointOrder)throw new Error("Checkpoint has no checkpoint order");if(null==t.type.configuration.detector)throw new Error("Checkpoint has no detector");return{x:t.x,y:t.y,z:t.z,rotation:t.rotation,rotationAxis:t.rotationAxis,type:t.type.configuration.id,checkpointOrder:t.checkpointOrder,detector:t.type.configuration.detector}}))}getCheckpointOrders(){let t=[];const e=ji(this,_o,"f").getPartTypesWithDetector(to.Checkpoint);for(const i of e){const e=ji(this,To,"f").get(i);null!=e&&(t=t.concat(e))}return t.map((t=>{if(null==t.checkpointOrder)throw new Error("Checkpoint has no checkpoint order");if(null==t.type.configuration.detector)throw new Error("Checkpoint has no detector");return t.checkpointOrder}))}getTotalNumberOfCheckpointIndices(){let t=[];const e=ji(this,_o,"f").getPartTypesWithDetector(to.Checkpoint);for(const i of e){const e=ji(this,To,"f").get(i);null!=e&&(t=t.concat(e))}return t.map((t=>t.checkpointOrder)).filter(((t,e,i)=>i.indexOf(t)==e)).length}getStart(){let t=-1/0,e=null;for(const[i,r]of ji(this,To,"f")){const s=ji(this,_o,"f").getPartStartOffset(i);if(r.length>0&&null!=s)for(const i of r){if(null==i.startOrder)throw new Error("Start part has no start order");i.startOrder>=t&&(t=i.startOrder,e={part:i,startOffset:s})}}return null!=e?{x:e.part.x,y:e.part.y,z:e.part.z,rotation:e.part.rotation,rotationAxis:e.part.rotationAxis,startOffset:e.startOffset}:null}getStartTransform(){const t=this.getStart();if(null!=t){const e=io(t.rotation,t.rotationAxis).multiply((new R).setFromEuler(new Ut(0,Math.PI,0))),i=t.startOffset;return i.applyQuaternion(e),{position:new z(t.x*Fo.partSize+i.x,t.y*Fo.partSize+i.y,t.z*Fo.partSize+i.z),quaternion:e}}return null}getNextStartOrder(){let t=0;for(const[e,i]of ji(this,To,"f")){const r=ji(this,_o,"f").getPartStartOffset(e);if(i.length>0&&null!=r)for(const e of i){if(null==e.startOrder)throw new Error("Start part has no start order");t=Math.max(t,e.startOrder+1)}}return t}getTrackData(){const t=new Zo(this.environment,ji(this,Eo,"f"));for(const e of ji(this,Mo,"f"))t.addPart(e.x,e.y,e.z,e.type.configuration.id,e.rotation,e.rotationAxis,e.color,e.checkpointOrder,e.startOrder);return t}loadTrackData(t){return this.clear(),this.environment=t.environment,this.sunDirection=t.sunDirection.clone(),t.forEachPart(((t,e,i,r,s,n,a,o,l)=>{this.setPart(t,e,i,r,s,n,a,o,l)})),!0}}So=new WeakMap,ko=new WeakMap,_o=new WeakMap,Eo=new WeakMap,Mo=new WeakMap,Po=new WeakMap,To=new WeakMap,Qo=new WeakMap,vo=new WeakMap,Co=new WeakSet,Do=function(){for(const t of ji(this,vo,"f"))ji(this,So,"f").scene.remove(t);ji(this,vo,"f").length=0},Ro=function(t){if(t<0||t>=ji(this,Mo,"f").length)throw new Error("Track part index out of bounds");const e=ji(this,Mo,"f")[t];ji(this,Mo,"f").splice(t,1);e.type.configuration.tiles.rotated(e.rotation,e.rotationAxis).forEach(((t,i,r)=>{const s=(e.x+t).toString()+"|"+(e.y+i).toString()+"|"+(e.z+r).toString(),n=ji(this,Po,"f").get(s);if(null==n)throw new Error("Track part section missing");{const t=n.indexOf(e);if(!(t>=0))throw new Error("Track part missing from parts by position map");n.splice(t,1),0==n.length&&ji(this,Po,"f").delete(s)}}));const i=ji(this,To,"f").get(e.type.configuration.id);if(null==i)throw new Error("Track part type is missing from parts by type map");for(let t=0;t<i.length;++t){if(i[t]==e){i.splice(t,1);break}if(t==i.length-1)throw new Error("Track part is missing from parts by type map")}},zo=function(){let t=1/0,e=1/0,i=-1/0,r=-1/0;for(const s of ji(this,Mo,"f"))t=Math.min(s.x,t),e=Math.min(s.z,e),i=Math.max(s.x,i),r=Math.max(s.z,r);Number.isFinite(t)&&Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(r)?Xi(this,Qo,{min:new D(t,e),max:new D(i,r)},"f"):Xi(this,Qo,{min:new D,max:new D},"f")},Fo.partSize=5;const Uo=Fo;var No,Lo,Oo,Vo,Ho,Go,Jo,qo;Lo=new WeakMap,Oo=new WeakMap,Vo=new WeakMap,Ho=new WeakMap,Go=new WeakMap,No=new WeakSet,Jo=function(){let t=-1/0,e=null;for(const i of ji(this,Ho,"f")){const r=ji(this,Go,"f").get(i);if(null==r)throw new Error("Part list does not exist");const s=Ao(i).startOffset;if(r.length>0&&null!=s)for(const i of r){if(null==i.startOrder)throw new Error("Start part has no start order");i.startOrder>=t&&(t=i.startOrder,e={part:i,startOffset:s})}}return null!=e?{x:e.part.x,y:e.part.y,z:e.part.z,rotation:e.part.rotation,rotationAxis:e.part.rotationAxis,startOffset:e.startOffset.clone()}:null},qo=function(){const t=[];t.push(ji(this,Oo,"f")),t.push(ji(this,Vo,"f").representation);let e=1/0,i=1/0,r=1/0,s=-1/0,n=-1/0,a=-1/0;for(const[,t]of ji(this,Go,"f"))for(const o of t)e=Math.min(o.x,e),i=Math.min(o.y,i),r=Math.min(o.z,r),s=Math.max(o.x,s),n=Math.max(o.y,n),a=Math.max(o.z,a);Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(r)&&Number.isFinite(s)&&Number.isFinite(n)&&Number.isFinite(a)||(e=0,i=0,r=0,s=0,n=0,a=0);const o=s-e+1,l=n-i+1,h=a-r+1,c=Math.max(1,Math.min(4,Math.ceil(Math.log2(o+1)/8))),A=Math.max(1,Math.min(4,Math.ceil(Math.log2(l+1)/8))),d=Math.max(1,Math.min(4,Math.ceil(Math.log2(h+1)/8)));t.push(255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&i,i>>>8&255,i>>>16&255,i>>>24&255,255&r,r>>>8&255,r>>>16&255,r>>>24&255,255&(c|A<<2|d<<4));for(const s of ji(this,Ho,"f")){const n=ji(this,Go,"f").get(s);if(null==n)throw new Error("Part list does not exist");if(s<0||s>255)throw new Error("Part id is out of range");const a=n.length;t.push(255&s,255&a,a>>>8&255,a>>>16&255,a>>>24&255);for(const a of n){const n=a.x-e,o=a.y-i,l=a.z-r;if(1==c?t.push(255&n):2==c?t.push(255&n,n>>>8&255):3==c?t.push(255&n,n>>>8&255,n>>>16&255):4==c&&t.push(255&n,n>>>8&255,n>>>16&255,n>>>24&255),1==A?t.push(255&o):2==A?t.push(255&o,o>>>8&255):3==A?t.push(255&o,o>>>8&255,o>>>16&255):4==A&&t.push(255&o,o>>>8&255,o>>>16&255,o>>>24&255),1==d?t.push(255&l):2==d?t.push(255&l,l>>>8&255):3==d?t.push(255&l,l>>>8&255,l>>>16&255):4==d&&t.push(255&l,l>>>8&255,l>>>16&255,l>>>24&255),t.push(255&(3&a.rotation|(7&a.rotationAxis)<<2),255&a.color),uo.includes(s)){if(null==a.checkpointOrder)throw new Error("Checkpoint has no checkpoint order");t.push(255&a.checkpointOrder,a.checkpointOrder>>>8&255)}if(fo.includes(s)){if(null==a.startOrder)throw new Error("Start has no start order");t.push(255&a.startOrder,a.startOrder>>>8&255,a.startOrder>>>16&255,a.startOrder>>>24&255)}}}return new Uint8Array(t)};const Zo=class{constructor(t,e){No.add(this),Lo.set(this,null),Oo.set(this,void 0),Vo.set(this,void 0),Ho.set(this,[]),Go.set(this,new Map),Xi(this,Oo,t,"f"),Xi(this,Vo,e.clone(),"f")}get environment(){return ji(this,Oo,"f")}set environment(t){Xi(this,Lo,null,"f"),Xi(this,Oo,t,"f")}get sunDirection(){return ji(this,Vo,"f").clone()}set sunDirection(t){Xi(this,Lo,null,"f"),Xi(this,Vo,t.clone(),"f")}get numberOfParts(){let t=0;for(const e of ji(this,Go,"f").values())t+=e.length;return t}addPart(t,e,i,r,s,n,a,o,l){Xi(this,Lo,null,"f");const h={x:t,y:e,z:i,rotation:s,rotationAxis:n,color:a,checkpointOrder:o,startOrder:l},c=ji(this,Go,"f").get(r);if(null!=c){let t=0,e=c.length;for(;t<e;){const i=t+e>>>1,r=c[i];(h.x-r.x||h.y-r.y||h.z-r.z||h.rotation-r.rotation||h.rotationAxis-r.rotationAxis||h.color-r.color||(h.checkpointOrder??-1)-(r.checkpointOrder??-1)||(h.startOrder??-1)-(r.startOrder??-1))<0?e=i:t=i+1}c.splice(t,0,h)}else{ji(this,Go,"f").set(r,[h]);let t=0,e=ji(this,Ho,"f").length;for(;t<e;){const i=t+e>>>1;ji(this,Ho,"f")[i]<r?t=i+1:e=i}ji(this,Ho,"f").splice(t,0,r)}}forEachPart(t){for(const e of ji(this,Ho,"f")){const i=ji(this,Go,"f").get(e);if(null==i)throw new Error("Part list does not exist");for(const r of i)t(r.x,r.y,r.z,e,r.rotation,r.rotationAxis,r.color,r.checkpointOrder,r.startOrder)}}getId(){return Xi(this,Lo,ji(this,Lo,"f")??(0,va.sha256)(ji(this,No,"m",qo).call(this)),"f"),ji(this,Lo,"f")}getBounds(){let t=1/0,e=1/0,i=-1/0,r=-1/0;return this.forEachPart(((s,n,a)=>{t=Math.min(s,t),e=Math.min(a,e),i=Math.max(s,i),r=Math.max(a,r)})),Number.isFinite(t)&&Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(r)?{min:new D(t,e),max:new D(i,r)}:{min:new D,max:new D}}hasStartingPoint(){return null!=ji(this,No,"m",Jo).call(this)}getStartTransform(){const t=ji(this,No,"m",Jo).call(this);if(null!=t){const e=io(t.rotation,t.rotationAxis).multiply((new R).setFromEuler(new Ut(0,Math.PI,0))),i=t.startOffset;return i.applyQuaternion(e),{position:new z(t.x*Uo.partSize+i.x,t.y*Uo.partSize+i.y,t.z*Uo.partSize+i.z),quaternion:e}}return null}toSaveString(){const t=ji(this,No,"m",qo).call(this),e=new Ma.Deflate({level:9,windowBits:9,memLevel:9});e.push(t,!0);const i=za(e.result),r=new Ma.Deflate({level:9,windowBits:15,memLevel:9});return r.push(i,!0),za(r.result)}toExportString(t){const e=(new TextEncoder).encode(t.name);let i,r;null!=t.author?(r=(new TextEncoder).encode(t.author),i=r.length):(r=null,i=0);const s=[];if(null==t.lastModified)s.push(0);else{s.push(1);const e=Math.floor(t.lastModified.getTime()/1e3);s.push(255&e,e>>>8&255,e>>>16&255,e>>>24&255)}const n=new Uint8Array(1+e.length+1+i+s.length);n[0]=e.length,n.set(e,1),n[1+e.length]=i,null!=r&&n.set(r,1+e.length+1),n.set(s,1+e.length+1+i);const a=ji(this,No,"m",qo).call(this),o=new Ma.Deflate({level:9,windowBits:9,memLevel:9});o.push(n,!1),o.push(a,!0);const l=za(o.result),h=new Ma.Deflate({level:9,windowBits:15,memLevel:9});return h.push(l,!0),"PolyTrack2"+za(h.result)}static fromSaveString(t){const e=function(t){const e=Wa(t);if(null==e)return null;const i=new Ma.Inflate({to:"string"});if(i.push(e,!0),i.err)return null;const r=i.result;if("string"!=typeof r)return null;const s=Wa(r);if(null==s)return null;const n=new Ma.Inflate;if(n.push(s,!0),n.err)return null;const a=n.result;return a instanceof Uint8Array?wo(0,a):null}(t);if(null!=e)return e;const i=function(t){const e=Wa(t);if(null==e)return null;const i=new Ma.Inflate({to:"string"});if(i.push(e,!0),i.err)return null;const r=i.result;if("string"!=typeof r)return null;const s=Wa(r);if(null==s)return null;const n=new Ma.Inflate;if(n.push(s,!0),n.err)return null;const a=n.result;return a instanceof Uint8Array?yo(0,a):null}(t);if(null!=i)return i;const r=bo(t);if(null!=r)return r;const s=mo(t);if(null!=s)return s;const n=po(t);if(null!=n)return n;const a=go(t);return null!=a?a:null}static fromExportString(t){const e=t.replace(/\s+/g,""),i=function(t){const e="PolyTrack2";if(!t.startsWith(e))return null;const i=Wa(t.substring(10));if(null==i)return null;const r=new Ma.Inflate({to:"string"});if(r.push(i,!0),r.err)return null;const s=r.result;if("string"!=typeof s)return null;const n=Wa(s);if(null==n)return null;const a=new Ma.Inflate;if(a.push(n,!0),a.err)return null;const o=a.result;if(!(o instanceof Uint8Array))return null;let l=0;if(o.length<l+1)return null;const h=o[l];if(l+=1,o.length<l+h)return null;const c=new TextDecoder("utf-8").decode(o.subarray(l,l+h));if(l+=h,o.length<l+1)return null;const A=o[l];let d;if(l+=1,A>0){if(o.length<l+A)return null;d=new TextDecoder("utf-8").decode(o.subarray(l,l+A)),l+=A}else d=null;if(o.length<l+1)return null;const u=o[l];let f;if(l+=1,0==u)f=null;else{if(1!=u)return null;{if(o.length<l+4)return null;const t=o[l+0]|o[l+1]<<8|o[l+2]<<16|o[l+3]<<24;l+=4,f=new Date(1e3*t)}}const g=wo(l,o);return null==g?null:{trackMetadata:{name:c,author:d,lastModified:f},trackData:g}}(e);if(null!=i)return i;const r=function(t){const e="PolyTrack1";if(!t.startsWith(e))return null;const i=Wa(t.substring(10));if(null==i)return null;const r=new Ma.Inflate({to:"string"});if(r.push(i,!0),r.err)return null;const s=r.result;if("string"!=typeof s)return null;const n=Wa(s);if(null==n)return null;const a=new Ma.Inflate;if(a.push(n,!0),a.err)return null;const o=a.result;if(!(o instanceof Uint8Array))return null;const l=o[0];if(o.length<1+l)return null;const h=new TextDecoder("utf-8").decode(o.subarray(1,1+l)),c=o[1+l];if(o.length<1+l+1+c)return null;let A;A=c>0?new TextDecoder("utf-8").decode(o.subarray(1+l+1,1+l+1+c)):null;const d=yo(1+l+1+c,o);return null==d?null:{trackMetadata:{name:h,author:A,lastModified:null},trackData:d}}(e);if(null!=r)return r;const s=function(t){if(!t.startsWith("v3"))return null;const e=Wa(t.substring(2,4));if(null==e)return null;if(1!=e.length)return null;const i=e[0],r=Wa(t.substring(4,4+i));if(null==r)return null;let s;try{s=new TextDecoder("utf-8").decode(r)}catch{return null}const n=bo(t.substring(4+i));return null==n?null:{trackMetadata:{name:s,author:null,lastModified:null},trackData:n}}(e);if(null!=s)return s;const n=function(t){if(!t.startsWith("v2"))return null;const e=Wa(t.substring(2,4));if(null==e)return null;if(1!=e.length)return null;const i=e[0],r=Math.ceil(i/3*4),s=Wa(t.substring(4,4+r));if(null==s)return null;let n;try{n=new TextDecoder("utf-8").decode(s)}catch{return null}const a=mo(t.substring(4+r));return null==a?null:{trackMetadata:{name:n,author:null,lastModified:null},trackData:a}}(e);if(null!=n)return n;const a=function(t){if(!t.startsWith("v1n"))return null;const e=Pa(t.substring(3,5));if(null==e)return null;if(1!=e.length)return null;const i=e[0],r=t.substring(5,5+i);let s;try{s=decodeURIComponent(r)}catch(t){return console.warn(t),null}const n=po(t.substring(5+i));return null==n?null:{trackMetadata:{name:s,author:null,lastModified:null},trackData:n}}(e);if(null!=a)return a;const o=function(t){let e,i;try{e=JSON.parse(t)}catch(t){return console.warn(t),null}if("object"!=typeof e||null==e)return null;if(!("name"in e)||"string"!=typeof e.name)return null;if(!("track"in e)||"string"!=typeof e.track)return null;try{i=JSON.parse(e.track)}catch(t){return console.warn(t),null}const r=go(i);return null==r?null:{trackMetadata:{name:e.name,author:null,lastModified:null},trackData:r}}(t);return null!=o?o:null}createThumbnail(){let t=1/0,e=1/0,i=-1/0,r=-1/0;this.forEachPart(((s,n,a,o,l,h)=>{Ao(o).tiles.rotated(l,h).forEach(((n,o,l)=>{t=Math.min(t,Math.floor((s+n-2)/4)),e=Math.min(e,Math.floor((a+l-2)/4)),i=Math.max(i,Math.floor((s+n-2)/4)),r=Math.max(r,Math.floor((a+l-2)/4))}))})),Number.isFinite(t)&&Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(r)||(t=0,e=0,i=0,r=0);const s=10,n=i-t+1;n<=s&&(i+=Math.ceil((s-n)/2),t-=Math.ceil((s-n)/2));const a=r-e+1;a<=s&&(r+=Math.ceil((s-a)/2),e-=Math.ceil((s-a)/2));const o=document.createElement("canvas");o.width=Math.min(1024,i-t+1),o.height=Math.min(1024,r-e+1);const l=o.getContext("2d");if(null==l)throw new Error("Failed to get canvas context");const h=l.createImageData(o.width,o.height),c=[],A=[],d=[];let u,f,g;switch(this.environment){case Ha.Summer:u=255,f=255,g=255;break;case Ha.Winter:u=190,f=216,g=247;break;case Ha.Desert:u=237,f=226,g=175}this.forEachPart(((i,r,s,n,a,l)=>{const p=Ao(n);p.tiles.rotated(a,l).forEach(((r,n,a)=>{const l=Math.floor((i+r-2)/4)-t,m=Math.floor((s+a-2)/4)-e,b=4*(l+m*o.width);h.data[b+0]=u,h.data[b+1]=f,h.data[b+2]=g,h.data[b+3]=255,null!=p.startOffset?A.push([l,m]):null!=p.detector&&p.detector.type==to.Checkpoint?c.push([l,m]):null!=p.detector&&p.detector.type==to.Finish&&d.push([l,m])}))}));for(const[t,e]of c)h.data[4*(t+e*o.width)+0]=226,h.data[4*(t+e*o.width)+1]=192,h.data[4*(t+e*o.width)+2]=38,h.data[4*(t+e*o.width)+3]=255;for(const[t,e]of A)h.data[4*(t+e*o.width)+0]=51,h.data[4*(t+e*o.width)+1]=140,h.data[4*(t+e*o.width)+2]=224,h.data[4*(t+e*o.width)+3]=255;for(const[t,e]of d)h.data[4*(t+e*o.width)+0]=209,h.data[4*(t+e*o.width)+1]=41,h.data[4*(t+e*o.width)+2]=41,h.data[4*(t+e*o.width)+3]=255;return l.putImageData(h,0,0),o}};const Yo=class{constructor(){this.up=!1,this.right=!1,this.down=!1,this.left=!1,this.reset=!1}dispose(){}getControls(){return{up:this.up,right:this.right,down:this.down,left:this.left,reset:this.reset}}};function Ko(t){if(t.length<12)throw new Error("CarState data is too short");return!!(2&t[11])}importScripts("lib/polytrack_physics.js");const jo=[];onmessage=t=>{jo.push(t)},PolyTrackPhysics().then((async t=>{await async function(){const t=Uint8Array.from(atob("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"),(t=>t.charCodeAt(0))),e=await WebAssembly.compile(t),i=(await WebAssembly.instantiate(e)).exports;Math={E:Wi,LN10:Fi,LN2:Ui,LOG2E:Ni,LOG10E:Li,PI:Oi,SQRT1_2:Vi,SQRT2:Hi,abs:Math.abs,acos:i.acos,asin:i.asin,atan:i.atan,atan2:i.atan2,ceil:Math.ceil,cos:qi,exp:i.exp,floor:Math.floor,log:i.log,max:Math.max,min:Math.min,pow:i.pow,random:Math.random,round:Math.round,sin:Ji,sqrt:i.sqrt,tan:i.tan,clz32:Math.clz32,imul:Math.imul,sign:Math.sign,log10:i.log10,log2:i.log2,log1p:Math.log1p,expm1:Math.expm1,cosh:Math.cosh,sinh:Math.sinh,tanh:Math.tanh,acosh:Math.acosh,asinh:Math.asinh,atanh:Math.atanh,hypot:Math.hypot,trunc:Math.trunc,cbrt:Math.cbrt,fround:Math.fround,[Symbol.toStringTag]:"Math"}}();const e=[];function i(i){const s=i.data;switch(s.messageType){case Ki.Init:!function(e){const i=e.isRealtime,r=e.trackParts,s=e.carMassOffset,n=e.carCollisionShapeVertices,a=t.ccall("malloc","number",["number"],[4*n.length]);if("number"!=typeof a||0==a)throw new Error("Failed to allocate memory for car collision shape vertices");t.HEAPF32.set(n,a/4),t.ccall("initializeCarCollisionShape","void",["number","number","number"],[s,a,n.length]),t.ccall("free","void",["number"],[a]);for(const o of r){const l=t.ccall("malloc","number",["number"],[o.vertices.byteLength]);if("number"!=typeof l||0==l)throw new Error("Failed to allocate memory for track part vertices");t.HEAPF32.set(o.vertices,l/4),t.ccall("addTrackPartConfiguration","void",["number","number","number","number","number","number","number","number","number","number","boolean","number","number","number"],[o.id,l,o.vertices.length,null!=o.detector?o.detector.type:-1,null!=o.detector?o.detector.center[0]:0,null!=o.detector?o.detector.center[1]:0,null!=o.detector?o.detector.center[2]:0,null!=o.detector?o.detector.size[0]:0,null!=o.detector?o.detector.size[1]:0,null!=o.detector?o.detector.size[2]:0,null!=o.startOffset,null!=o.startOffset?o.startOffset[0]:0,null!=o.startOffset?o.startOffset[1]:0,null!=o.startOffset?o.startOffset[2]:0]),t.ccall("free","void",["number"],[l])}if(i)if(self.requestAnimationFrame){let A=performance.now();function d(){h(),self.requestAnimationFrame(d),A=performance.now()}d(),setInterval((()=>{performance.now()-A>100&&h()}),1e3/60)}else setInterval(h,1e3/60);else setInterval(c)}(s);break;case Ki.Verify:!function(e){const i=Zo.fromSaveString(e.trackData);if(null==i)throw new Error("Failed to load track");const s=Qa.deserialize(e.carRecording);if(null==s)throw new Error("Failed to deserialize recording");const n=new tr(s),o=i.getStartTransform();if(null==o)throw new Error("Track has no starting point");const l=e.carId;r(l,e.mountainVertices,new z(e.mountainOffset.x,e.mountainOffset.y,e.mountainOffset.z),i,o);const h={id:l,hasFinished:!1,frames:0},c=e.targetFrames;for(;!h.hasFinished&&h.frames<c;){const t=a(h,n.getControls(h.frames));h.hasFinished=Ko(new Uint8Array(t)),h.frames++}const A=h.hasFinished&&h.frames==c;postMessage({messageType:Ki.VerifyResult,carId:l,result:A}),t.ccall("deleteCarModel","void",["number"],[l]),n.dispose()}(s);break;case Ki.TestDeterminism:{const e=t.ccall("testDeterminism","boolean");if("boolean"!=typeof e)throw new Error("Determinism result has invalid type");postMessage({messageType:Ki.DeterminismResult,isDeterminstic:e});break}case Ki.CreateCar:!function(t){const i=Zo.fromSaveString(t.trackData);if(null==i)throw new Error("Failed to load track");let s,n=null;const a=t.carRecording;if(null==a)s=new Yo,n={up:!1,right:!1,down:!1,left:!1,reset:!1,buffer:[]};else{const t=Qa.deserialize(a);if(null==t)throw new Error("Failed to deserialize recording");s=new tr(t)}const o=i.getStartTransform();if(null==o)throw new Error("Track has no starting point");const l=t.carId;r(l,t.mountainVertices,new z(t.mountainOffset.x,t.mountainOffset.y,t.mountainOffset.z),i,o),e.push({id:l,controls:s,userControls:n,hasStarted:!1,frames:0,targetSimulationFrames:null,isPaused:!1})}(s);break;case Ki.DeleteCar:!function(i){const r=i.carId;for(let i=0;i<e.length;i++){const s=e[i];if(s.id==r){s.controls.dispose(),t.ccall("deleteCarModel","void",["number"],[r]),e.splice(i,1);break}}}(s);break;case Ki.StartCar:!function(t){const i=t.carId;for(const r of e)if(r.id==i){r.hasStarted=!0,r.targetSimulationFrames=t.targetSimulationTimeFrames;break}}(s);break;case Ki.ControlCar:!function(t){const i=performance.now(),r=t.carId;for(const s of e)if(s.id==r){if(null==s.userControls)throw new Error("Tried to control uncontrollable car");const e=Math.max(0,i-o);let r=s.frames+e;if(s.hasStarted||(r=0),0==s.userControls.buffer.length)s.userControls.buffer.push({frame:r,up:t.up,right:t.right,down:t.down,left:t.left,reset:t.reset});else{const e=s.userControls.buffer[s.userControls.buffer.length-1].frame;r==e?s.userControls.buffer[s.userControls.buffer.length-1]={frame:r,up:t.up,right:t.right,down:t.down,left:t.left,reset:t.reset}:r>e&&s.userControls.buffer.push({frame:r,up:t.up,right:t.right,down:t.down,left:t.left,reset:t.reset})}break}}(s);break;case Ki.PauseCar:!function(t){const i=t.carId;for(const r of e)if(r.id==i){r.isPaused=t.isPaused;break}}(s)}}for(const t of jo)i(t);function r(e,i,r,s,n){const a=t.ccall("malloc","number",["number"],[4*i.length]);if("number"!=typeof a||0==a)throw new Error("Failed to allocate memory for mountain vertices");t.HEAPF32.set(i,a/4);const o=s.numberOfParts,l=t.ccall("malloc","number",["number"],[19*o]);if("number"!=typeof l||0==l)throw new Error("Failed to allocate memory for track data");let h=l;const c=new DataView(t.HEAPU8.buffer);s.forEachPart(((t,e,i,r,s,n,a,o)=>{c.setUint8(h,r),h++,c.setInt32(h,t,!0),h+=4,c.setInt32(h,e,!0),h+=4,c.setInt32(h,i,!0),h+=4,c.setUint8(h,s),h++,c.setUint8(h,n),h++;const l=o??-1;c.setInt32(h,l,!0),h+=4})),t.ccall("createCarModel","void",["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[e,a,i.length,r.x,r.y,r.z,l,o,n.position.x,n.position.y,n.position.z,n.quaternion.x,n.quaternion.y,n.quaternion.z,n.quaternion.w]),t.ccall("free","void",["number"],[a]),t.ccall("free","void",["number"],[l])}jo.length=0,onmessage=i;const s=227,n=(()=>{const e=t.ccall("malloc","number",["number"],[s]);if("number"!=typeof e||0==e)throw new Error("Failed to allocate memory for car state buffer");return e})();function a(e,i){t.ccall("updateCarModel","void",["number","boolean","boolean","boolean","boolean","boolean","number"],[e.id,i.up,i.right,i.down,i.left,i.reset,n]);return new Uint8Array(t.HEAPU8.buffer,n,s).slice().buffer}let o=performance.now(),l=0;function h(){const t=performance.now();l+=Math.max(0,Math.min(.1,(t-o)/1e3)),o=t;const i=[];for(;l>.001;){l-=.001;for(const t of e){if(null!=t.targetSimulationFrames)throw new Error("Realtime simulation does not support targetSimulationFrames");if(t.hasStarted&&t.frames<Qa.maxFrames&&!t.isPaused)if(null!=t.userControls){for(;t.userControls.buffer.length>0&&t.userControls.buffer[0].frame<=t.frames;){const e=t.userControls.buffer.shift();null!=e&&(t.userControls.up=e.up,t.userControls.right=e.right,t.userControls.down=e.down,t.userControls.left=e.left,t.userControls.reset=e.reset)}i.push({car:t,controls:{up:t.userControls.up,right:t.userControls.right,down:t.userControls.down,left:t.userControls.left,reset:t.userControls.reset}}),t.frames++}else{const e=t.controls.getControls(t.frames);i.push({car:t,controls:e}),t.frames++}}}const r=[];for(const{car:t,controls:e}of i)r.push(a(t,e));r.length>0&&postMessage({messageType:Ki.UpdateResult,carStateBuffers:r},{transfer:r})}function c(){const t=performance.now(),i=[];if(e.length>0){let r;do{r=!0;for(let t=0;t<Math.max(1,Math.ceil(100/e.length));t++){for(const t of e)if(t.hasStarted){if(null==t.targetSimulationFrames)throw new Error("Non-realtime simulation requires targetSimulationFrames");if(t.frames<Qa.maxFrames&&t.frames<t.targetSimulationFrames&&!t.isPaused){const e=t.controls.getControls(t.frames);i.push({car:t,controls:e}),t.frames++,r=!1}}if(r)break}}while(Math.max(0,performance.now()-t)/1e3<.01&&!r)}const r=[];for(const{car:t,controls:e}of i)r.push(a(t,e));r.length>0&&postMessage({messageType:Ki.UpdateResult,carStateBuffers:r},{transfer:r})}}))})()})();