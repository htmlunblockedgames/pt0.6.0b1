"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[982],{5768:(t,e,n)=>{n.d(e,{A:()=>l});var a=n(1601),i=n.n(a),d=n(6314),o=n.n(d)()(i());o.push([t.id,".admin-ui {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 2;\n\tmargin: 0;\n\tpadding: 16px;\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: scroll;\n\tbox-sizing: border-box;\n\tbackground-color: var(--surface-color);\n\tpointer-events: auto;\n}\n\n.admin-ui > .tracks-list {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n\n.admin-ui > .tracks-list > button {\n\tmargin: 4px;\n\twidth: 300px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n.admin-ui > .tracks-list > button.selected {\n\tbackground-color: var(--button-hover-color);\n}\n\n.admin-ui > .leaderboard-container {\n\twidth: 100%;\n}\n\n.admin-ui > .leaderboard-container > table {\n\ttable-layout: fixed;\n\tborder-collapse: collapse;\n\tcolor: var(--text-color);\n\tfont-size: 26px;\n\twidth: 100%;\n}\n.admin-ui > .leaderboard-container > table > tr > th {\n\tborder-bottom: 2px solid var(--text-color);\n\ttext-align: left;\n}\n\n.admin-ui > .leaderboard-container > table > tr > th:nth-of-type(2) {\n\twidth: 150px;\n}\n\n.admin-ui > .leaderboard-container > table > tr > th:nth-of-type(3) {\n\twidth: 220px;\n}\n\n.admin-ui > .leaderboard-container > table > tr > th:nth-of-type(4) {\n\twidth: 200px;\n}\n\n.admin-ui > .leaderboard-container > table > tr > td {\n\theight: 60px;\n}\n\n.admin-ui > .leaderboard-container > table > tr:nth-of-type(2n + 1) > td {\n\tbackground-color: var(--surface-secondary-color);\n}\n\n.admin-ui > .leaderboard-container > .navigation {\n\tdisplay: flex;\n\tmargin: 8px 0;\n}\n.admin-ui > .leaderboard-container > .navigation > input {\n\tflex-grow: 1;\n\ttext-align: center;\n}",""]);const l=o},9982:(t,e,n)=>{n.d(e,{default:()=>L});var a=n(1635),i=n(1312),d=n(5072),o=n.n(d),l=n(7825),c=n.n(l),r=n(7659),s=n.n(r),p=n(5056),u=n.n(p),m=n(540),h=n.n(m),f=n(1113),b=n.n(f),v=n(5768),C={};C.styleTagTransform=b(),C.setAttributes=u(),C.insert=s().bind(null,"head"),C.domAPI=c(),C.insertStyleElement=h();o()(v.A,C);v.A&&v.A.locals&&v.A.locals;var x,g,k,w=n(4784);x=new WeakMap,g=new WeakMap,k=new WeakMap;const E=class{constructor(t,e,n,d,o,l){x.set(this,void 0),g.set(this,void 0),k.set(this,void 0);const c=(0,i.sha256)(o),r=document.getElementById("ui");if(null==r)throw new Error("UI element not found");(0,a.GG)(this,x,r,"f"),(0,a.GG)(this,g,document.createElement("div"),"f"),(0,a.gn)(this,g,"f").className="admin-ui",(0,a.gn)(this,x,"f").appendChild((0,a.gn)(this,g,"f"));const s=document.createElement("div");s.className="tracks-list",(0,a.gn)(this,g,"f").appendChild(s);let p=null,u=1;async function m(n,a){p=n,u=a,E.value=a.toString(),b.innerHTML="";const i=document.createElement("tr");b.appendChild(i);const l=document.createElement("th");l.textContent="Name",i.appendChild(l);const r=document.createElement("th");r.textContent="Frames",i.appendChild(r);const s=document.createElement("th");s.textContent="Verified State",i.appendChild(s);const h=document.createElement("th");h.textContent="Action",i.appendChild(h);let f=[];if(null!=n)try{f=(await d.getLeaderboard(c,n,20*(a-1),20,!1)).entries}catch{}for(let i=0;i<20;i++){const l=document.createElement("tr");if(b.appendChild(l),f.length>i){const c=f[i],r=document.createElement("td");r.textContent=c.nickname,l.appendChild(r);const s=document.createElement("td");s.textContent=c.time.numberOfFrames.toString(),l.appendChild(s);const p=document.createElement("td");switch(c.verifiedState){case w.Y.Pending:p.textContent="Pending";break;case w.Y.Verified:p.textContent="Verified";break;case w.Y.Invalid:p.textContent="Invalid";break;case w.Y.InvalidDuplicate:p.textContent="Invalid Duplicate";break;case w.Y.InvalidManual:p.textContent="Invalid Manual";break;default:p.textContent="Unknown"}l.appendChild(p);const u=document.createElement("td"),h=document.createElement("button");h.className="button",h.textContent="Invalidate",h.addEventListener("click",(()=>{t.playUIClick(),e.showConfirm('Are you sure you want to invalidate "'+c.nickname+"\"'s leaderboard entry?","Cancel","Invalidate",null,(()=>{d.verifyRecordings(o,null,1,!1,[{id:c.id,verifiedState:w.Y.InvalidManual}]).then((()=>{m(n,a)})).catch((()=>{e.show("Failed to invalidate entry","Ok",null)}))}))})),u.appendChild(h),l.appendChild(u)}else l.appendChild(document.createElement("td")),l.appendChild(document.createElement("td")),l.appendChild(document.createElement("td")),l.appendChild(document.createElement("td"))}}const h=[];n.forEachTrack(((e,n)=>{const a=document.createElement("button");a.className="button",a.textContent=n.name,a.addEventListener("click",(()=>{t.playUIClick();for(const t of h)t.classList.remove("selected");a.classList.add("selected"),m(e,1)})),s.appendChild(a),h.push(a)}));const f=document.createElement("div");f.className="leaderboard-container",(0,a.gn)(this,g,"f").appendChild(f);const b=document.createElement("table");f.appendChild(b);const v=document.createElement("div");v.className="navigation",f.appendChild(v);const C=document.createElement("button");C.className="button",C.textContent="<",C.addEventListener("click",(()=>{t.playUIClick(),null!=p&&m(p,Math.max(1,u-1))})),v.appendChild(C);const E=document.createElement("input");E.type="text",E.min="1",E.value="1",E.addEventListener("change",(()=>{const t=parseInt(E.value,10);null!=p&&Number.isSafeInteger(t)&&t>=1&&m(p,t)})),v.appendChild(E);const y=document.createElement("button");y.className="button",y.textContent=">",y.addEventListener("click",(()=>{t.playUIClick(),null!=p&&m(p,u+1)})),v.appendChild(y),m(null,1);const I=document.createElement("button");I.className="button",I.textContent="Quit",I.addEventListener("click",(()=>{t.playUIClick(),l()})),(0,a.gn)(this,g,"f").appendChild(I),window.addEventListener("keydown",(0,a.GG)(this,k,(t=>{"Escape"==t.code&&(l(),t.preventDefault())}),"f"))}dispose(){(0,a.gn)(this,x,"f").removeChild((0,a.gn)(this,g,"f")),window.removeEventListener("keydown",(0,a.gn)(this,k,"f"))}};var y,I,G;y=new WeakMap,I=new WeakMap,G=new WeakMap;const L=class{constructor(t,e,n,i,d,o,l){y.set(this,void 0),I.set(this,void 0),G.set(this,void 0),(0,a.GG)(this,y,t,"f"),(0,a.GG)(this,I,e,"f"),(0,a.GG)(this,G,new E(t,n,i,d,o,l),"f")}dispose(){(0,a.gn)(this,G,"f").dispose()}update(t){(0,a.gn)(this,y,"f").update(t,!1,(0,a.gn)(this,I,"f"))}}}}]);