"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[124],{2346:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(1601),s=n.n(i),o=n(6314),a=n.n(o)()(s());a.push([t.id,".editor-side-toolbar-ui {\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: absolute;\n\tbottom: 40px;\n\tleft: var(--safe-area-left);\n}\n.editor-side-toolbar-ui.touch {\n\tbottom: 176px;\n}\n\n.editor-side-toolbar-ui > .accordion {\n\tdisplay: flex;\n\tflex-direction: row;\n\twidth: 100px;\n\toverflow: hidden; /* Use hidden if clip is not supported */\n\toverflow: clip;\n\ttransition: width 0.25s ease-out;\n}\n.editor-side-toolbar-ui.touch > .accordion {\n\twidth: 120px;\n}\n.editor-side-toolbar-ui > .accordion.open {\n\twidth: auto;\n}\n\n.editor-side-toolbar-ui button {\n\tposition: relative;\n\tflex-shrink: 0;\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 100px;\n\theight: 100px;\n\tbackground-color: rgba(17, 32, 82, 0.48);\n\tborder: none;\n\tpointer-events: auto;\n\tcursor: pointer;\n\ttransition: background-color 0.25s ease-out;\n}\n.editor-side-toolbar-ui button:hover {\n\tbackground-color: rgba(37, 54, 105, 0.48);\n}\n.editor-side-toolbar-ui > .accordion > button:not(:first-of-type) {\n\tbackground-color: rgba(17, 32, 82, 0.35);\n}\n.editor-side-toolbar-ui > .accordion > button:not(:first-of-type):hover {\n\tbackground-color: rgba(37, 54, 105, 0.35);\n}\n.editor-side-toolbar-ui > .accordion > button:not(:first-of-type).selected {\n\tbackground-color: rgba(17, 32, 82, 0.55);\n}\n.editor-side-toolbar-ui > .accordion > button:not(:first-of-type):active {\n\tbackground-color: rgba(17, 32, 82, 0.6);\n}\n@media (hover: none) {\n\t.editor-side-toolbar-ui button:hover {\n\t\tbackground-color: rgba(17, 32, 82, 0.48);\n\t}\n}\n.editor-side-toolbar-ui button:active {\n\tbackground-color: rgba(17, 32, 82, 0.6);\n\ttransition: none;\n}\n\n.editor-side-toolbar-ui.touch button {\n\twidth: 120px;\n\theight: 120px;\n}\n\n.editor-side-toolbar-ui button img {\n\tmargin: 0;\n\tpadding: 20%;\n\tvertical-align: top;\n\twidth: 100%;\n    height: 100%;\n\tbox-sizing: border-box;\n\tpointer-events: none;\n\ttransition: transform 0.25s ease-out;\n\tfilter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.5));\n}\n.editor-side-toolbar-ui button:active img {\n\ttransition: none;\n\ttransform: scale(0.9);\n}\n\n.editor-side-toolbar-ui button.rotate > span {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 1px;\n\twidth: 100%;\n\theight: 100%;\n\tcolor: var(--text-color);\n\tfont-size: 16px;\n\ttext-shadow: 0 0 2px #000;\n\tpointer-events: none;\n\ttransition: transform 0.25s ease-out;\n}\n.editor-side-toolbar-ui button.rotate:active > span {\n\ttransition: none;\n\ttransform: scale(0.9);\n}\n",""]);const r=a},4124:(t,e,n)=>{n.d(e,{default:()=>Ci});var i=n(1635),s=n(5072),o=n.n(s),a=n(7825),r=n.n(a),h=n(7659),l=n.n(h),c=n(5056),d=n.n(c),g=n(540),f=n.n(g),p=n(1113),u=n.n(p),m=n(6057),v={};v.styleTagTransform=u(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=f();o()(m.A,v);m.A&&m.A.locals&&m.A.locals;var w=n(4922),b=n(7024);const k=new w.Zcv,G=new w.tBo,x=new w.I9Y,y=new w.Pq0;class M extends b.N{constructor(t,e){super(t,e),this.screenSpacePanning=!1,this.mouseButtons={LEFT:w.kBv.PAN,MIDDLE:w.kBv.DOLLY,RIGHT:w.kBv.ROTATE},this.touches={ONE:w.wtR.PAN,TWO:w.wtR.DOLLY_ROTATE},this._panWorldStart=new w.Pq0}_handleMouseDownPan(t){if(super._handleMouseDownPan(t),this._panOffset.set(0,0,0),!0===this.screenSpacePanning)return;k.setFromNormalAndCoplanarPoint(this.object.up,this.target);const e=this.domElement.getBoundingClientRect();x.x=(t.clientX-e.left)/e.width*2-1,x.y=-(t.clientY-e.top)/e.height*2+1,G.setFromCamera(x,this.object),G.ray.intersectPlane(k,this._panWorldStart)}_handleMouseMovePan(t){if(!0===this.screenSpacePanning)return void super._handleMouseMovePan(t);const e=this.domElement.getBoundingClientRect();x.x=(t.clientX-e.left)/e.width*2-1,x.y=-(t.clientY-e.top)/e.height*2+1,G.setFromCamera(x,this.object),G.ray.intersectPlane(k,y)&&(y.sub(this._panWorldStart),this._panOffset.copy(y).negate(),this.update())}}class A extends w.aHM{constructor(t){super(t)}load(t,e,n,i){const s=this,o=new w.Y9S(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(t){const n=s.parse(JSON.parse(t));e&&e(n)}),n,i)}parse(t){return new E(t)}}class E{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100,n="ltr"){const i=[],s=function(t,e,n,i){const s=Array.from(t),o=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,r=[];let h=0,l=0;"rtl"!=i&&"tb"!=i||s.reverse();for(let t=0;t<s.length;t++){const e=s[t];if("\n"===e)h=0,l-=a;else{const t=C(e,o,h,l,n);"tb"==i?(h=0,l+=n.ascender*o):h+=t.offsetX,r.push(t.path)}}return r}(t,e,this.data,n);for(let t=0,e=s.length;t<e;t++)i.push(...s[t].toShapes());return i}}function C(t,e,n,i,s){const o=s.glyphs[t]||s.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+s.familyName+".");const a=new w.Ld9;let r,h,l,c,d,g,f,p;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let s=0,o=t.length;s<o;){switch(t[s++]){case"m":r=t[s++]*e+n,h=t[s++]*e+i,a.moveTo(r,h);break;case"l":r=t[s++]*e+n,h=t[s++]*e+i,a.lineTo(r,h);break;case"q":l=t[s++]*e+n,c=t[s++]*e+i,d=t[s++]*e+n,g=t[s++]*e+i,a.quadraticCurveTo(d,g,l,c);break;case"b":l=t[s++]*e+n,c=t[s++]*e+i,d=t[s++]*e+n,g=t[s++]*e+i,f=t[s++]*e+n,p=t[s++]*e+i,a.bezierCurveTo(d,g,f,p,l,c)}}}return{offsetX:o.ha*e,path:a}}var W,P,L,z,N,S=n(8971),T=n(5735);class q{constructor(t){P.set(this,void 0),L.set(this,[]),z.set(this,[]),(0,i.GG)(this,P,t,"f")}dispose(){for(const t of(0,i.gn)(this,L,"f")){if(Array.isArray(t.material))for(const e of t.material)e.dispose();else t.material.dispose();t.geometry.dispose(),(0,i.gn)(this,P,"f").scene.remove(t)}(0,i.gn)(this,L,"f").length=0}refresh(t){if(null==(0,i.gn)(W,W,"f",N))throw new Error("Font is not loaded yet");const e=t.getCheckpoints();let n=!1;if(e.length==(0,i.gn)(this,z,"f").length)for(let t=0;t<e.length;t++){const s=e[t],o=(0,i.gn)(this,z,"f")[t];if(s.x!=o.x||s.y!=o.y||s.z!=o.z||s.rotation!=o.rotation||s.rotationAxis!=o.rotationAxis||s.type!=o.type||s.checkpointOrder!=o.checkpointOrder){n=!0;break}}else n=!0;if(n){this.dispose(),(0,i.GG)(this,z,e,"f");const t=new w.V9B({color:16777215});for(const n of e){const e=T.hT(n.rotation,n.rotationAxis),s=new w.Pq0(...n.detector.center).add(new w.Pq0(0,-1.3,0)).applyQuaternion(e);s.add(new w.Pq0(n.x*S.A.partSize,n.y*S.A.partSize,n.z*S.A.partSize));const o=(0,i.gn)(W,W,"f",N).generateShapes((n.checkpointOrder+1).toString(),4),a=new w.MSw(o);a.computeBoundingBox();const r=a.boundingBox;if(null==r)throw new Error("Bounding box is null");const h=-.5*(r.max.x-r.min.x);a.translate(h,0,0);const l=new w.eaF(a,t);l.position.copy(s),l.quaternion.copy(e),(0,i.gn)(this,P,"f").scene.add(l),(0,i.gn)(this,L,"f").push(l);const c=new w.eaF(a,t);c.position.copy(s),c.quaternion.copy(e).multiply((new w.PTz).setFromEuler(new w.O9p(0,Math.PI,0))),(0,i.gn)(this,P,"f").scene.add(c),(0,i.gn)(this,L,"f").push(c)}}}static initResources(){return null==(0,i.gn)(this,W,"f",N)?new Promise(((t,e)=>{(new A).load("forced_square.json",(e=>{(0,i.GG)(this,W,e,"f",N),t()}),void 0,e)})):Promise.resolve()}}W=q,P=new WeakMap,L=new WeakMap,z=new WeakMap,N={value:null};const D=q;var O=n(7296),I={};I.styleTagTransform=u(),I.setAttributes=d(),I.insert=l().bind(null,"head"),I.domAPI=r(),I.insertStyleElement=f();o()(O.A,I);O.A&&O.A.locals&&O.A.locals;var B,_,U,R,H,F,K,Y,V,Z;_=new WeakMap,U=new WeakMap,R=new WeakMap,H=new WeakMap,F=new WeakMap,K=new WeakMap,Y=new WeakMap,B=new WeakSet,V=function(){(0,i.gn)(this,F,"f").textContent=(0,i.gn)(this,U,"f").get("Checkpoint order")+": "+(this.checkpointOrder+1).toString()},Z=function(t){const e=t.getCheckpointOrders(),n=new Set;for(const t of e)n.add(t);for(let t=0;t<65535;t++)if(!n.has(t))return t;return 65535};const X=class{constructor(t,e,n,s){B.add(this),_.set(this,void 0),U.set(this,void 0),R.set(this,void 0),H.set(this,void 0),F.set(this,void 0),K.set(this,0),Y.set(this,void 0),(0,i.GG)(this,_,t,"f"),(0,i.GG)(this,U,e,"f"),(0,i.GG)(this,R,s,"f"),(0,i.GG)(this,H,document.createElement("div"),"f"),(0,i.gn)(this,H,"f").className="hidden",t.appendChild((0,i.gn)(this,H,"f")),(0,i.gn)(this,R,"f").addChangeListener((0,i.GG)(this,Y,(t=>{t?(0,i.gn)(this,H,"f").classList.add("touch"):(0,i.gn)(this,H,"f").classList.remove("touch")}),"f"));const o=document.createElement("div");o.className="buttons",(0,i.gn)(this,H,"f").appendChild(o);const a=document.createElement("button");a.addEventListener("click",(()=>{n.playUIClick(),this.checkpointOrder++})),a.addEventListener("contextmenu",(t=>{t.preventDefault()})),o.appendChild(a);const r=document.createElement("img");r.src="images/arrow_up.svg",a.appendChild(r);const h=document.createElement("button");h.addEventListener("click",(()=>{n.playUIClick(),this.checkpointOrder--})),h.addEventListener("contextmenu",(t=>{t.preventDefault()})),o.appendChild(h);const l=document.createElement("img");l.src="images/arrow_down.svg",h.appendChild(l),(0,i.GG)(this,F,document.createElement("p"),"f"),(0,i.gn)(this,H,"f").appendChild((0,i.gn)(this,F,"f")),(0,i.gn)(this,B,"m",V).call(this)}dispose(){(0,i.gn)(this,_,"f").removeChild((0,i.gn)(this,H,"f")),(0,i.gn)(this,R,"f").removeChangeListener((0,i.gn)(this,Y,"f"))}hide(){(0,i.gn)(this,H,"f").classList.add("hidden"),(0,i.gn)(this,H,"f").classList.remove("editor-checkpoint-order-ui")}show(){(0,i.gn)(this,H,"f").classList.remove("hidden"),(0,i.gn)(this,H,"f").classList.add("editor-checkpoint-order-ui")}reset(){this.checkpointOrder=0}get checkpointOrder(){return(0,i.gn)(this,K,"f")}set checkpointOrder(t){(0,i.GG)(this,K,Math.max(0,Math.min(65535,t)),"f"),(0,i.gn)(this,B,"m",V).call(this)}setFromExistingCheckpoints(t){this.checkpointOrder=(0,i.gn)(this,B,"m",Z).call(this,t)}};var j=n(5298),J={};J.styleTagTransform=u(),J.setAttributes=d(),J.insert=l().bind(null,"head"),J.domAPI=r(),J.insertStyleElement=f();o()(j.A,J);j.A&&j.A.locals&&j.A.locals;var Q,$,tt,et,nt,it,st,ot,at;Q=new WeakMap,$=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,it=new WeakMap,st=new WeakMap,ot=new WeakMap,at=new WeakMap;const rt=class{constructor(t,e,n,s,o){Q.set(this,void 0),$.set(this,void 0),tt.set(this,void 0),et.set(this,void 0),nt.set(this,void 0),it.set(this,void 0),st.set(this,!1),ot.set(this,!1),at.set(this,void 0),(0,i.GG)(this,Q,t,"f"),(0,i.GG)(this,$,e,"f"),(0,i.GG)(this,tt,n,"f"),(0,i.GG)(this,et,document.createElement("div"),"f"),(0,i.gn)(this,et,"f").className="editor-height-selector-ui",t.appendChild((0,i.gn)(this,et,"f")),(0,i.gn)(this,tt,"f").addChangeListener((0,i.GG)(this,it,(t=>{t?(0,i.gn)(this,et,"f").classList.add("touch"):(0,i.gn)(this,et,"f").classList.remove("touch")}),"f")),(0,i.GG)(this,nt,document.createElement("p"),"f"),(0,i.gn)(this,et,"f").appendChild((0,i.gn)(this,nt,"f"));const a=document.createElement("div");a.className="buttons",(0,i.gn)(this,et,"f").appendChild(a);const r=document.createElement("button");r.addEventListener("pointerdown",(()=>{if(s(),!(0,i.gn)(this,st,"f")){(0,i.GG)(this,st,!0,"f");const t=()=>{(0,i.gn)(this,st,"f")&&(s(),setTimeout(t,50))};setTimeout(t,500)}})),r.addEventListener("contextmenu",(t=>{t.preventDefault()})),a.appendChild(r);const h=document.createElement("img");h.src="images/arrow_up.svg",r.appendChild(h);const l=document.createElement("button");l.addEventListener("pointerdown",(()=>{if(o(),!(0,i.gn)(this,ot,"f")){(0,i.GG)(this,ot,!0,"f");const t=()=>{(0,i.gn)(this,ot,"f")&&(o(),setTimeout(t,50))};setTimeout(t,500)}})),l.addEventListener("contextmenu",(t=>{t.preventDefault()})),a.appendChild(l);const c=document.createElement("img");c.src="images/arrow_down.svg",l.appendChild(c),(0,i.GG)(this,at,(()=>{(0,i.GG)(this,st,!1,"f"),(0,i.GG)(this,ot,!1,"f")}),"f"),window.addEventListener("pointerup",(0,i.gn)(this,at,"f"))}refresh(t){(0,i.gn)(this,nt,"f").textContent=(0,i.gn)(this,$,"f").get("Height")+": "+t.toString()}dispose(){(0,i.gn)(this,Q,"f").removeChild((0,i.gn)(this,et,"f")),(0,i.gn)(this,tt,"f").removeChangeListener((0,i.gn)(this,it,"f")),window.removeEventListener("pointerup",(0,i.gn)(this,at,"f"))}};var ht=n(2825),lt=n(5818),ct=n(579),dt=n(4183),gt=n(2203),ft=n(8566);var pt=n(4839),ut=n(7129),mt=n(2247),vt=n(2346),wt={};wt.styleTagTransform=u(),wt.setAttributes=d(),wt.insert=l().bind(null,"head"),wt.domAPI=r(),wt.insertStyleElement=f();o()(vt.A,wt);vt.A&&vt.A.locals&&vt.A.locals;var bt,kt,Gt,xt,yt,Mt,At,Et;bt=new WeakMap,kt=new WeakMap,Gt=new WeakMap,xt=new WeakMap,yt=new WeakMap,Mt=new WeakMap,At=new WeakMap,Et=new WeakMap;const Ct=class{constructor(t,e,n,s,o,a,r){bt.set(this,void 0),kt.set(this,void 0),Gt.set(this,void 0),xt.set(this,void 0),yt.set(this,void 0),Mt.set(this,void 0),At.set(this,[]),Et.set(this,void 0),(0,i.GG)(this,bt,t,"f"),(0,i.GG)(this,kt,n,"f"),(0,i.GG)(this,Gt,document.createElement("div"),"f"),(0,i.gn)(this,Gt,"f").className="editor-side-toolbar-ui",(0,i.gn)(this,bt,"f").appendChild((0,i.gn)(this,Gt,"f"));let h=!1;const l=document.createElement("button"),c=document.createElement("img");c.src="images/overlapping_disabled.svg",l.appendChild(c),l.addEventListener("click",(()=>{e.playUIClick(),h=!h,c.src=h?"images/overlapping_enabled.svg":"images/overlapping_disabled.svg",s(h)})),(0,i.gn)(this,Gt,"f").appendChild(l);let d=!0;const g=document.createElement("button"),f=document.createElement("img");f.src="images/grid_large.svg",g.appendChild(f),g.addEventListener("click",(()=>{e.playUIClick(),d=!d,f.src=d?"images/grid_large.svg":"images/grid_small.svg",o(d)})),(0,i.gn)(this,Gt,"f").appendChild(g);const p=document.createElement("div");p.className="accordion",(0,i.gn)(this,Gt,"f").appendChild(p),(0,i.GG)(this,Mt,document.createElement("button"),"f"),(0,i.gn)(this,Mt,"f").innerHTML='<img src="images/rotation_axis_y_positive.svg">',(0,i.gn)(this,Mt,"f").addEventListener("click",(()=>{e.playUIClick(),p.classList.toggle("open");for(const t of p.children)t!=(0,i.gn)(this,Mt,"f")&&t instanceof HTMLButtonElement&&(p.classList.contains("open")?(t.inert=!1,t.tabIndex=0):(t.inert=!0,t.tabIndex=-1))})),p.appendChild((0,i.gn)(this,Mt,"f"));for(const t of[ft.A.YPositive,ft.A.YNegative,ft.A.XPositive,ft.A.XNegative,ft.A.ZPositive,ft.A.ZNegative]){const n=document.createElement("button");switch(n.inert=!0,n.tabIndex=-1,t){case ft.A.YPositive:n.innerHTML='<img src="images/rotation_axis_y_positive.svg">';break;case ft.A.YNegative:n.innerHTML='<img src="images/rotation_axis_y_negative.svg">';break;case ft.A.XPositive:n.innerHTML='<img src="images/rotation_axis_x_positive.svg">';break;case ft.A.XNegative:n.innerHTML='<img src="images/rotation_axis_x_negative.svg">';break;case ft.A.ZPositive:n.innerHTML='<img src="images/rotation_axis_z_positive.svg">';break;case ft.A.ZNegative:n.innerHTML='<img src="images/rotation_axis_z_negative.svg">'}n.addEventListener("click",(()=>{e.playUIClick(),a(t)})),t==ft.A.YPositive&&n.classList.add("selected"),p.appendChild(n),(0,i.gn)(this,At,"f").push([t,n])}const u=document.createElement("button");u.className="rotate",u.addEventListener("click",(()=>{e.playUIClick(),r()})),(0,i.gn)(this,Gt,"f").appendChild(u),(0,i.GG)(this,xt,document.createElement("div"),"f"),(0,i.gn)(this,xt,"f").innerHTML='<img src="images/rotate.svg">',u.appendChild((0,i.gn)(this,xt,"f")),(0,i.GG)(this,yt,document.createElement("span"),"f"),(0,i.gn)(this,yt,"f").textContent="0°",u.appendChild((0,i.gn)(this,yt,"f")),n.addChangeListener((0,i.GG)(this,Et,(t=>{t?(0,i.gn)(this,Gt,"f").classList.add("touch"):(0,i.gn)(this,Gt,"f").classList.remove("touch")}),"f"))}dispose(){(0,i.gn)(this,bt,"f").removeChild((0,i.gn)(this,Gt,"f")),(0,i.gn)(this,kt,"f").removeChangeListener((0,i.gn)(this,Et,"f"))}set rotation(t){(0,i.gn)(this,xt,"f").style.transform=`rotate(${(90*-t).toString()}deg)`,(0,i.gn)(this,yt,"f").textContent=(90*t).toString()+"°"}set rotationAxis(t){let e;switch(t){case ft.A.YPositive:e="images/rotation_axis_y_positive.svg";break;case ft.A.YNegative:e="images/rotation_axis_y_negative.svg";break;case ft.A.XPositive:e="images/rotation_axis_x_positive.svg";break;case ft.A.XNegative:e="images/rotation_axis_x_negative.svg";break;case ft.A.ZPositive:e="images/rotation_axis_z_positive.svg";break;case ft.A.ZNegative:e="images/rotation_axis_z_negative.svg"}(0,i.gn)(this,Mt,"f").innerHTML="";const n=document.createElement("img");n.src=e,(0,i.gn)(this,Mt,"f").appendChild(n);for(const[e,n]of(0,i.gn)(this,At,"f"))e==t?n.classList.add("selected"):n.classList.remove("selected")}hide(){(0,i.gn)(this,Gt,"f").classList.add("hidden")}show(){(0,i.gn)(this,Gt,"f").classList.remove("hidden")}};var Wt=n(9242),Pt={};Pt.styleTagTransform=u(),Pt.setAttributes=d(),Pt.insert=l().bind(null,"head"),Pt.domAPI=r(),Pt.insertStyleElement=f();o()(Wt.A,Pt);Wt.A&&Wt.A.locals&&Wt.A.locals;var Lt,zt,Nt;Lt=new WeakMap,zt=new WeakMap,Nt=new WeakMap;const St=class{constructor(t,e,n,s,o,a,r,h){Lt.set(this,void 0),zt.set(this,void 0),Nt.set(this,void 0);const l=document.getElementById("ui");if(null==l)throw new Error("UI element not found");(0,i.GG)(this,Lt,l,"f"),(0,i.GG)(this,zt,document.createElement("div"),"f"),(0,i.gn)(this,zt,"f").className="editor-help-ui",(0,i.gn)(this,Lt,"f").appendChild((0,i.gn)(this,zt,"f"));const c=document.createElement("div");c.className="background",(0,i.gn)(this,zt,"f").appendChild(c);const d=document.createElement("section");d.className="container",(0,i.gn)(this,zt,"f").appendChild(d);const g=document.createElement("h1");g.textContent=e.get("How to use the editor"),d.appendChild(g);const f=document.createElement("section");f.className="content",d.appendChild(f);const p=document.createElement("h2");function u(t){const i=n.getKeyBindings(t).filter((t=>null!=t));return 0==i.length?e.get("Not set"):i.map((t=>"["+t+"]")).join(" "+e.get("or")+" ")}p.textContent=e.get("Camera controls"),f.appendChild(p);let m="";s.touchEnabled?(m+=e.get("The camera can be moved by dragging with one finger. Rotate the camera by dragging with two fingers. Zoom in and out by pinching.")+"\n\n",m+=e.get("The edited height can be changed by using the height selection in the bottom left corner.")):(m+=e.get("The camera can be moved by right clicking and dragging the mouse. Rotate the camera by clicking the middle mouse button (mouse wheel) or holding the control key and right clicking and dragging the mouse. Zoom in and out by scrolling the mouse wheel.")+"\n\n",m+=e.get("Alternatively, the camera can also be controlled using the following keyboard keys:")+"\n\n",m+="\t"+e.get("Move forwards:")+" "+u(lt.A.EditorMoveForwards)+"\n",m+="\t"+e.get("Move backwards:")+" "+u(lt.A.EditorMoveBackwards)+"\n",m+="\t"+e.get("Move left:")+" "+u(lt.A.EditorMoveLeft)+"\n",m+="\t"+e.get("Move right:")+" "+u(lt.A.EditorMoveRight)+"\n",m+="\t"+e.get("Rotate left:")+" "+u(lt.A.EditorRotateViewLeft)+"\n",m+="\t"+e.get("Rotate right:")+" "+u(lt.A.EditorRotateViewRight)+"\n\n",m+=e.get("The edited height can be changed either by using the height selection in the bottom left corner, or holding the shift key and scrolling the mouse wheel. Alternatively, you can use the following keyboard keys:")+"\n\n",m+="\t"+e.get("Move up:")+" "+u(lt.A.EditorMoveUp)+"\n",m+="\t"+e.get("Move down:")+" "+u(lt.A.EditorMoveDown));const v=document.createElement("p");v.textContent=m,f.appendChild(v);const w=document.createElement("h2");w.textContent=e.get("Editing"),f.appendChild(w);let b="";s.touchEnabled?(b+=e.get("Track parts can be selected in the menu on the right after which they can be placed by tapping on the screen.")+"\n\n",b+=e.get("The selected part can then be rotated by tapping the rotate button in the bottom left corner.")+"\n\n",b+=e.get("Track parts can be deleted by using the delete tool in the right side menu.")):(b+=e.get("Track parts can be selected in the menu on the right after which they can be placed by left clicking with the mouse.")+"\n\n",b+=e.get("Alternatively, the track part currently hovered by the mouse can be selected with the following keyboard shortcut:")+" "+u(lt.A.EditorPick)+"\n\n",b+=e.get("The selected part can then be rotated using the following keyboard shortcut:")+" "+u(lt.A.EditorRotatePart)+"\n\n",b+=e.get("Track parts can be deleted by using the delete tool in the right side menu or by holding the following key:")+" "+u(lt.A.EditorDelete));const k=document.createElement("p");k.textContent=b,f.appendChild(k);const G=document.createElement("h2");G.textContent=e.get("Starting points, checkpoints and the finish line"),f.appendChild(G);let x=e.get("Starting points, checkpoints and finish lines can all be selected in the uppermost category in the right side menu.")+"\n\n";x+=e.get("Each track must have at least one starting point. If there are multiple starting points, the last placed one will be used.")+"\n\n",x+=e.get("Checkpoints should be placed between the starting point and the finish line. When a checkpoint track part is selected there will be a tool in the bottom right to select the order of the checkpoint. This determines the order in which the checkpoints must be passed before driving to the finish line. Notice that it is possible to have multiple checkpoints with the same checkpoint order.")+"\n\n",x+=e.get("The finish line is where the track ends but will only become active after all checkpoints have been passed. It is also possible to have multiple finish lines.");const y=document.createElement("p");y.textContent=x,f.appendChild(y);const M=document.createElement("div");M.className="part-images",f.appendChild(M);const A=document.createElement("div");M.appendChild(A);const E=document.createElement("img");E.className="loading",o.then((t=>{E.className="",E.src=t})).catch((t=>{console.error(t)})),A.appendChild(E);const C=document.createElement("span");C.textContent=e.get("Starting point"),A.appendChild(C);const W=document.createElement("div");M.appendChild(W);const P=document.createElement("img");P.className="loading",a.then((t=>{P.className="",P.src=t})).catch((t=>{console.error(t)})),W.appendChild(P);const L=document.createElement("span");L.textContent=e.get("Checkpoint"),W.appendChild(L);const z=document.createElement("div");M.appendChild(z);const N=document.createElement("img");N.className="loading",r.then((t=>{N.className="",N.src=t})).catch((t=>{console.error(t)})),z.appendChild(N);const S=document.createElement("span");S.textContent=e.get("Finish line"),z.appendChild(S);const T=document.createElement("h2");T.textContent=e.get("Exporting the track"),f.appendChild(T);const q=e.get("When the track is finished, a name for the track can be entered in top left after which the track can be exported using the export button. This will reveal a track code which can be sent to other users so they can import and play the track.")+"\n\n",D=document.createElement("p");D.textContent=q,f.appendChild(D);const O=document.createElement("div");O.className="button-wrapper",d.appendChild(O);const I=document.createElement("button");I.className="button",I.innerHTML='<img class="button-icon" src="images/cancel.svg"> ',I.append(document.createTextNode(e.get("Close"))),I.addEventListener("click",(()=>{t.playUIClick(),h()})),O.appendChild(I),window.addEventListener("keydown",(0,i.GG)(this,Nt,(t=>{"Escape"==t.code&&(h(),t.preventDefault())}),"f"))}dispose(){(0,i.gn)(this,Lt,"f").removeChild((0,i.gn)(this,zt,"f")),window.removeEventListener("keydown",(0,i.gn)(this,Nt,"f"))}};var Tt=n(4512),qt={};qt.styleTagTransform=u(),qt.setAttributes=d(),qt.insert=l().bind(null,"head"),qt.domAPI=r(),qt.insertStyleElement=f();o()(Tt.A,qt);Tt.A&&Tt.A.locals&&Tt.A.locals;var Dt,Ot,It,Bt,_t=n(7680),Ut=n(5169);Dt=new WeakMap,Ot=new WeakMap,It=new WeakMap,Bt=new WeakMap;const Rt=class{constructor(t,e,n,s,o,a,r,h){Dt.set(this,void 0),Ot.set(this,void 0),It.set(this,null),Bt.set(this,void 0);const l=document.getElementById("ui");if(null==l)throw new Error("UI element not found");(0,i.GG)(this,Dt,l,"f"),(0,i.GG)(this,Ot,document.createElement("div"),"f"),(0,i.gn)(this,Ot,"f").className="editor-track-settings-ui",(0,i.gn)(this,Dt,"f").appendChild((0,i.gn)(this,Ot,"f"));const c=document.createElement("div");c.className="background",(0,i.gn)(this,Ot,"f").appendChild(c);const d=document.createElement("section");d.className="container",(0,i.gn)(this,Ot,"f").appendChild(d);const g=document.createElement("h1");g.textContent=e.get("Track settings"),d.appendChild(g);const f=document.createElement("section");f.className="content",d.appendChild(f);const p=document.createElement("div");p.className="setting",f.appendChild(p);const u=document.createElement("label");u.className="title",u.append(document.createTextNode(e.get("Track name"))),p.appendChild(u);const m=document.createElement("input");m.type="text",m.maxLength=64,m.spellcheck=!1,m.value=n??"",m.addEventListener("input",(()=>{0==m.value.trim().length?(null!=(0,i.gn)(this,It,"f")&&((0,i.gn)(this,It,"f").disabled=!0),p.classList.add("error")):(null!=(0,i.gn)(this,It,"f")&&((0,i.gn)(this,It,"f").disabled=!1),p.classList.remove("error"))})),p.appendChild(m),null!=n&&0!=n.length||(p.classList.add("error"),m.focus());const v=document.createElement("div");v.className="setting",f.appendChild(v);const w=document.createElement("label");w.className="title",w.append(document.createTextNode(e.get("Author"))),v.appendChild(w);const b=document.createElement("input");b.type="text",b.maxLength=64,b.spellcheck=!1,b.value=s??"",b.placeholder=e.get("Unknown"),b.addEventListener("input",(()=>{const t=b.value.trim();s=0==t.length?null:t})),v.appendChild(b);const k=document.createElement("div");k.className="setting",f.appendChild(k);const G=document.createElement("div");G.className="title",G.append(document.createTextNode(e.get("Environment"))),k.appendChild(G);const x=document.createElement("button");x.className="button environment-button",o.environment==Ut.A.Summer&&(x.classList.add("selected"),x.disabled=!0),x.innerHTML='<img src="images/summer.svg"> ',x.append(document.createTextNode(e.get("Summer"))),x.addEventListener("click",(()=>{t.playUIClick(),a(Ut.A.Summer),x.classList.add("selected"),y.classList.remove("selected"),M.classList.remove("selected"),x.disabled=!0,y.disabled=!1,M.disabled=!1})),k.appendChild(x);const y=document.createElement("button");y.className="button environment-button",o.environment==Ut.A.Winter&&(y.classList.add("selected"),y.disabled=!0),y.innerHTML='<img src="images/winter.svg"> ',y.append(document.createTextNode(e.get("Winter"))),y.addEventListener("click",(()=>{t.playUIClick(),a(Ut.A.Winter),x.classList.remove("selected"),y.classList.add("selected"),M.classList.remove("selected"),x.disabled=!1,y.disabled=!0,M.disabled=!1})),k.appendChild(y);const M=document.createElement("button");M.className="button environment-button",o.environment==Ut.A.Desert&&(M.classList.add("selected"),M.disabled=!0),M.innerHTML='<img src="images/desert.svg"> ',M.append(document.createTextNode(e.get("Desert"))),M.addEventListener("click",(()=>{t.playUIClick(),a(Ut.A.Desert),x.classList.remove("selected"),y.classList.remove("selected"),M.classList.add("selected"),x.disabled=!1,y.disabled=!1,M.disabled=!0})),k.appendChild(M);const A=document.createElement("div");A.className="setting",f.appendChild(A);const E=document.createElement("label");E.className="title",E.append(document.createTextNode(e.get("Sun direction")+" (")),A.appendChild(E);const C=document.createTextNode(o.sunDirection.toDegrees().toString());E.appendChild(C),E.append(document.createTextNode("°)"));let W=null;const P=document.createElement("input");P.type="range",P.min="0",P.max="360",P.step="2",P.value=o.sunDirection.toDegrees().toString(),P.addEventListener("input",(()=>{o.sunDirection=_t.A.fromDegrees(parseInt(P.value,10)),C.textContent=P.value,W??(W=setTimeout((()=>{o.generateMeshes(),W=null}),100))})),A.appendChild(P);const L=document.createElement("div");L.className="button-wrapper",d.appendChild(L);const z=document.createElement("button");z.className="button",z.innerHTML='<img class="button-icon" src="images/cancel.svg"> ',z.append(document.createTextNode(e.get("Close"))),z.addEventListener("click",(()=>{t.playUIClick();const e=m.value.trim();0==e.length?r(null,s):r(e,s)})),L.appendChild(z),null!=h&&((0,i.GG)(this,It,document.createElement("button"),"f"),(0,i.gn)(this,It,"f").disabled=null==n||0==n.length,(0,i.gn)(this,It,"f").className="button",(0,i.gn)(this,It,"f").innerHTML='<img class="button-icon" src="images/save.svg"> ',(0,i.gn)(this,It,"f").append(document.createTextNode(e.get("Save"))),(0,i.gn)(this,It,"f").addEventListener("click",(()=>{t.playUIClick();const e=m.value.trim();0==e.length||h(e,s)})),L.appendChild((0,i.gn)(this,It,"f"))),window.addEventListener("keydown",(0,i.GG)(this,Bt,(t=>{if("Escape"==t.code){const e=m.value.trim();0==e.length?r(null,s):r(e,s),t.preventDefault()}}),"f"))}dispose(){(0,i.gn)(this,Dt,"f").removeChild((0,i.gn)(this,Ot,"f")),window.removeEventListener("keydown",(0,i.gn)(this,Bt,"f"))}};var Ht=n(9437);let Ft=null,Kt=null,Yt=null,Vt=null;async function Zt(t){for(;null!=Vt;)await Vt;const e=function(t){return new Promise((e=>{setTimeout((()=>{if(null==Ft||null==Kt||null==Yt){const t=document.createElement("canvas");t.width=128,t.height=128,Ft=new Ht.JeP({canvas:t,alpha:!0,preserveDrawingBuffer:!0,antialias:!0}),Ft.outputColorSpace=w.Zr2,Yt=new w.Z58,Kt=new w.qUd(-1,1,1,-1,.5,ht.A.maxViewDistance),Kt.position.set(1e3,1e3,1e3),Kt.lookAt(0,0,0),Yt.add(Kt);const e=new w.ZyN(16777215,4.7);e.position.set(8,10,10),Yt.add(e)}t.geometry.computeBoundingSphere();const n=t.geometry.boundingSphere?.clone();if(null==n)throw new Error("Bounding sphere is null");Kt.zoom=1/n.radius*.9,Kt.position.copy(n.center),Kt.position.addScalar(1e3),Kt.updateProjectionMatrix(),Ft.clear(),Yt.add(t),Ft.render(Yt,Kt),Yt.remove(t),e(Ft.domElement.toDataURL())}),25)}))}(t);let n;Vt=e;try{n=await e}finally{Vt=null}return n}var Xt,jt,Jt,Qt,$t,te,ee,ne,ie,se,oe,ae,re,he,le,ce,de,ge,fe,pe,ue,me,ve,we,be,ke,Ge,xe,ye,Me,Ae,Ee,Ce,We,Pe,Le,ze,Ne,Se,Te,qe,De,Oe,Ie,Be,_e,Ue,Re,He,Fe,Ke,Ye,Ve,Ze,Xe,je,Je,Qe,$e,tn,en,nn,sn,on,an,rn,hn,ln,cn,dn,gn,fn,pn,un,mn,vn,wn,bn,kn,Gn,xn,yn,Mn,An,En,Cn,Wn,Pn,Ln,zn,Nn,Sn,Tn,qn,Dn,On,In,Bn,_n,Un,Rn,Hn,Fn,Kn,Yn,Vn,Zn,Xn,jn,Jn,Qn,$n,ti,ei,ni,ii,si,oi,ai,ri,hi,li,ci,di,gi,fi,pi,ui,mi,vi=n(6223),wi=n(5302);jt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,te=new WeakMap,ee=new WeakMap,ne=new WeakMap,ie=new WeakMap,se=new WeakMap,oe=new WeakMap,ae=new WeakMap,re=new WeakMap,he=new WeakMap,le=new WeakMap,ce=new WeakMap,de=new WeakMap,ge=new WeakMap,fe=new WeakMap,pe=new WeakMap,ue=new WeakMap,me=new WeakMap,ve=new WeakMap,we=new WeakMap,be=new WeakMap,ke=new WeakMap,Ge=new WeakMap,xe=new WeakMap,ye=new WeakMap,Me=new WeakMap,Ae=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,We=new WeakMap,Pe=new WeakMap,Le=new WeakMap,ze=new WeakMap,Ne=new WeakMap,Se=new WeakMap,Te=new WeakMap,qe=new WeakMap,De=new WeakMap,Oe=new WeakMap,Ie=new WeakMap,Be=new WeakMap,_e=new WeakMap,Ue=new WeakMap,Re=new WeakMap,He=new WeakMap,Fe=new WeakMap,Ke=new WeakMap,Ye=new WeakMap,Ve=new WeakMap,Ze=new WeakMap,Xe=new WeakMap,je=new WeakMap,Je=new WeakMap,Qe=new WeakMap,$e=new WeakMap,tn=new WeakMap,en=new WeakMap,nn=new WeakMap,sn=new WeakMap,on=new WeakMap,an=new WeakMap,rn=new WeakMap,hn=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,gn=new WeakMap,fn=new WeakMap,pn=new WeakMap,un=new WeakMap,mn=new WeakMap,vn=new WeakMap,wn=new WeakMap,bn=new WeakMap,kn=new WeakMap,Gn=new WeakMap,xn=new WeakMap,yn=new WeakMap,Mn=new WeakMap,An=new WeakMap,En=new WeakMap,Cn=new WeakMap,Wn=new WeakMap,Pn=new WeakMap,Ln=new WeakMap,zn=new WeakMap,Nn=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,qn=new WeakMap,Dn=new WeakMap,On=new WeakMap,In=new WeakMap,Bn=new WeakMap,Xt=new WeakSet,_n=function(){if((0,i.gn)(this,Ln,"f")||(0,i.gn)(this,zn,"f")){const t=(0,i.gn)(this,Xt,"m",di).call(this);if(null!=t){let e;e=null!=(0,i.gn)(this,Nn,"f")?(0,i.gn)(this,Nn,"f"):{x:t.x,y:t.y,z:t.z};let n=0;n=(0,i.gn)(this,mn,"f")?-2:0;const s=Math.min(e.x+n,t.x+n),o=Math.min(e.y,t.y),a=Math.min(e.z+n,t.z+n),r=Math.max(e.x+n,t.x+n),h=Math.max(e.y,t.y),l=Math.max(e.z+n,t.z+n);let c;c=(0,i.gn)(this,mn,"f")?4:1;const d=(r-s+c)*S.A.partSize,g=(h-o+1)*S.A.partSize,f=(l-a+c)*S.A.partSize;let p,u;if((0,i.gn)(this,Ln,"f"))p=65280,u=21760;else{if(!(0,i.gn)(this,zn,"f"))throw new Error("Invalid copy/cut state");p=16776960,u=5592320}if(null==(0,i.gn)(this,qn,"f")){const t=(new w.LoY).setFromPoints([new w.Pq0(0,0,0),new w.Pq0(0,0,0),new w.Pq0(0,0,1),new w.Pq0(0,0,1),new w.Pq0(0,0,1),new w.Pq0(1,0,1),new w.Pq0(1,0,1),new w.Pq0(1,0,1),new w.Pq0(1,0,0),new w.Pq0(1,0,0),new w.Pq0(1,0,0),new w.Pq0(0,0,0),new w.Pq0(0,1,0),new w.Pq0(0,1,0),new w.Pq0(0,1,1),new w.Pq0(0,1,1),new w.Pq0(0,1,1),new w.Pq0(1,1,1),new w.Pq0(1,1,1),new w.Pq0(1,1,1),new w.Pq0(1,1,0),new w.Pq0(1,1,0),new w.Pq0(1,1,0),new w.Pq0(0,1,0),new w.Pq0(0,0,0),new w.Pq0(0,0,0),new w.Pq0(0,1,0),new w.Pq0(0,0,1),new w.Pq0(0,0,1),new w.Pq0(0,1,1),new w.Pq0(1,0,1),new w.Pq0(1,0,1),new w.Pq0(1,1,1),new w.Pq0(1,0,0),new w.Pq0(1,0,0),new w.Pq0(1,1,0)].map((t=>t.addScalar(-.5))));(0,i.GG)(this,qn,{fill:new w.eaF(new w.iNn(1,1,1),new w.V9B({color:p,transparent:!0,opacity:.25,polygonOffset:!0,polygonOffsetFactor:-.3,depthWrite:!1})),outline:new w.eaF(t,new w.V9B({color:u,wireframe:!0,polygonOffset:!0,polygonOffsetFactor:-.3}))},"f"),(0,i.gn)(this,$t,"f").scene.add((0,i.gn)(this,qn,"f").fill),(0,i.gn)(this,$t,"f").scene.add((0,i.gn)(this,qn,"f").outline)}else(0,i.gn)(this,qn,"f").fill.material.color.setHex(p),(0,i.gn)(this,qn,"f").outline.material.color.setHex(u);(0,i.gn)(this,qn,"f").fill.position.set((s+r+c)/2*S.A.partSize,(o+h+1)/2*S.A.partSize,(a+l+c)/2*S.A.partSize),(0,i.gn)(this,qn,"f").fill.scale.set(d,g,f),(0,i.gn)(this,qn,"f").fill.visible=!0,(0,i.gn)(this,qn,"f").outline.position.copy((0,i.gn)(this,qn,"f").fill.position),(0,i.gn)(this,qn,"f").outline.scale.copy((0,i.gn)(this,qn,"f").fill.scale),(0,i.gn)(this,qn,"f").outline.visible=!0}else null!=(0,i.gn)(this,qn,"f")&&((0,i.gn)(this,qn,"f").fill.visible=!1,(0,i.gn)(this,qn,"f").outline.visible=!1)}else null!=(0,i.gn)(this,qn,"f")&&((0,i.gn)(this,$t,"f").scene.remove((0,i.gn)(this,qn,"f").fill),(0,i.gn)(this,qn,"f").fill.geometry.dispose(),(0,i.gn)(this,qn,"f").fill.material.dispose(),(0,i.gn)(this,$t,"f").scene.remove((0,i.gn)(this,qn,"f").outline),(0,i.gn)(this,qn,"f").outline.geometry.dispose(),(0,i.gn)(this,qn,"f").outline.material.dispose(),(0,i.GG)(this,qn,null,"f"))},Un=function(t,e,n,s,o,a,r){t>s&&([t,s]=[s,t]),e>o&&([e,o]=[o,e]),n>a&&([n,a]=[a,n]),(0,i.gn)(this,mn,"f")&&(t-=2,n-=2,s+=1,a+=1);const h=(0,i.gn)(this,ee,"f").getPartsWithin(t,e,n,s,o,a);if(0==h.length)return;if(r){const r=(0,i.gn)(this,ee,"f").deletePartsWithin(t,e,n,s,o,a);r.length>0&&((0,i.gn)(this,yn,"f").push({removed:r,added:[]}),(0,i.gn)(this,Mn,"f").length=0,(0,i.gn)(this,ve,"f").disabled=0==(0,i.gn)(this,yn,"f").length,(0,i.gn)(this,we,"f").disabled=0==(0,i.gn)(this,Mn,"f").length),(0,i.gn)(this,Xt,"m",ci).call(this),(0,i.gn)(this,Xt,"m",li).call(this)}const l=h.reduce(((t,e)=>Math.min(t,e.x)),1/0),c=h.reduce(((t,e)=>Math.min(t,e.y)),1/0),d=h.reduce(((t,e)=>Math.min(t,e.z)),1/0),g=h.reduce(((t,e)=>Math.max(t,e.x)),-1/0),f=h.reduce(((t,e)=>Math.max(t,e.y)),-1/0),p=h.reduce(((t,e)=>Math.max(t,e.z)),-1/0),u=4*Math.floor((l+g)/2/4),m=Math.floor((c+f)/2),v=4*Math.floor((d+p)/2/4),w=h.map((t=>({id:t.id,offset:{x:t.x-u,y:t.y-m,z:t.z-v},rotation:t.rotation,rotationAxis:t.rotationAxis,color:t.color,checkpointOrder:t.checkpointOrder}))),b=[];for(const t of w){(0,i.gn)(this,ne,"f").getPart(t.id).configuration.tiles.rotated(t.rotation,t.rotationAxis).forEach(((e,n,i)=>{b.push([e+t.offset.x,n+t.offset.y,i+t.offset.z])}))}const k=new ut.A(b);(0,i.GG)(this,Sn,{parts:w,tiles:k},"f"),(0,i.gn)(this,me,"f").disabled=!1,(0,i.gn)(this,Xt,"m",Rn).call(this)},Rn=function(){null!=(0,i.gn)(this,Sn,"f")&&((0,i.gn)(this,Xt,"m",oi).call(this,null),(0,i.GG)(this,pn,0,"f"),(0,i.gn)(this,Ee,"f").rotation=(0,i.gn)(this,pn,"f"),(0,i.GG)(this,un,ft.A.YPositive,"f"),(0,i.gn)(this,Ee,"f").rotationAxis=(0,i.gn)(this,un,"f"),(0,i.GG)(this,Tn,(0,i.gn)(this,Sn,"f"),"f"),(0,i.gn)(this,Xt,"m",ii).call(this),(0,i.gn)(this,Xt,"m",hi).call(this))},Hn=function(){if(null==(0,i.gn)(this,Tn,"f")||null==(0,i.gn)(this,gn,"f"))return;const t=(0,i.gn)(this,gn,"f"),e=[],n=[];if(!(0,i.gn)(this,vn,"f")){(0,i.gn)(this,Tn,"f").tiles.rotated((0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")).forEach(((n,s,o)=>{const a=t.x+n,r=t.y+s,h=t.z+o,l=(0,i.gn)(this,ee,"f").deletePartsAt(a,r,h);for(const t of l)e.push({id:t.id,x:t.x,y:t.y,z:t.z,rotation:t.rotation,rotationAxis:t.rotationAxis,color:t.color,checkpointOrder:t.checkpointOrder,startOrder:t.startOrder})}))}for(const s of(0,i.gn)(this,Tn,"f").parts){let o=null;null!=(0,i.gn)(this,ne,"f").getPart(s.id).configuration.startOffset&&(o=(0,i.gn)(this,ee,"f").getNextStartOrder());const{rotation:a,rotationAxis:r}=T.Dr(s.rotation,s.rotationAxis,(0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")),h=T.yV(s.offset.x,s.offset.y,s.offset.z,(0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")),l=t.x+h[0],c=t.y+h[1],d=t.z+h[2];if((0,i.gn)(this,vn,"f")){const t=(0,i.gn)(this,ee,"f").deleteSpecificPart(s.id,l,c,d,a,r);null!=t&&e.push({id:t.id,x:t.x,y:t.y,z:t.z,rotation:t.rotation,rotationAxis:t.rotationAxis,color:t.color,checkpointOrder:t.checkpointOrder,startOrder:t.startOrder})}(0,i.gn)(this,ee,"f").setPart(l,c,d,s.id,a,r,s.color,s.checkpointOrder,o),n.push({id:s.id,x:l,y:c,z:d,rotation:a,rotationAxis:r,color:s.color,checkpointOrder:s.checkpointOrder,startOrder:o})}(0,i.gn)(this,Xt,"m",ci).call(this),(0,i.gn)(this,Xt,"m",li).call(this),(e.length>0||n.length>0)&&((0,i.gn)(this,yn,"f").push({removed:e,added:n}),(0,i.gn)(this,Mn,"f").length=0,(0,i.gn)(this,ve,"f").disabled=0==(0,i.gn)(this,yn,"f").length,(0,i.gn)(this,we,"f").disabled=0==(0,i.gn)(this,Mn,"f").length)},Fn=function(t){(0,i.gn)(this,Xt,"m",Kn).call(this,t.name),(0,i.gn)(this,Xt,"m",Yn).call(this,t.author),(0,i.GG)(this,xn,t.lastModified,"f")},Kn=function(t){(0,i.gn)(this,kn,"f")!=t&&((0,i.GG)(this,kn,t,"f"),(0,i.GG)(this,xn,new Date,"f"),(0,i.gn)(this,Pe,"f").innerHTML='<img class="button-icon" src="images/settings.svg"> ',(0,i.gn)(this,Pe,"f").append(document.createTextNode((0,i.gn)(this,kn,"f")??(0,i.gn)(this,Qt,"f").get("Unnamed Track"))))},Yn=function(t){(0,i.gn)(this,Gn,"f")!=t&&((0,i.GG)(this,Gn,t,"f"),(0,i.GG)(this,xn,new Date,"f"))},Vn=function(t){const e=()=>{(0,i.gn)(this,te,"f").trigger((()=>{(0,i.GG)(this,Je,!0,"f"),(0,i.gn)(this,Xt,"m",Kn).call(this,null),t(),(0,i.gn)(this,ge,"f").inert=!1}))};(0,i.gn)(this,Je,"f")?e():((0,i.gn)(this,ge,"f").inert=!0,(0,i.gn)(this,re,"f").showConfirm((0,i.gn)(this,Qt,"f").get("Are you sure you want to exit the editor?")+"\n\n"+(0,i.gn)(this,Qt,"f").get("All unsaved data will be lost!"),(0,i.gn)(this,Qt,"f").get("Cancel"),(0,i.gn)(this,Qt,"f").get("Confirm"),(()=>{(0,i.gn)(this,ge,"f").inert=!1}),(()=>{e()})))},Zn=function(){if(null!=(0,i.gn)(this,ee,"f").getStartTransform()){if(null==(0,i.gn)(this,ce,"f"))throw new Error("Test callback is null");(0,i.gn)(this,ce,"f").call(this)}else(0,i.gn)(this,Xt,"m",Qn).call(this,(0,i.gn)(this,Qt,"f").get("Starting point is missing!"),!1)},Xn=function(){if(null!=(0,i.gn)(this,gn,"f")&&null!=(0,i.gn)(this,Wn,"f")){const t=(0,i.gn)(this,Cn,"f")[(0,i.gn)(this,Wn,"f")],e=(0,i.gn)(this,Xt,"m",gi).call(this,(0,i.gn)(this,gn,"f"),t.tiles);if(e.length>0){let t;t=(0,i.gn)(this,mn,"f")?new w.Pq0((0,i.gn)(this,gn,"f").x+2,(0,i.gn)(this,gn,"f").y,(0,i.gn)(this,gn,"f").z+2):new w.Pq0((0,i.gn)(this,gn,"f").x,(0,i.gn)(this,gn,"f").y,Math.floor((0,i.gn)(this,gn,"f").z));let n=e[0],s=t.distanceToSquared(new w.Pq0(n.x,n.y,n.z));for(let i=1;i<e.length;i++){const o=e[i],a=t.distanceToSquared(new w.Pq0(o.x,o.y,o.z));a<s&&(n=o,s=a)}const o=n.parts[n.parts.length-1],a=(0,i.gn)(this,Cn,"f").findIndex((t=>t.id==o.id));if(a>=0){const t=(0,i.gn)(this,Cn,"f")[a];(0,i.GG)(this,pn,o.rotation,"f"),(0,i.gn)(this,Ee,"f").rotation=(0,i.gn)(this,pn,"f"),(0,i.GG)(this,un,o.rotationAxis,"f"),(0,i.gn)(this,Ee,"f").rotationAxis=(0,i.gn)(this,un,"f"),(0,i.GG)(this,Pn,o.color,"f"),(0,i.gn)(this,Xt,"m",si).call(this,t.category),(0,i.gn)(this,Xt,"m",oi).call(this,a)}}}},jn=function(){const t=(0,i.gn)(this,yn,"f").pop();if(null!=t){for(const e of t.added)(0,i.gn)(this,ee,"f").deleteSpecificPart(e.id,e.x,e.y,e.z,e.rotation,e.rotationAxis);for(const e of t.removed)(0,i.gn)(this,ee,"f").setPart(e.x,e.y,e.z,e.id,e.rotation,e.rotationAxis,e.color,e.checkpointOrder,e.startOrder);(0,i.gn)(this,Xt,"m",li).call(this),(0,i.gn)(this,Mn,"f").push(t)}(0,i.gn)(this,ve,"f").disabled=0==(0,i.gn)(this,yn,"f").length,(0,i.gn)(this,we,"f").disabled=0==(0,i.gn)(this,Mn,"f").length},Jn=function(){const t=(0,i.gn)(this,Mn,"f").pop();if(null!=t){for(const e of t.added)(0,i.gn)(this,ee,"f").setPart(e.x,e.y,e.z,e.id,e.rotation,e.rotationAxis,e.color,e.checkpointOrder,e.startOrder);for(const e of t.removed)(0,i.gn)(this,ee,"f").deleteSpecificPart(e.id,e.x,e.y,e.z,e.rotation,e.rotationAxis);(0,i.gn)(this,Xt,"m",li).call(this),(0,i.gn)(this,yn,"f").push(t)}(0,i.gn)(this,ve,"f").disabled=0==(0,i.gn)(this,yn,"f").length,(0,i.gn)(this,we,"f").disabled=0==(0,i.gn)(this,Mn,"f").length},Qn=function(t,e){null!=(0,i.gn)(this,ue,"f")&&(clearTimeout((0,i.gn)(this,ue,"f")),(0,i.GG)(this,ue,null,"f")),e?(0,i.gn)(this,pe,"f").classList.add("green"):(0,i.gn)(this,pe,"f").classList.remove("green"),(0,i.gn)(this,pe,"f").classList.remove("show"),(0,i.gn)(this,pe,"f").classList.remove("hide"),(0,i.GG)(this,ue,window.setTimeout((()=>{(0,i.gn)(this,pe,"f").textContent=t,(0,i.gn)(this,pe,"f").classList.add("show"),(0,i.GG)(this,ue,window.setTimeout((()=>{(0,i.gn)(this,pe,"f").classList.remove("show"),(0,i.gn)(this,pe,"f").classList.add("hide")}),3e3),"f")}),0),"f")},$n=function(){const t=(0,i.gn)(this,ne,"f").getAllParts();for(let e=0;e<t.length;e++){const n=t[e];let s=(0,i.gn)(this,On,"f").find((t=>t.category==n.configuration.category))?.partPanel;if(null==s){s=document.createElement("div"),s.className="part-panel hidden",(0,i.gn)(this,be,"f").prepend(s);const t=(0,i.gn)(this,ne,"f").getCategoryMesh(n.configuration.category,(0,i.gn)(this,ee,"f").environment),e=document.createElement("button");e.addEventListener("click",(()=>{(0,i.gn)(this,Xt,"m",si).call(this,n.configuration.category),(0,i.gn)(this,jt,"f").playUIClick()})),(0,i.gn)(this,ke,"f").appendChild(e);const o=document.createElement("img");o.className="loading",Zt(t).then((t=>{o.src=t,o.className=""})),e.appendChild(o),(0,i.gn)(this,On,"f").push({category:n.configuration.category,button:e,image:o,partPanel:s,selectedIndex:null})}const o=document.createElement("button");o.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,Xt,"m",oi).call(this,1+e)})),s.appendChild(o);const a=document.createElement("img");a.className="loading",o.appendChild(a);const r=[];let h;if(n.colors.size<=1)h=null;else{h=document.createElement("div"),h.className="color-panel hidden",(0,i.gn)(this,be,"f").prepend(h);const t=[dt.A.Default].concat(Array.from(n.colors.keys()));for(const e of t){const t=document.createElement("button");t.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.GG)(this,Pn,e,"f"),t.classList.add("selected");const n=t.parentElement;if(null==n)throw new Error("Color panel not found");for(const e of n.children)e!=t&&e.classList.remove("selected")})),e==dt.A.Default&&t.classList.add("selected"),h.appendChild(t);const n=document.createElement("img");n.className="loading",t.appendChild(n),r.push([e,t,n])}}const l={id:n.configuration.id,trackPartData:n,button:o,image:a,colorPanel:h,colorButtons:r,tiles:n.configuration.tiles,isCheckpoint:null!=n.configuration.detector&&n.configuration.detector.type==mt.A.Checkpoint,isStart:null!=n.configuration.startOffset,category:n.configuration.category};(0,i.gn)(this,Cn,"f").push(l)}},ti=function(){if(null==(0,i.gn)(this,Wn,"f"))return dt.A.Default;return(0,i.gn)(this,Cn,"f")[(0,i.gn)(this,Wn,"f")].colorButtons.some((([t])=>t==(0,i.gn)(this,Pn,"f")))?(0,i.gn)(this,Pn,"f"):dt.A.Default},ei=function(t){(0,i.gn)(this,ee,"f").environment!=t&&((0,i.gn)(this,ee,"f").environment=t,(0,i.gn)(this,Xt,"m",ni).call(this),(0,i.gn)(this,Xt,"m",li).call(this))},ni=function(){for(const t of(0,i.gn)(this,On,"f")){const e=(0,i.gn)(this,ne,"f").getCategoryMesh(t.category,(0,i.gn)(this,ee,"f").environment);t.image.removeAttribute("src"),t.image.className="loading",Zt(e).then((e=>{t.image.src=e,t.image.className=""}))}let t;switch((0,i.gn)(this,ee,"f").environment){case Ut.A.Summer:t=dt.A.Summer;break;case Ut.A.Winter:t=dt.A.Winter;break;case Ut.A.Desert:t=dt.A.Desert}for(const e of(0,i.gn)(this,Cn,"f"))if(null!=e.id)if(e.category==(0,i.gn)(this,In,"f")){const n=(0,i.gn)(this,ne,"f").getPart(e.id).colors.get(t);if(null==n)throw new Error("Mesh is not loaded");e.image.removeAttribute("src"),e.image.className="loading",Zt(n).then((t=>{e.image.src=t,e.image.className=""}))}else e.image.removeAttribute("src"),e.image.className="loading"},ii=function(){for(const t of(0,i.gn)(this,nn,"f"))if((0,i.gn)(this,tn,"f").remove(t),t.geometry.dispose(),Array.isArray(t.material))for(const e of t.material)e.dispose();else t.material.dispose();if(null!=(0,i.gn)(this,an,"f")){if((0,i.gn)(this,tn,"f").remove((0,i.gn)(this,an,"f")),(0,i.gn)(this,an,"f").geometry.dispose(),Array.isArray((0,i.gn)(this,an,"f").material))for(const t of(0,i.gn)(this,an,"f").material)t.dispose();else(0,i.gn)(this,an,"f").material.dispose();(0,i.gn)(this,an,"f").dispose(),(0,i.GG)(this,an,null,"f")}if(null!=(0,i.gn)(this,Tn,"f")){const t=(0,i.gn)(this,Tn,"f").parts.length;let e=0,n=0;const s=new Set;for(const t of(0,i.gn)(this,Tn,"f").parts){const o=(0,i.gn)(this,ne,"f").getPart(t.id).colors.get(dt.A.Summer);if(null==o)throw new Error("Track part mesh has not loaded yet");s.has(o.geometry)||(s.add(o.geometry),e+=o.geometry.attributes.position.count,null!=o.geometry.index&&(n+=o.geometry.index.count))}const o=new w.$Ed(t,e,n,(0,i.gn)(this,en,"f")),a=new Map;for(const t of(0,i.gn)(this,Tn,"f").parts){const e=(0,i.gn)(this,ne,"f").getPart(t.id).colors.get(dt.A.Summer);if(null==e)throw new Error("Track part mesh has not loaded yet");let n=a.get(e.geometry);null==n&&(n=o.addGeometry(e.geometry),a.set(e.geometry,n));const s=o.addInstance(n),r=(new w.kn4).makeRotationFromQuaternion(T.hT(t.rotation,t.rotationAxis)).setPosition(t.offset.x*S.A.partSize,t.offset.y*S.A.partSize,t.offset.z*S.A.partSize);o.setMatrixAt(s,r)}(0,i.gn)(this,tn,"f").add(o),(0,i.gn)(this,nn,"f").push(o);const r=new w.ZLX((0,i.gn)(this,on,"f"),(0,i.gn)(this,sn,"f"),(0,i.gn)(this,Tn,"f").tiles.length);(0,i.gn)(this,Tn,"f").tiles.forEach(((t,e,n,i)=>{const s=(new w.kn4).makeTranslation(t*S.A.partSize,e*S.A.partSize,n*S.A.partSize);r.setMatrixAt(i,s)})),(0,i.gn)(this,tn,"f").add(r),(0,i.GG)(this,an,r,"f")}else if(null!=(0,i.gn)(this,Wn,"f")){const t=(0,i.gn)(this,Cn,"f")[(0,i.gn)(this,Wn,"f")];let e;if(null==t.trackPartData){const t=new w.iNn(4*S.A.partSize,S.A.partSize,4*S.A.partSize);t.translate(0,S.A.partSize/2,0),e=new w.eaF(t,(0,i.gn)(this,en,"f"))}else if(e=t.trackPartData.colors.get(dt.A.Summer)?.clone(),null==e)throw new Error("Track part mesh has not loaded yet");e.material=(0,i.gn)(this,en,"f"),(0,i.gn)(this,tn,"f").add(e),(0,i.gn)(this,nn,"f").push(e);const n=new w.ZLX((0,i.gn)(this,on,"f"),(0,i.gn)(this,sn,"f"),t.tiles.length);t.tiles.forEach(((t,e,i,s)=>{const o=(new w.kn4).makeTranslation(t*S.A.partSize,e*S.A.partSize,i*S.A.partSize);n.setMatrixAt(s,o)})),(0,i.gn)(this,tn,"f").add(n),(0,i.GG)(this,an,n,"f")}},si=function(t){if((0,i.gn)(this,In,"f")!=t||null==t){(0,i.GG)(this,In,t,"f");for(const e of(0,i.gn)(this,On,"f"))e.category==t?(e.button.classList.add("selected"),e.partPanel.classList.remove("hidden")):(e.button.classList.remove("selected"),e.partPanel.classList.add("hidden"));if(null==t)(0,i.gn)(this,Xt,"m",oi).call(this,0);else{let e;switch((0,i.gn)(this,ee,"f").environment){case Ut.A.Summer:e=dt.A.Summer;break;case Ut.A.Winter:e=dt.A.Winter;break;case Ut.A.Desert:e=dt.A.Desert}for(const n of(0,i.gn)(this,Cn,"f"))if(n.category==t&&null!=n.id&&!n.image.hasAttribute("src")){const t=(0,i.gn)(this,ne,"f").getPart(n.id).colors.get(e);if(null==t)throw new Error("Mesh is not loaded");n.image.className="loading",Zt(t).then((t=>{n.image.src=t,n.image.className=""}))}let n=(0,i.gn)(this,On,"f").find((e=>e.category==t))?.selectedIndex;if(null==n&&(n=(0,i.gn)(this,Cn,"f").findIndex((e=>e.category==t)),n<0))throw new Error("Empty category");(0,i.gn)(this,Xt,"m",oi).call(this,n)}}},oi=function(t){null!=t&&((0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.GG)(this,Tn,null,"f"));for(let e=0;e<(0,i.gn)(this,Cn,"f").length;e++){const{button:n,colorPanel:s}=(0,i.gn)(this,Cn,"f")[e];e==t?(n.className="selected",s?.classList.remove("hidden")):(n.className="",s?.classList.add("hidden"))}(0,i.GG)(this,Wn,t,"f");const e=(0,i.gn)(this,On,"f").find((t=>t.category==(0,i.gn)(this,In,"f")));if(null!=e&&(e.selectedIndex=t),null!=t){if(t<0&&t>=(0,i.gn)(this,Cn,"f").length)throw new Error("Part index out of bounds");const e=(0,i.gn)(this,Cn,"f")[t];e.isCheckpoint?(0,i.gn)(this,xe,"f").show():(0,i.gn)(this,xe,"f").hide();const n=(0,i.gn)(this,Xt,"m",ti).call(this);if(null!=e.id)for(const[t,s,o]of e.colorButtons)if(t==n?s.classList.add("selected"):s.classList.remove("selected"),!o.hasAttribute("src"))if(t==dt.A.Default)o.src="images/empty.svg",o.className="";else{const n=(0,i.gn)(this,ne,"f").getPart(e.id).colors.get(t);if(null==n)throw new Error("Mesh is not loaded");o.className="loading",Zt(n).then((t=>{o.src=t,o.className=""}))}}else(0,i.gn)(this,xe,"f").hide();(0,i.gn)(this,Xt,"m",ii).call(this),(0,i.gn)(this,Xt,"m",hi).call(this)},ai=function(){return Math.floor((0,i.gn)(this,$e,"f").position.y/5)},ri=function(t){const e=(0,i.gn)(this,Xt,"a",ai);(0,i.gn)(this,$e,"f").position.y=5*t,(0,i.gn)(this,_e,"f").position.y+=5*(t-e),(0,i.gn)(this,Ue,"f").target.y=5*t,(0,i.gn)(this,Ge,"f").refresh(t),(0,i.gn)(this,$e,"f").updateWorldMatrix(!0,!0),(0,i.gn)(this,Ue,"f").update()},hi=function(){if(null!=(0,i.gn)(this,Tn,"f"))(0,i.GG)(this,fn,0,"f"),(0,i.gn)(this,Tn,"f").tiles.rotated((0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")).forEach(((t,e)=>{(0,i.GG)(this,fn,Math.max((0,i.gn)(this,fn,"f"),-e),"f")}));else if(null!=(0,i.gn)(this,Wn,"f")&&(0,i.gn)(this,Wn,"f")>=0&&(0,i.gn)(this,Wn,"f")<(0,i.gn)(this,Cn,"f").length){const t=(0,i.gn)(this,Cn,"f")[(0,i.gn)(this,Wn,"f")];(0,i.GG)(this,fn,0,"f"),t.tiles.rotated((0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")).forEach(((t,e)=>{(0,i.GG)(this,fn,Math.max((0,i.gn)(this,fn,"f"),-e),"f")}))}else(0,i.GG)(this,fn,0,"f")},li=function(){(0,i.gn)(this,ee,"f").generateMeshes(),(0,i.gn)(this,En,"f")?.refresh((0,i.gn)(this,ee,"f")),(0,i.gn)(this,xe,"f").setFromExistingCheckpoints((0,i.gn)(this,ee,"f")),(0,i.GG)(this,Dn,null,"f"),(0,i.GG)(this,xn,new Date,"f"),(0,i.GG)(this,Je,!1,"f")},ci=function(){const t=performance.now();if(t-(0,i.gn)(this,Jt,"f")>35){const e=(0,i.gn)(this,jt,"f").getBuffer("editor_edit");if(null!=e&&null!=(0,i.gn)(this,jt,"f").context&&null!=(0,i.gn)(this,jt,"f").destinationSfx){const t=(0,i.gn)(this,jt,"f").context.createBufferSource();t.buffer=e,t.playbackRate.value=.7;const n=(0,i.gn)(this,jt,"f").context.createGain();n.gain.value=.05,t.connect(n),n.connect((0,i.gn)(this,jt,"f").destinationSfx),t.start(0)}(0,i.GG)(this,Jt,t,"f")}},di=function(){let t;if((0,i.gn)(this,he,"f").touchEnabled)t=new w.Pq0((0,i.gn)(this,Ue,"f").target.x/S.A.partSize,(0,i.gn)(this,Ue,"f").target.y/S.A.partSize,(0,i.gn)(this,Ue,"f").target.z/S.A.partSize);else{let e;if(null!=(0,i.gn)(this,ln,"f")?((0,i.gn)(this,Qe,"f").setFromCamera((0,i.gn)(this,ln,"f"),(0,i.gn)(this,$t,"f").camera),e=(0,i.gn)(this,Qe,"f").intersectObjects([(0,i.gn)(this,$e,"f")])):e=[],e.length>0){const n=e[0];t=n.point.distanceToSquared((0,i.gn)(this,Ue,"f").target)<=(0,i.gn)(this,An,"f")*(0,i.gn)(this,An,"f")?new w.Pq0(Math.round(n.point.x/S.A.partSize),Math.floor((0,i.gn)(this,$e,"f").position.y/S.A.partSize),Math.round(n.point.z/S.A.partSize)):null}else t=null}if(null!=t){let e,n;e=(0,i.gn)(this,mn,"f")?4:1,n=(0,i.gn)(this,zn,"f")||(0,i.gn)(this,Ln,"f")||(0,i.gn)(this,un,"f")!=ft.A.XPositive&&(0,i.gn)(this,un,"f")!=ft.A.XNegative?Math.round(t.x/e)*e:Math.round(t.x);const s=Math.round(t.y)+(0,i.gn)(this,fn,"f");let o;return o=(0,i.gn)(this,zn,"f")||(0,i.gn)(this,Ln,"f")||(0,i.gn)(this,un,"f")!=ft.A.ZPositive&&(0,i.gn)(this,un,"f")!=ft.A.ZNegative?Math.round(t.z/e)*e:Math.round(t.z),new w.Pq0(n,s,o)}return null},gi=function(t,e){const n=[];return e.rotated((0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")).forEach(((e,s,o)=>{const a=t.x+e,r=t.y+s,h=t.z+o,l=(0,i.gn)(this,ee,"f").getPartsAt(a,r,h);l.length>0&&n.push({x:a,y:r,z:h,parts:l})})),n},fi=function(t,e){return e.rotated((0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")).some(((e,n,s)=>{const o=t.x+e,a=t.y+n,r=t.z+s;return(0,i.gn)(this,ee,"f").getPartsAt(o,a,r).length>0}))},pi=function(t,e){let n=!1;for(const s of t)null!=(0,i.gn)(this,ee,"f").deleteSpecificPart(s.id,s.x,s.y,s.z,s.rotation,s.rotationAxis)&&(n=!0,e.push({id:s.id,x:s.x,y:s.y,z:s.z,rotation:s.rotation,rotationAxis:s.rotationAxis,color:s.color,checkpointOrder:s.checkpointOrder,startOrder:s.startOrder}));n&&((0,i.gn)(this,Xt,"m",ci).call(this),(0,i.gn)(this,Xt,"m",li).call(this))},ui=function(t){const e=4*(0,i.gn)(this,Ue,"f").getDistance();if((0,i.gn)(this,de,"f")&&(0,i.gn)(this,Xt,"m",mi).call(this)){const n=new w.Pq0;if((0,i.gn)(this,He,"f")&&(n.z=-1),(0,i.gn)(this,Fe,"f")&&(n.x=1),(0,i.gn)(this,Ke,"f")&&(n.z=1),(0,i.gn)(this,Ye,"f")&&(n.x=-1),0!=n.x||0!=n.z){const s=n.applyQuaternion((0,i.gn)(this,_e,"f").quaternion),o=new w.I9Y(s.x,s.z).normalize(),a=new w.Pq0(o.x,0,o.y).multiplyScalar(e*t);(0,i.gn)(this,_e,"f").position.add(a),(0,i.gn)(this,Ue,"f").target.add(a)}let s=0;(0,i.gn)(this,Ve,"f")&&(s+=1.5*Math.PI*t),(0,i.gn)(this,Ze,"f")&&(s-=1.5*Math.PI*t);let o=0;if((0,i.gn)(this,Xe,"f")&&(o+=1.5*Math.PI*t),(0,i.gn)(this,je,"f")&&(o-=1.5*Math.PI*t),0!=s||0!=o){const t=new w.I9Y((0,i.gn)(this,_e,"f").position.x,(0,i.gn)(this,_e,"f").position.z).distanceTo(new w.I9Y((0,i.gn)(this,Ue,"f").target.x,(0,i.gn)(this,Ue,"f").target.z)),e=(0,i.gn)(this,_e,"f").position.y-(0,i.gn)(this,Ue,"f").target.y,n=Math.sqrt(t*t+e*e),a=Math.atan2((0,i.gn)(this,_e,"f").position.z-(0,i.gn)(this,Ue,"f").target.z,(0,i.gn)(this,_e,"f").position.x-(0,i.gn)(this,Ue,"f").target.x)+o;let r=Math.asin(e/n)+s;r=Math.max(-Math.PI/2+.001,Math.min(Math.PI/2-.001,r)),(0,i.gn)(this,_e,"f").position.x=(0,i.gn)(this,Ue,"f").target.x+Math.cos(r)*Math.cos(a)*n,(0,i.gn)(this,_e,"f").position.y=(0,i.gn)(this,Ue,"f").target.y+Math.sin(r)*n,(0,i.gn)(this,_e,"f").position.z=(0,i.gn)(this,Ue,"f").target.z+Math.cos(r)*Math.sin(a)*n,(0,i.gn)(this,Ue,"f").update()}}},mi=function(){return!!(0,i.gn)(this,de,"f")&&(!(0,i.gn)(this,Bn,"f")&&(!(0,i.gn)(this,re,"f").isOpen&&null==(0,i.gn)(this,Ae,"f")&&!(0,i.gn)(this,ye,"f").isOpen&&null==(0,i.gn)(this,Ce,"f")&&null==(0,i.gn)(this,We,"f")))};const bi=class{constructor(t,e,n,s,o,a,r,h,l,c,d,g,f,p){Xt.add(this),jt.set(this,void 0),Jt.set(this,performance.now()),Qt.set(this,void 0),$t.set(this,void 0),te.set(this,void 0),ee.set(this,void 0),ne.set(this,void 0),ie.set(this,void 0),se.set(this,void 0),oe.set(this,void 0),ae.set(this,void 0),re.set(this,void 0),he.set(this,void 0),le.set(this,void 0),ce.set(this,null),de.set(this,!1),ge.set(this,void 0),fe.set(this,void 0),pe.set(this,void 0),ue.set(this,null),me.set(this,void 0),ve.set(this,void 0),we.set(this,void 0),be.set(this,void 0),ke.set(this,void 0),Ge.set(this,void 0),xe.set(this,void 0),ye.set(this,void 0),Me.set(this,null),Ae.set(this,null),Ee.set(this,void 0),Ce.set(this,null),We.set(this,null),Pe.set(this,void 0),Le.set(this,void 0),ze.set(this,void 0),Ne.set(this,void 0),Se.set(this,void 0),Te.set(this,void 0),qe.set(this,void 0),De.set(this,void 0),Oe.set(this,void 0),Ie.set(this,void 0),Be.set(this,void 0),_e.set(this,void 0),Ue.set(this,void 0),Re.set(this,!1),He.set(this,!1),Fe.set(this,!1),Ke.set(this,!1),Ye.set(this,!1),Ve.set(this,!1),Ze.set(this,!1),Xe.set(this,!1),je.set(this,!1),Je.set(this,!0),Qe.set(this,void 0),$e.set(this,void 0),tn.set(this,void 0),en.set(this,void 0),nn.set(this,[]),sn.set(this,void 0),on.set(this,void 0),an.set(this,null),rn.set(this,!1),hn.set(this,!1),ln.set(this,null),cn.set(this,null),dn.set(this,!1),gn.set(this,null),fn.set(this,0),pn.set(this,0),un.set(this,ft.A.YPositive),mn.set(this,!0),vn.set(this,!1),wn.set(this,null),bn.set(this,null),kn.set(this,null),Gn.set(this,void 0),xn.set(this,new Date),yn.set(this,[]),Mn.set(this,[]),An.set(this,1e3),En.set(this,null),Cn.set(this,[]),Wn.set(this,null),Pn.set(this,dt.A.Default),Ln.set(this,!1),zn.set(this,!1),Nn.set(this,null),Sn.set(this,null),Tn.set(this,null),qn.set(this,null),Dn.set(this,null),On.set(this,[]),In.set(this,null),Bn.set(this,!1),(0,i.GG)(this,Qt,t,"f"),(0,i.GG)(this,jt,e,"f"),(0,i.GG)(this,$t,n,"f"),(0,i.GG)(this,te,s,"f"),(0,i.GG)(this,ee,o,"f"),(0,i.GG)(this,ne,a,"f"),(0,i.GG)(this,oe,r,"f"),(0,i.GG)(this,ae,h,"f"),(0,i.GG)(this,ie,l,"f"),(0,i.GG)(this,se,c,"f"),(0,i.GG)(this,re,d,"f"),(0,i.GG)(this,he,g,"f"),(0,i.GG)(this,le,f,"f"),(0,i.GG)(this,_e,new w.ubm(70,1,.5,ht.A.maxViewDistance),"f"),(0,i.gn)(this,_e,"f").position.set(40,40,-40),n.scene.add((0,i.gn)(this,_e,"f")),(0,i.GG)(this,Ue,new M((0,i.gn)(this,_e,"f"),n.canvas),"f"),(0,i.gn)(this,Ue,"f").mouseButtons={MIDDLE:w.kBv.ROTATE,RIGHT:w.kBv.PAN},(0,i.gn)(this,Ue,"f").minDistance=4,(0,i.gn)(this,Ue,"f").maxDistance=600,(0,i.GG)(this,Qe,new w.tBo,"f"),(0,i.GG)(this,Gn,h.getCurrentUserProfile().nickname,"f"),(0,i.GG)(this,en,new w.G_z({transparent:!0,opacity:.3,polygonOffset:!0,polygonOffsetFactor:-.3,depthWrite:!1}),"f"),(0,i.GG)(this,tn,new w.YJl,"f"),(0,i.gn)(this,tn,"f").visible=!1,n.scene.add((0,i.gn)(this,tn,"f")),n.addMaterial((0,i.gn)(this,en,"f")),(0,i.GG)(this,on,(new w.LoY).setFromPoints([new w.Pq0(0,0,0),new w.Pq0(0,0,0),new w.Pq0(0,0,1),new w.Pq0(0,0,1),new w.Pq0(0,0,1),new w.Pq0(1,0,1),new w.Pq0(1,0,1),new w.Pq0(1,0,1),new w.Pq0(1,0,0),new w.Pq0(1,0,0),new w.Pq0(1,0,0),new w.Pq0(0,0,0),new w.Pq0(0,1,0),new w.Pq0(0,1,0),new w.Pq0(0,1,1),new w.Pq0(0,1,1),new w.Pq0(0,1,1),new w.Pq0(1,1,1),new w.Pq0(1,1,1),new w.Pq0(1,1,1),new w.Pq0(1,1,0),new w.Pq0(1,1,0),new w.Pq0(1,1,0),new w.Pq0(0,1,0),new w.Pq0(0,0,0),new w.Pq0(0,0,0),new w.Pq0(0,1,0),new w.Pq0(0,0,1),new w.Pq0(0,0,1),new w.Pq0(0,1,1),new w.Pq0(1,0,1),new w.Pq0(1,0,1),new w.Pq0(1,1,1),new w.Pq0(1,0,0),new w.Pq0(1,0,0),new w.Pq0(1,1,0)]).scale(S.A.partSize,S.A.partSize,S.A.partSize),"f"),(0,i.GG)(this,sn,new w.V9B({wireframe:!0}),"f"),(0,i.GG)(this,$e,new w.eaF(new w.bdM(1e6,1e6),new w.V9B({side:w.$EB})),"f"),(0,i.gn)(this,$e,"f").rotation.x=-Math.PI/2,(0,i.gn)(this,$e,"f").updateWorldMatrix(!0,!0),n.canvas.addEventListener("mousemove",(0,i.GG)(this,Le,(t=>{const e=t.clientX/window.innerWidth*2-1,n=-t.clientY/window.innerHeight*2+1;null==(0,i.gn)(this,ln,"f")?(0,i.GG)(this,ln,new w.I9Y(e,n),"f"):(0,i.gn)(this,ln,"f").set(e,n)}),"f")),n.canvas.addEventListener("mousedown",(0,i.GG)(this,ze,(t=>{0==t.button&&(0,i.GG)(this,hn,!0,"f"),1==t.button&&t.preventDefault()}),"f")),window.addEventListener("mouseup",(0,i.GG)(this,Ne,(t=>{0==t.button&&(0,i.GG)(this,hn,!1,"f")}),"f")),n.canvas.addEventListener("mouseout",(0,i.GG)(this,Se,(()=>{(0,i.GG)(this,ln,null,"f")}),"f")),n.canvas.addEventListener("touchstart",(0,i.GG)(this,Te,(()=>{(0,i.gn)(this,he,"f").touchEnabled&&(0,i.GG)(this,cn,Date.now(),"f")}),"f")),n.canvas.addEventListener("click",(0,i.GG)(this,qe,(()=>{if((0,i.gn)(this,he,"f").touchEnabled&&null!=(0,i.gn)(this,cn,"f")&&Date.now()-(0,i.gn)(this,cn,"f")<200&&((0,i.GG)(this,cn,null,"f"),(0,i.GG)(this,dn,!0,"f")),(0,i.gn)(this,Ln,"f")||(0,i.gn)(this,zn,"f")){const t=(0,i.gn)(this,Xt,"m",di).call(this);null!=t&&(null==(0,i.gn)(this,Nn,"f")?(0,i.GG)(this,Nn,{x:t.x,y:t.y,z:t.z},"f"):((0,i.gn)(this,Xt,"m",Un).call(this,Math.min((0,i.gn)(this,Nn,"f").x,t.x),Math.min((0,i.gn)(this,Nn,"f").y,t.y),Math.min((0,i.gn)(this,Nn,"f").z,t.z),Math.max((0,i.gn)(this,Nn,"f").x,t.x),Math.max((0,i.gn)(this,Nn,"f").y,t.y),Math.max((0,i.gn)(this,Nn,"f").z,t.z),(0,i.gn)(this,zn,"f")),(0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f")))}else null!=(0,i.gn)(this,Tn,"f")&&(0,i.gn)(this,Xt,"m",Hn).call(this)}),"f")),window.addEventListener("keydown",(0,i.GG)(this,De,(t=>{(0,i.gn)(this,Xt,"m",mi).call(this)&&("Escape"==t.code&&((0,i.gn)(this,Ln,"f")||(0,i.gn)(this,zn,"f")?((0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f")):null!=(0,i.gn)(this,Tn,"f")?((0,i.GG)(this,Tn,null,"f"),(0,i.gn)(this,Xt,"m",ii).call(this)):(0,i.gn)(this,Xt,"m",Vn).call(this,p),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorHeightModifier)&&((0,i.GG)(this,Re,!0,"f"),(0,i.gn)(this,Ue,"f").enableZoom=!1,t.preventDefault()),t.ctrlKey?("KeyZ"==t.code&&((0,i.gn)(this,Xt,"m",jn).call(this),t.preventDefault()),"KeyY"==t.code&&((0,i.gn)(this,Xt,"m",Jn).call(this),t.preventDefault()),"KeyX"==t.code?((0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!0,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.GG)(this,Tn,null,"f"),(0,i.gn)(this,Xt,"m",oi).call(this,null),t.preventDefault()):"KeyC"==t.code?((0,i.GG)(this,Ln,!0,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.GG)(this,Tn,null,"f"),(0,i.gn)(this,Xt,"m",oi).call(this,null),t.preventDefault()):"KeyV"==t.code&&(null!=(0,i.gn)(this,Tn,"f")?(0,i.gn)(this,Xt,"m",Hn).call(this):null!=(0,i.gn)(this,Sn,"f")&&(0,i.gn)(this,Xt,"m",Rn).call(this),(0,i.gn)(this,Xt,"m",oi).call(this,null))):(f.checkKeyBinding(t,lt.A.EditorRotatePart)&&((0,i.GG)(this,pn,((0,i.gn)(this,pn,"f")+1)%4,"f"),(0,i.gn)(this,Ee,"f").rotation=(0,i.gn)(this,pn,"f"),(0,i.gn)(this,Xt,"m",hi).call(this),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorDelete)&&((0,i.GG)(this,rn,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorMoveForwards)&&((0,i.GG)(this,He,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorMoveRight)&&((0,i.GG)(this,Fe,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorMoveBackwards)&&((0,i.GG)(this,Ke,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorMoveLeft)&&((0,i.GG)(this,Ye,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorRotateViewUp)&&((0,i.GG)(this,Ve,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorRotateViewDown)&&((0,i.GG)(this,Ze,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorRotateViewLeft)&&((0,i.GG)(this,Xe,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorRotateViewRight)&&((0,i.GG)(this,je,!0,"f"),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorMoveDown)&&((0,i.GG)(this,Xt,Math.max(0,(0,i.gn)(this,Xt,"a",ai)-1),"a",ri),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorMoveUp)&&((0,i.GG)(this,Xt,(0,i.gn)(this,Xt,"a",ai)+1,"a",ri),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorTest)&&((0,i.gn)(this,Xt,"m",Zn).call(this),t.preventDefault()),f.checkKeyBinding(t,lt.A.EditorPick)&&((0,i.gn)(this,Xt,"m",Xn).call(this),t.preventDefault())))}),"f")),window.addEventListener("keyup",(0,i.GG)(this,Oe,(t=>{f.checkKeyBinding(t,lt.A.EditorHeightModifier)&&((0,i.GG)(this,Re,!1,"f"),(0,i.gn)(this,Ue,"f").enableZoom=!0),t.ctrlKey||(f.checkKeyBinding(t,lt.A.EditorDelete)&&(0,i.GG)(this,rn,!1,"f"),f.checkKeyBinding(t,lt.A.EditorMoveForwards)&&(0,i.GG)(this,He,!1,"f"),f.checkKeyBinding(t,lt.A.EditorMoveRight)&&(0,i.GG)(this,Fe,!1,"f"),f.checkKeyBinding(t,lt.A.EditorMoveBackwards)&&(0,i.GG)(this,Ke,!1,"f"),f.checkKeyBinding(t,lt.A.EditorMoveLeft)&&(0,i.GG)(this,Ye,!1,"f"),f.checkKeyBinding(t,lt.A.EditorRotateViewUp)&&(0,i.GG)(this,Ve,!1,"f"),f.checkKeyBinding(t,lt.A.EditorRotateViewDown)&&(0,i.GG)(this,Ze,!1,"f"),f.checkKeyBinding(t,lt.A.EditorRotateViewLeft)&&(0,i.GG)(this,Xe,!1,"f"),f.checkKeyBinding(t,lt.A.EditorRotateViewRight)&&(0,i.GG)(this,je,!1,"f"))}),"f")),window.addEventListener("wheel",(0,i.GG)(this,Ie,(t=>{(0,i.gn)(this,Re,"f")&&(0,i.gn)(this,de,"f")&&(t.deltaY>0?(0,i.GG)(this,Xt,(0,i.gn)(this,Xt,"a",ai)+1,"a",ri):t.deltaY<0&&(0,i.GG)(this,Xt,Math.max(0,(0,i.gn)(this,Xt,"a",ai)-1),"a",ri))}),"f")),window.addEventListener("beforeunload",(0,i.GG)(this,Be,(t=>!(0,i.gn)(this,Je,"f")&&(t.preventDefault(),!0)),"f"));const u=document.getElementById("ui");if(null==u)throw new Error("Failed to find UI element");(0,i.GG)(this,ge,document.createElement("div"),"f"),(0,i.gn)(this,ge,"f").className="hidden",u.appendChild((0,i.gn)(this,ge,"f"));const m=document.createElement("div");m.className="safe-area-left",(0,i.gn)(this,ge,"f").appendChild(m);const v=document.createElement("div");v.className="safe-area-right",(0,i.gn)(this,ge,"f").appendChild(v),(0,i.GG)(this,fe,document.createElement("div"),"f"),(0,i.gn)(this,fe,"f").className="top",(0,i.gn)(this,ge,"f").appendChild((0,i.gn)(this,fe,"f"));const b=document.createElement("div");b.className="button-bar",(0,i.gn)(this,fe,"f").appendChild(b);const k=document.createElement("button");k.className="button",k.innerHTML='<img class="button-icon" src="images/quit.svg"> ',k.append(document.createTextNode((0,i.gn)(this,Qt,"f").get("Exit"))),k.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,Xt,"m",Vn).call(this,p)})),b.appendChild(k);const G=document.createElement("button");G.className="button",G.innerHTML='<img class="button-icon" src="images/test.svg"> ',G.append((0,i.gn)(this,Qt,"f").get("Test")),G.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,Xt,"m",Zn).call(this)})),b.appendChild(G);const x=document.createElement("button");x.className="button",x.innerHTML='<img class="button-icon" src="images/random.svg"> ',x.append((0,i.gn)(this,Qt,"f").get("Generate")),x.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick();const t=()=>{!function(t){let e;t.clear();do{let n=0,i=0,s=0,o=Math.floor(4*Math.random());Math.random()<.5&&(i=Math.floor(20*Math.random()));const a=new Map;function r(){switch(o){case 0:--s;break;case 1:--n;break;case 2:++s;break;case 3:++n}}function h(){switch(o){case 0:++s;break;case 1:++n;break;case 2:--s;break;case 3:--n}}function l(){switch((o+1)%4){case 0:--s;break;case 1:--n;break;case 2:++s;break;case 3:++n}}function c(){switch(((o-1)%4+4)%4){case 0:--s;break;case 1:--n;break;case 2:++s;break;case 3:++n}}function d(t,n,i,s,o=0){const r=t.toString()+"|"+n.toString()+"|"+i.toString();a.has(r)&&(e=!0),a.set(r,{x:t,y:n,z:i,type:s,direction:(o%4+4)%4})}function g(t,e,n){return!!a.has(t.toString()+"|"+e.toString()+"|"+n.toString())}function f(){let t=!1;for(let e=0;e<i;++e)if(g(n,e,s)){t=!0;break}if(!t)for(let t=0;t<i;++t){let e;e=0==t&&t==i-1?22:0==t?21:t==i-1?19:20,d(n,t,s,e,0)}}function p(t){t>0?(--t,Math.random()<.2?M(t):Math.random()<.6?m(t):Math.random()<.5?b(t,i<2||Math.random()<.5):Math.random()<.5?v(t):w(t)):x()}function u(t){t>0?(--t,Math.random()<.1?A(t):Math.random()<.6?E(t):Math.random()<.5?P(t,i<2||Math.random()<.5):Math.random()<.5?C(t):W(t)):A(t)}function m(t){d(n,i,s,gt.A.Straight,o),f(),r(),p(t)}function v(t){d(n,i,s,gt.A.TurnSharp,o-1),f(),o=(o+1)%4,r(),t>0?(--t,Math.random()<.4?m(t):Math.random()<.5?v(t):w(t)):x()}function w(t){d(n,i,s,gt.A.TurnSharp,o),f(),o=((o-1)%4+4)%4,r(),t>0?(--t,Math.random()<.4?m(t):Math.random()<.5?v(t):w(t)):x()}function b(t,e){let a;a=e?2:3,e||--i,d(n,i+1,s,null),d(n,i,s,a,o),r(),e&&++i,t>0?(--t,Math.random()<.4||i<=3?k(t,e):G(t,e)):k(t,e)}function k(t,e){let a;e||--i,d(n,i+1,s,null),a=e?3:2,d(n,i,s,a,o+2),r(),e&&++i,t>0?p(--t):x()}function G(t,e){let a;e||(i-=2),d(n,i+1,s,null),d(n,i+2,s,null),a=e?o:o+2,d(n,i,s,gt.A.Slope,a),r(),e&&(i+=2),t>0?(--t,Math.random()<.4||i<=3?k(t,e):G(t,e)):k(t,e)}function x(){d(n,i,s,gt.A.Finish,o)}function y(t){d(n,i,s,gt.A.Start,o),f(),r(),p(t)}function M(t){Math.random()<.5?(d(n,i,s,gt.A.ToWideLeft,o),f(),c(),d(n,i,s,gt.A.OuterCornerWide,o+2),f(),r()):(d(n,i,s,gt.A.ToWideRight,o),f(),l(),d(n,i,s,gt.A.OuterCornerWide,o+1),f(),r(),c()),u(t)}function A(t){Math.random()<.5?(d(n,i,s,gt.A.OuterCornerWide,o+3),f(),l(),d(n,i,s,gt.A.ToWideRight,o+2),f(),r()):(d(n,i,s,gt.A.ToWideLeft,o+2),f(),l(),d(n,i,s,gt.A.OuterCornerWide,o),f(),r(),c()),p(t)}function E(t){d(n,i,s,gt.A.StraightWide,o),f(),l(),d(n,i,s,gt.A.StraightWide,o+2),f(),c(),r(),u(t)}function C(t){d(n,i,s,gt.A.StraightWide,o),f(),r(),d(n,i,s,gt.A.OuterCornerWide,o+3),f(),l(),d(n,i,s,gt.A.StraightWide,o+1),f(),h(),d(n,i,s,gt.A.InnerCornerWide,o+3),f(),r(),o=(o+1)%4,r(),u(t)}function W(t){d(n,i,s,gt.A.InnerCornerWide,o),f(),l(),d(n,i,s,gt.A.StraightWide,o+2),f(),r(),d(n,i,s,gt.A.OuterCornerWide,o),f(),c(),d(n,i,s,gt.A.StraightWide,o+1),f(),h(),o=((o-1)%4+4)%4,r(),u(t)}function P(t,e){let a,h;e?(a=gt.A.SlopeUpLeftWide,h=gt.A.SlopeUpRightWide):(a=gt.A.SlopeDownLeftWide,h=gt.A.SlopeDownRightWide),e||--i,l(),d(n,i+1,s,null),d(n,i,s,a,o),c(),d(n,i+1,s,null),d(n,i,s,h,o),r(),e&&++i,t>0?(--t,Math.random()<.4||i<=3?L(t,e):z(t,e)):L(t,e)}function L(t,e){let a,h;e||--i,e?(a=gt.A.SlopeDownRightWide,h=gt.A.SlopeDownLeftWide):(a=gt.A.SlopeUpRightWide,h=gt.A.SlopeUpLeftWide),l(),d(n,i+1,s,null),d(n,i,s,a,o+2),c(),d(n,i+1,s,null),d(n,i,s,h,o+2),r(),e&&++i,u(t)}function z(t,e){e||(i-=2),e?(l(),d(n,i+1,s,null),d(n,i+2,s,null),d(n,i,s,gt.A.SlopeLeftWide,o),c(),d(n,i+1,s,null),d(n,i+2,s,null),d(n,i,s,gt.A.SlopeRightWide,o)):(l(),d(n,i+1,s,null),d(n,i+2,s,null),d(n,i,s,gt.A.SlopeRightWide,o+2),c(),d(n,i+1,s,null),d(n,i+2,s,null),d(n,i,s,gt.A.SlopeLeftWide,o+2)),r(),e&&(i+=2),t>0?(--t,Math.random()<.4||i<=3?L(t,e):z(t,e)):L(t,e)}if(e=!1,y(50),!e)for(const N of a.values())if(null!=N.type){let S=null;N.type==gt.A.Start&&(S=0),t.setPart(4*N.x,N.y,4*N.z,N.type,N.direction,ft.A.YPositive,dt.A.Default,null,S)}}while(e)}((0,i.gn)(this,ee,"f")),(0,i.gn)(this,Xt,"m",li).call(this),(0,i.GG)(this,Je,!0,"f"),(0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.gn)(this,yn,"f").length=0,(0,i.gn)(this,Mn,"f").length=0,(0,i.gn)(this,ve,"f").disabled=!0,(0,i.gn)(this,we,"f").disabled=!0};(0,i.gn)(this,Je,"f")?t():((0,i.gn)(this,ge,"f").inert=!0,(0,i.gn)(this,re,"f").showConfirm((0,i.gn)(this,Qt,"f").get("Are you sure you want to generate a new track?\n\nYour current track will be lost!"),(0,i.gn)(this,Qt,"f").get("Cancel"),(0,i.gn)(this,Qt,"f").get("Confirm"),(()=>{(0,i.gn)(this,ge,"f").inert=!1}),(()=>{t(),(0,i.gn)(this,ge,"f").inert=!1})))})),b.appendChild(x),(0,i.GG)(this,ye,new pt.A(u,(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,jt,"f"),(0,i.gn)(this,ie,"f"),(0,i.gn)(this,se,"f"),(0,i.gn)(this,ae,"f"),(0,i.gn)(this,re,"f"),(0,i.gn)(this,oe,"f"),"cancel",!0,(()=>{(0,i.gn)(this,ge,"f").className="editor-ui",(0,i.gn)(this,ye,"f").hide()}),((t,e,n)=>{(0,i.gn)(this,ye,"f").hide(),(0,i.GG)(this,Bn,!0,"f"),(0,i.GG)(this,Me,new wi.A(!0),"f"),n().then((e=>{const n=(0,i.gn)(this,ee,"f").environment;(0,i.gn)(this,ee,"f").loadTrackData(e),(0,i.gn)(this,ee,"f").environment!=n&&(0,i.gn)(this,Xt,"m",ni).call(this),(0,i.gn)(this,Xt,"m",li).call(this),(0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.gn)(this,yn,"f").length=0,(0,i.gn)(this,Mn,"f").length=0,(0,i.gn)(this,ve,"f").disabled=!0,(0,i.gn)(this,we,"f").disabled=!0,(0,i.gn)(this,Xt,"m",Fn).call(this,t),(0,i.GG)(this,Je,!0,"f");const s=(0,i.gn)(this,ee,"f").getStart();if(null!=s)this.resetView(s.x,s.y,s.z);else{const t=(0,i.gn)(this,ee,"f").getBounds();this.resetView(t.min.x+Math.floor((t.max.x-t.min.x)/2),0,t.min.y+Math.floor((t.max.y-t.min.y)/2))}(0,i.gn)(this,ge,"f").className="editor-ui",(0,i.GG)(this,Bn,!1,"f")})).catch((t=>{if(!(t instanceof vi.A))throw t;(0,i.gn)(this,re,"f").show((0,i.gn)(this,Qt,"f").get("Failed to load track"),(0,i.gn)(this,Qt,"f").get("Ok"),(()=>{(0,i.GG)(this,Bn,!1,"f"),(0,i.gn)(this,ye,"f").show()}))})).finally((()=>{(0,i.gn)(this,Me,"f")?.dispose(),(0,i.GG)(this,Me,null,"f")}))})),"f"),(0,i.GG)(this,Ee,new Ct((0,i.gn)(this,ge,"f"),(0,i.gn)(this,jt,"f"),(0,i.gn)(this,he,"f"),(t=>{(0,i.GG)(this,vn,t,"f")}),(t=>{(0,i.GG)(this,mn,t,"f"),(0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f")}),(t=>{(0,i.GG)(this,un,t,"f"),(0,i.gn)(this,Ee,"f").rotationAxis=(0,i.gn)(this,un,"f"),(0,i.gn)(this,Xt,"m",hi).call(this)}),(()=>{(0,i.GG)(this,pn,((0,i.gn)(this,pn,"f")+1)%4,"f"),(0,i.gn)(this,Ee,"f").rotation=(0,i.gn)(this,pn,"f"),(0,i.gn)(this,Xt,"m",hi).call(this)})),"f");const y=document.createElement("button");y.className="button",y.innerHTML='<img class="button-icon" src="images/load.svg"> ',y.append(document.createTextNode((0,i.gn)(this,Qt,"f").get("Load"))),y.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,Je,"f")?((0,i.gn)(this,ye,"f").show(),(0,i.gn)(this,ge,"f").className="hidden"):((0,i.gn)(this,ge,"f").inert=!0,(0,i.gn)(this,re,"f").showConfirm((0,i.gn)(this,Qt,"f").get("Are you sure you want to load a new track?\n\nYour current track will be lost!"),(0,i.gn)(this,Qt,"f").get("Cancel"),(0,i.gn)(this,Qt,"f").get("Confirm"),(()=>{(0,i.gn)(this,ge,"f").inert=!1}),(()=>{(0,i.gn)(this,ye,"f").show(),(0,i.gn)(this,ge,"f").className="hidden",(0,i.gn)(this,ge,"f").inert=!1})))})),b.appendChild(y);const A=document.createElement("button");A.className="button",A.innerHTML='<img class="button-icon" src="images/save.svg"> ',A.append(document.createTextNode((0,i.gn)(this,Qt,"f").get("Save"))),A.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick();const t=t=>{const e={name:t,author:(0,i.gn)(this,Gn,"f"),lastModified:(0,i.gn)(this,xn,"f")},n=(0,i.gn)(this,ee,"f").getTrackData();(0,i.gn)(this,se,"f").saveCustomTrack(e,n)?((0,i.gn)(this,Xt,"m",Qn).call(this,(0,i.gn)(this,Qt,"f").get("Track saved!"),!0),(0,i.GG)(this,Je,!0,"f")):(0,i.gn)(this,Xt,"m",Qn).call(this,(0,i.gn)(this,Qt,"f").get("Failed to save!"),!1)},e=(0,i.gn)(this,kn,"f");if(null==e)(0,i.gn)(this,ge,"f").className="hidden",(0,i.GG)(this,We,new Rt((0,i.gn)(this,jt,"f"),(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,kn,"f"),(0,i.gn)(this,Gn,"f"),(0,i.gn)(this,ee,"f"),(t=>{(0,i.gn)(this,Xt,"m",ei).call(this,t)}),((t,e)=>{(0,i.gn)(this,Xt,"m",Kn).call(this,t),(0,i.gn)(this,Xt,"m",Yn).call(this,e),(0,i.gn)(this,We,"f")?.dispose(),(0,i.GG)(this,We,null,"f"),(0,i.gn)(this,ge,"f").className="editor-ui"}),((e,n)=>{(0,i.gn)(this,Xt,"m",Kn).call(this,e),(0,i.gn)(this,Xt,"m",Yn).call(this,n),(0,i.gn)(this,We,"f")?.dispose(),(0,i.GG)(this,We,null,"f"),t(e),(0,i.gn)(this,ge,"f").className="editor-ui"})),"f");else{(0,i.gn)(this,se,"f").checkCustomTrackNameExists(e)?((0,i.gn)(this,ge,"f").inert=!0,(0,i.gn)(this,re,"f").showConfirm((0,i.gn)(this,Qt,"f").get('Are you sure you want to overwrite "{0}"?',[e]),(0,i.gn)(this,Qt,"f").get("Cancel"),(0,i.gn)(this,Qt,"f").get("Confirm"),(()=>{(0,i.gn)(this,ge,"f").inert=!1}),(()=>{t(e),(0,i.gn)(this,ge,"f").inert=!1}))):t(e)}})),b.appendChild(A);const E=document.createElement("button");E.className="button",E.innerHTML='<img class="button-icon" src="images/export.svg"> ',E.append(document.createTextNode((0,i.gn)(this,Qt,"f").get("Export"))),E.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick();const t=(0,i.gn)(this,kn,"f");if(null==t)(0,i.gn)(this,ge,"f").className="hidden",(0,i.GG)(this,We,new Rt((0,i.gn)(this,jt,"f"),(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,kn,"f"),(0,i.gn)(this,Gn,"f"),(0,i.gn)(this,ee,"f"),(t=>{(0,i.gn)(this,Xt,"m",ei).call(this,t)}),((t,e)=>{(0,i.gn)(this,Xt,"m",Kn).call(this,t),(0,i.gn)(this,Xt,"m",Yn).call(this,e),(0,i.gn)(this,We,"f")?.dispose(),(0,i.GG)(this,We,null,"f"),(0,i.gn)(this,ge,"f").className="editor-ui"}),((t,e)=>{(0,i.gn)(this,Xt,"m",Kn).call(this,t),(0,i.gn)(this,Xt,"m",Yn).call(this,e),(0,i.gn)(this,We,"f")?.dispose(),(0,i.GG)(this,We,null,"f");const n={name:t,author:(0,i.gn)(this,Gn,"f"),lastModified:(0,i.gn)(this,xn,"f")},s=(0,i.gn)(this,ee,"f").getTrackData().toExportString(n);(0,i.GG)(this,Ae,new ct.A(s,(()=>{(0,i.gn)(this,Ae,"f")?.dispose(),(0,i.GG)(this,Ae,null,"f"),(0,i.gn)(this,ge,"f").className="editor-ui"}),null,(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,jt,"f"),(0,i.gn)(this,se,"f"),(0,i.gn)(this,re,"f")),"f")})),"f");else{(0,i.gn)(this,ge,"f").className="hidden";const e={name:t,author:(0,i.gn)(this,Gn,"f"),lastModified:(0,i.gn)(this,xn,"f")},n=(0,i.gn)(this,ee,"f").getTrackData().toExportString(e);(0,i.GG)(this,Ae,new ct.A(n,(()=>{(0,i.gn)(this,Ae,"f")?.dispose(),(0,i.GG)(this,Ae,null,"f"),(0,i.gn)(this,ge,"f").className="editor-ui"}),null,(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,jt,"f"),(0,i.gn)(this,se,"f"),(0,i.gn)(this,re,"f")),"f")}})),b.appendChild(E);const C=document.createElement("button");C.className="button",C.innerHTML='<img class="button-icon" src="images/help.svg"> ',C.append(document.createTextNode((0,i.gn)(this,Qt,"f").get("Help"))),C.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick();const t=(0,i.gn)(this,ne,"f").getPart(gt.A.Start).colors.get(dt.A.Summer);if(null==t)throw new Error("Starting point mesh is null");const e=Zt(t),n=(0,i.gn)(this,ne,"f").getPart(gt.A.Checkpoint).colors.get(dt.A.Summer);if(null==n)throw new Error("Checkpoint mesh is null");const s=Zt(n),o=(0,i.gn)(this,ne,"f").getPart(gt.A.Finish).colors.get(dt.A.Summer);if(null==o)throw new Error("Finish line mesh is null");const a=Zt(o);(0,i.gn)(this,ge,"f").className="hidden",(0,i.GG)(this,Ce,new St((0,i.gn)(this,jt,"f"),(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,le,"f"),(0,i.gn)(this,he,"f"),e,s,a,(()=>{(0,i.gn)(this,Ce,"f")?.dispose(),(0,i.GG)(this,Ce,null,"f"),(0,i.gn)(this,ge,"f").className="editor-ui"})),"f")})),b.appendChild(C);const W=document.createElement("div");W.className="track-settings-container",(0,i.gn)(this,fe,"f").appendChild(W),(0,i.GG)(this,Pe,document.createElement("button"),"f"),(0,i.gn)(this,Pe,"f").className="button",(0,i.gn)(this,Pe,"f").innerHTML='<img class="button-icon" src="images/settings.svg"> ',(0,i.gn)(this,Pe,"f").append(document.createTextNode((0,i.gn)(this,kn,"f")??(0,i.gn)(this,Qt,"f").get("Unnamed Track"))),(0,i.gn)(this,Pe,"f").addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,ge,"f").className="hidden",(0,i.GG)(this,We,new Rt((0,i.gn)(this,jt,"f"),(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,kn,"f"),(0,i.gn)(this,Gn,"f"),(0,i.gn)(this,ee,"f"),(t=>{(0,i.gn)(this,Xt,"m",ei).call(this,t)}),((t,e)=>{(0,i.gn)(this,Xt,"m",Kn).call(this,t),(0,i.gn)(this,Xt,"m",Yn).call(this,e),(0,i.gn)(this,We,"f")?.dispose(),(0,i.GG)(this,We,null,"f"),(0,i.gn)(this,ge,"f").className="editor-ui"}),null),"f")})),W.appendChild((0,i.gn)(this,Pe,"f")),(0,i.GG)(this,pe,document.createElement("div"),"f"),(0,i.gn)(this,pe,"f").className="message",(0,i.gn)(this,ge,"f").appendChild((0,i.gn)(this,pe,"f"));const P=document.createElement("side");P.className="side",(0,i.gn)(this,ge,"f").appendChild(P);const L=document.createElement("div");L.className="container",P.appendChild(L);const z=document.createElement("div");z.className="mini-toolbar-container",L.appendChild(z);const N=document.createElement("button");N.className="button",N.innerHTML='<img class="button-icon" src="images/cut.svg">',N.addEventListener("click",(()=>{(0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!0,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.GG)(this,Tn,null,"f"),(0,i.gn)(this,Xt,"m",oi).call(this,null)})),z.appendChild(N);const T=document.createElement("button");T.className="button",T.innerHTML='<img class="button-icon" src="images/copy.svg">',T.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.GG)(this,Ln,!0,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.GG)(this,Tn,null,"f"),(0,i.gn)(this,Xt,"m",oi).call(this,null)})),z.appendChild(T),(0,i.GG)(this,me,document.createElement("button"),"f"),(0,i.gn)(this,me,"f").className="button",(0,i.gn)(this,me,"f").disabled=!0,(0,i.gn)(this,me,"f").innerHTML='<img class="button-icon" src="images/paste.svg">',(0,i.gn)(this,me,"f").addEventListener("click",(()=>{null!=(0,i.gn)(this,Tn,"f")?(0,i.gn)(this,Xt,"m",Hn).call(this):null!=(0,i.gn)(this,Sn,"f")&&(0,i.gn)(this,Xt,"m",Rn).call(this),(0,i.gn)(this,Xt,"m",oi).call(this,null)})),z.appendChild((0,i.gn)(this,me,"f"));const q=document.createElement("div");q.className="undo-container",z.appendChild(q),(0,i.GG)(this,ve,document.createElement("button"),"f"),(0,i.gn)(this,ve,"f").disabled=!0,(0,i.gn)(this,ve,"f").className="button",(0,i.gn)(this,ve,"f").innerHTML='<img class="button-icon" src="images/undo.svg">',(0,i.gn)(this,ve,"f").addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,Xt,"m",jn).call(this)})),q.appendChild((0,i.gn)(this,ve,"f")),(0,i.GG)(this,we,document.createElement("button"),"f"),(0,i.gn)(this,we,"f").disabled=!0,(0,i.gn)(this,we,"f").className="button",(0,i.gn)(this,we,"f").innerHTML='<img class="button-icon" src="images/redo.svg">',(0,i.gn)(this,we,"f").addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,Xt,"m",Jn).call(this)})),q.appendChild((0,i.gn)(this,we,"f")),(0,i.GG)(this,xe,new X(L,(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,jt,"f"),(0,i.gn)(this,he,"f")),"f"),(0,i.GG)(this,be,document.createElement("div"),"f"),(0,i.gn)(this,be,"f").className="side-panel",P.appendChild((0,i.gn)(this,be,"f")),(0,i.GG)(this,ke,document.createElement("div"),"f"),(0,i.gn)(this,ke,"f").className="category-panel",(0,i.gn)(this,be,"f").appendChild((0,i.gn)(this,ke,"f"));const D=document.createElement("button");D.addEventListener("click",(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.gn)(this,Xt,"m",si).call(this,null)})),(0,i.gn)(this,ke,"f").appendChild(D);const O=document.createElement("img");O.src="images/erase.svg",D.appendChild(O),(0,i.gn)(this,Cn,"f").push({id:null,trackPartData:null,button:D,image:O,colorPanel:null,colorButtons:[],tiles:new ut.A([[-2,0,-2],[-1,0,-2],[0,0,-2],[1,0,-2],[-2,0,-1],[-1,0,-1],[0,0,-1],[1,0,-1],[-2,0,0],[-1,0,0],[0,0,0],[1,0,0],[-2,0,1],[-1,0,1],[0,0,1],[1,0,1]]),isCheckpoint:!1,isStart:!1,category:null}),(0,i.GG)(this,Ge,new rt((0,i.gn)(this,ge,"f"),(0,i.gn)(this,Qt,"f"),(0,i.gn)(this,he,"f"),(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.GG)(this,Xt,(0,i.gn)(this,Xt,"a",ai)+1,"a",ri)}),(()=>{(0,i.gn)(this,jt,"f").playUIClick(),(0,i.GG)(this,Xt,Math.max(0,(0,i.gn)(this,Xt,"a",ai)-1),"a",ri)})),"f"),(0,i.gn)(this,Ge,"f").refresh((0,i.gn)(this,Xt,"a",ai))}dispose(){(0,i.GG)(this,de,!1,"f"),(0,i.gn)(this,En,"f")?.dispose(),(0,i.gn)(this,Ge,"f").dispose(),(0,i.gn)(this,xe,"f").dispose(),(0,i.gn)(this,Ae,"f")?.dispose(),(0,i.GG)(this,Ae,null,"f"),(0,i.gn)(this,ye,"f").dispose(),(0,i.gn)(this,Me,"f")?.dispose(),(0,i.GG)(this,Me,null,"f"),(0,i.gn)(this,Ee,"f").dispose(),(0,i.gn)(this,Ce,"f")?.dispose(),(0,i.GG)(this,Ce,null,"f");const t=document.getElementById("ui");if(null==t)throw new Error("Failed to find UI element");t.removeChild((0,i.gn)(this,ge,"f")),(0,i.gn)(this,$t,"f").scene.remove((0,i.gn)(this,_e,"f")),(0,i.gn)(this,Ue,"f").dispose(),(0,i.gn)(this,$t,"f").canvas.style.touchAction="",(0,i.gn)(this,en,"f").dispose(),(0,i.gn)(this,$t,"f").removeMaterial((0,i.gn)(this,en,"f"));for(const t of(0,i.gn)(this,tn,"f").children){if(!(t instanceof w.eaF))throw new Error("Object is not a mesh");const e=t;if(e.geometry.dispose(),Array.isArray(e.material))for(const t of e.material){if(!(t instanceof w.imn))throw new Error("Material is not a THREE.Material");t.dispose()}else e.material.dispose()}if((0,i.gn)(this,$t,"f").scene.remove((0,i.gn)(this,tn,"f")),null!=(0,i.gn)(this,an,"f")&&((0,i.gn)(this,$t,"f").scene.remove((0,i.gn)(this,an,"f")),(0,i.gn)(this,an,"f").dispose(),(0,i.gn)(this,on,"f").dispose(),(0,i.gn)(this,sn,"f").dispose(),(0,i.GG)(this,an,null,"f")),null!=(0,i.gn)(this,qn,"f")&&((0,i.gn)(this,$t,"f").scene.remove((0,i.gn)(this,qn,"f").fill),(0,i.gn)(this,qn,"f").fill.geometry.dispose(),(0,i.gn)(this,qn,"f").fill.material.dispose(),(0,i.gn)(this,$t,"f").scene.remove((0,i.gn)(this,qn,"f").outline),(0,i.gn)(this,qn,"f").outline.geometry.dispose(),(0,i.gn)(this,qn,"f").outline.material.dispose(),(0,i.GG)(this,qn,null,"f")),(0,i.gn)(this,$e,"f").geometry.dispose(),Array.isArray((0,i.gn)(this,$e,"f").material))for(const t of(0,i.gn)(this,$e,"f").material){if(!(t instanceof w.imn))throw new Error("Material is not a THREE.Material");t.dispose()}else(0,i.gn)(this,$e,"f").material.dispose();(0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.GG)(this,Tn,null,"f"),(0,i.gn)(this,Xt,"m",ii).call(this),(0,i.gn)(this,yn,"f").length=0,(0,i.gn)(this,Mn,"f").length=0,(0,i.gn)(this,ve,"f").disabled=!0,(0,i.gn)(this,we,"f").disabled=!0,(0,i.gn)(this,$t,"f").canvas.removeEventListener("mousemove",(0,i.gn)(this,Le,"f")),(0,i.gn)(this,$t,"f").canvas.removeEventListener("mousedown",(0,i.gn)(this,ze,"f")),window.removeEventListener("mouseup",(0,i.gn)(this,Ne,"f")),(0,i.gn)(this,$t,"f").canvas.removeEventListener("mouseout",(0,i.gn)(this,Se,"f")),(0,i.gn)(this,$t,"f").canvas.removeEventListener("touchstart",(0,i.gn)(this,Te,"f")),(0,i.gn)(this,$t,"f").canvas.removeEventListener("click",(0,i.gn)(this,qe,"f")),window.removeEventListener("keydown",(0,i.gn)(this,De,"f")),window.removeEventListener("keyup",(0,i.gn)(this,Oe,"f")),window.removeEventListener("wheel",(0,i.gn)(this,Ie,"f")),window.removeEventListener("beforeunload",(0,i.gn)(this,Be,"f"))}getTrackMetadata(){return{name:(0,i.gn)(this,kn,"f")??(0,i.gn)(this,Qt,"f").get("Unnamed Track"),author:(0,i.gn)(this,Gn,"f"),lastModified:(0,i.gn)(this,xn,"f")}}setTestCallback(t){(0,i.GG)(this,ce,t,"f")}enable(){(0,i.GG)(this,de,!0,"f"),1==(0,i.gn)(this,Cn,"f").length&&(0,i.gn)(this,Xt,"m",$n).call(this),(0,i.gn)(this,En,"f")?.dispose(),(0,i.GG)(this,En,new D((0,i.gn)(this,$t,"f")),"f"),(0,i.gn)(this,En,"f").refresh((0,i.gn)(this,ee,"f")),(0,i.gn)(this,Ee,"f").show(),(0,i.gn)(this,ge,"f").className="editor-ui"}disable(){(0,i.GG)(this,de,!1,"f"),(0,i.gn)(this,tn,"f").visible=!1,(0,i.GG)(this,Ln,!1,"f"),(0,i.GG)(this,zn,!1,"f"),(0,i.GG)(this,Nn,null,"f"),(0,i.gn)(this,Xt,"m",_n).call(this),(0,i.gn)(this,En,"f")?.dispose(),(0,i.gn)(this,ge,"f").className="hidden",(0,i.gn)(this,Ae,"f")?.dispose(),(0,i.GG)(this,Ae,null,"f"),(0,i.gn)(this,ye,"f").hide(),(0,i.gn)(this,Ee,"f").hide(),(0,i.gn)(this,Ce,"f")?.dispose(),(0,i.GG)(this,Ce,null,"f")}isEnabled(){return(0,i.gn)(this,de,"f")}resetView(t,e,n){(0,i.GG)(this,Xt,e,"a",ri);const s=new w.Pq0(t*S.A.partSize,e*S.A.partSize,n*S.A.partSize);(0,i.gn)(this,_e,"f").position.copy(s).add(new w.Pq0(40,40,-40)),(0,i.gn)(this,Ue,"f").target.copy(s),(0,i.gn)(this,Ue,"f").update()}get camera(){return(0,i.gn)(this,_e,"f")}update(t){if((0,i.gn)(this,Xt,"m",ui).call(this,t),(0,i.gn)(this,Ue,"f").enabled=(0,i.gn)(this,Xt,"m",mi).call(this),(0,i.gn)(this,de,"f")){if((0,i.gn)(this,_e,"f").position.y<.499&&((0,i.gn)(this,_e,"f").position.y=.5,(0,i.gn)(this,Ue,"f").update()),(0,i.gn)(this,Xt,"m",_n).call(this),(0,i.GG)(this,gn,(0,i.gn)(this,Xt,"m",di).call(this),"f"),null!=(0,i.gn)(this,gn,"f")){const t=T.hT((0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f")),e=new w.Pq0((0,i.gn)(this,gn,"f").x*S.A.partSize,(0,i.gn)(this,gn,"f").y*S.A.partSize,(0,i.gn)(this,gn,"f").z*S.A.partSize);(0,i.gn)(this,tn,"f").position.copy(e),(0,i.gn)(this,tn,"f").quaternion.copy(t),(0,i.gn)(this,tn,"f").visible=!0}else(0,i.gn)(this,tn,"f").visible=!1;const t=(0,i.gn)(this,gn,"f");if(null!=t&&null!=(0,i.gn)(this,Tn,"f")){if(null==(0,i.gn)(this,Dn,"f")||(0,i.gn)(this,Dn,"f").x!=t.x||(0,i.gn)(this,Dn,"f").y!=t.y||(0,i.gn)(this,Dn,"f").z!=t.z){let e;(0,i.GG)(this,Dn,t,"f"),e=!(0,i.gn)(this,vn,"f")&&(0,i.gn)(this,Xt,"m",fi).call(this,t,(0,i.gn)(this,Tn,"f").tiles),e?((0,i.gn)(this,en,"f").color.set(12303104),(0,i.gn)(this,sn,"f").color.set(12303104)):((0,i.gn)(this,en,"f").color.set(187),(0,i.gn)(this,sn,"f").color.set(187))}}else if(null!=t&&null!=(0,i.gn)(this,Wn,"f")){const e=(0,i.gn)(this,Cn,"f")[(0,i.gn)(this,Wn,"f")],n=(0,i.gn)(this,Xt,"m",gi).call(this,t,e.tiles);if(null==e.id||(0,i.gn)(this,rn,"f"))n.length>0?((0,i.gn)(this,en,"f").color.set(12255232),(0,i.gn)(this,sn,"f").color.set(12255232)):((0,i.gn)(this,en,"f").color.set(12263970),(0,i.gn)(this,sn,"f").color.set(12263970));else{let s,o;if((0,i.gn)(this,vn,"f"))s=n.some((({parts:n})=>n.some((n=>n.id==e.id&&n.x==t.x&&n.y==t.y&&n.z==t.z&&n.rotation==(0,i.gn)(this,pn,"f")&&n.rotationAxis==(0,i.gn)(this,un,"f"))))),o=!1;else{s=!1;for(const{parts:a}of n)for(const n of a){if(!(0,i.gn)(this,ne,"f").isPartCombinationAllowed({id:e.id,x:t.x,y:t.y,z:t.z,rotation:(0,i.gn)(this,pn,"f"),rotationAxis:(0,i.gn)(this,un,"f")},{id:n.id,x:n.x,y:n.y,z:n.z,rotation:n.rotation,rotationAxis:n.rotationAxis})){s=!0;break}o=!0}}s?((0,i.gn)(this,en,"f").color.set(12303104),(0,i.gn)(this,sn,"f").color.set(12303104)):o?((0,i.gn)(this,en,"f").color.set(48059),(0,i.gn)(this,sn,"f").color.set(48059)):((0,i.gn)(this,en,"f").color.set(187),(0,i.gn)(this,sn,"f").color.set(187))}const s=[],o=[];if((0,i.gn)(this,rn,"f")){if(null==(0,i.gn)(this,bn,"f")||(0,i.gn)(this,bn,"f").x!=t.x||(0,i.gn)(this,bn,"f").y!=t.y||(0,i.gn)(this,bn,"f").z!=t.z){let o=null;for(const{parts:s}of n){for(const n of s)if(n.id==e.id&&n.x==t.x&&n.y==t.y&&n.z==t.z&&n.rotation==(0,i.gn)(this,pn,"f")&&n.rotationAxis==(0,i.gn)(this,un,"f")){o=[n];break}if(null!=o)break}(0,i.gn)(this,Xt,"m",pi).call(this,o??n.flatMap((({parts:t})=>t)),s),(0,i.GG)(this,bn,{x:t.x,y:t.y,z:t.z},"f")}}else if((0,i.gn)(this,hn,"f")||(0,i.gn)(this,dn,"f")){if(null==e.id)null!=(0,i.gn)(this,bn,"f")&&(0,i.gn)(this,bn,"f").x==t.x&&(0,i.gn)(this,bn,"f").y==t.y&&(0,i.gn)(this,bn,"f").z==t.z||((0,i.gn)(this,Xt,"m",pi).call(this,n.flatMap((({parts:t})=>t)),s),(0,i.GG)(this,bn,{x:t.x,y:t.y,z:t.z},"f"));else if(null==(0,i.gn)(this,wn,"f")||(0,i.gn)(this,wn,"f").x!=t.x||(0,i.gn)(this,wn,"f").y!=t.y||(0,i.gn)(this,wn,"f").z!=t.z||(0,i.gn)(this,wn,"f").id!=e.id||(0,i.gn)(this,wn,"f").rotation!=(0,i.gn)(this,pn,"f")||(0,i.gn)(this,wn,"f").rotationAxis!=(0,i.gn)(this,un,"f")){if((0,i.gn)(this,vn,"f"))for(const{parts:o}of n){const n=o.find((n=>n.id==e.id&&n.x==t.x&&n.y==t.y&&n.z==t.z&&n.rotation==(0,i.gn)(this,pn,"f")&&n.rotationAxis==(0,i.gn)(this,un,"f")));null!=n&&null!=(0,i.gn)(this,ee,"f").deleteSpecificPart(n.id,n.x,n.y,n.z,n.rotation,n.rotationAxis)&&s.push({id:n.id,x:n.x,y:n.y,z:n.z,rotation:n.rotation,rotationAxis:n.rotationAxis,color:n.color,checkpointOrder:n.checkpointOrder,startOrder:n.startOrder})}else for(const{parts:o}of n)for(const n of o)(0,i.gn)(this,ne,"f").isPartCombinationAllowed({id:e.id,x:t.x,y:t.y,z:t.z,rotation:(0,i.gn)(this,pn,"f"),rotationAxis:(0,i.gn)(this,un,"f")},{id:n.id,x:n.x,y:n.y,z:n.z,rotation:n.rotation,rotationAxis:n.rotationAxis})||null!=(0,i.gn)(this,ee,"f").deleteSpecificPart(n.id,n.x,n.y,n.z,n.rotation,n.rotationAxis)&&s.push({id:n.id,x:n.x,y:n.y,z:n.z,rotation:n.rotation,rotationAxis:n.rotationAxis,color:n.color,checkpointOrder:n.checkpointOrder,startOrder:n.startOrder});let a=null;e.isCheckpoint&&(a=(0,i.gn)(this,xe,"f").checkpointOrder);let r=null;e.isStart&&(r=(0,i.gn)(this,ee,"f").getNextStartOrder()),(0,i.gn)(this,ee,"f").setPart(t.x,t.y,t.z,e.id,(0,i.gn)(this,pn,"f"),(0,i.gn)(this,un,"f"),(0,i.gn)(this,Xt,"m",ti).call(this),a,r),(0,i.gn)(this,Xt,"m",ci).call(this),o.push({id:e.id,x:t.x,y:t.y,z:t.z,rotation:(0,i.gn)(this,pn,"f"),rotationAxis:(0,i.gn)(this,un,"f"),color:(0,i.gn)(this,Xt,"m",ti).call(this),checkpointOrder:a,startOrder:r}),(0,i.GG)(this,wn,{x:t.x,y:t.y,z:t.z,id:e.id,rotation:(0,i.gn)(this,pn,"f"),rotationAxis:(0,i.gn)(this,un,"f")},"f"),(0,i.gn)(this,Xt,"m",li).call(this)}(0,i.GG)(this,dn,!1,"f")}else(0,i.GG)(this,wn,null,"f"),(0,i.GG)(this,bn,null,"f");(s.length>0||o.length>0)&&((0,i.gn)(this,yn,"f").push({removed:s,added:o}),(0,i.gn)(this,Mn,"f").length=0,(0,i.gn)(this,ve,"f").disabled=0==(0,i.gn)(this,yn,"f").length,(0,i.gn)(this,we,"f").disabled=0==(0,i.gn)(this,Mn,"f").length),(0,i.gn)(this,tn,"f").visible=!0}else(0,i.gn)(this,tn,"f").visible=!1,(0,i.GG)(this,wn,null,"f"),(0,i.GG)(this,bn,null,"f")}}};var ki,Gi,xi,yi,Mi,Ai,Ei=n(243);ki=new WeakMap,Gi=new WeakMap,xi=new WeakMap,yi=new WeakMap,Mi=new WeakMap,Ai=new WeakMap;const Ci=class{constructor(t,e,n,s,o,a,r,h,l,c,d,g,f,p,u,m,v){ki.set(this,void 0),Gi.set(this,void 0),xi.set(this,void 0),yi.set(this,void 0),Mi.set(this,void 0),Ai.set(this,void 0),(0,i.GG)(this,ki,t,"f"),(0,i.GG)(this,Gi,s,"f"),(0,i.GG)(this,xi,o,"f"),(0,i.GG)(this,yi,r,"f"),(0,i.GG)(this,Mi,h,"f"),(0,i.GG)(this,Ai,new bi(a,r,h,c,t,e,n,d,g,f,p,u,l,m),"f"),(0,i.gn)(this,Ai,"f").enable(),(0,i.gn)(this,ki,"f").clear(),(0,i.gn)(this,ki,"f").setPart(0,0,0,gt.A.Start,0,ft.A.YPositive,dt.A.Default,null,0),(0,i.gn)(this,ki,"f").generateMeshes(),h.setCamera((0,i.gn)(this,Ai,"f").camera),(0,i.gn)(this,Ai,"f").setTestCallback((()=>{(0,i.gn)(this,Ai,"f").disable();const t=(0,i.gn)(this,Ai,"f").getTrackMetadata();v(t,(0,i.gn)(this,ki,"f").getTrackData(),(()=>{(0,i.gn)(this,Ai,"f").enable(),h.setCamera((0,i.gn)(this,Ai,"f").camera)}))}))}dispose(){(0,i.gn)(this,Ai,"f").dispose(),(0,i.gn)(this,ki,"f").clear()}update(t){Ei.ip()||(0,i.gn)(this,Ai,"f").update(t),(0,i.gn)(this,Gi,"f").update((0,i.gn)(this,ki,"f")),(0,i.gn)(this,xi,"f").update(t,(0,i.gn)(this,Mi,"f").camera,(0,i.gn)(this,ki,"f").sunDirection),(0,i.gn)(this,yi,"f").update(t,!1,(0,i.gn)(this,Mi,"f")),(0,i.gn)(this,Mi,"f").update((0,i.gn)(this,ki,"f").sunDirection)}static async initResources(){await D.initResources()}}},4512:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(1601),s=n.n(i),o=n(6314),a=n.n(o)()(s());a.push([t.id,'.editor-track-settings-ui > .background {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 1;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(20, 20, 30, 0.5);\n\tpointer-events: auto;\n}\n\n.editor-track-settings-ui > .container {\n\tposition: absolute;\n\tleft: calc(50% - 600px / 2);\n\ttop: 0;\n\tz-index: 2;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbox-sizing: border-box;\n\twidth: 600px;\n\theight: 100%;\n\tbackground-color: var(--surface-color);\n}\n\n.editor-track-settings-ui > .container > h1 {\n\tmargin: 10px;\n\tpadding: 0;\n\tfont-weight: normal;\n\tfont-size: 38px;\n\ttext-align: center;\n\tcolor: var(--text-color);\n}\n\n.editor-track-settings-ui > .container > .content {\n\tflex-grow: 1;\n\tbackground-color: var(--surface-secondary-color);\n\toverflow-y: auto;\n\tpointer-events: auto;\n}\n\n.editor-track-settings-ui > .container > .content > .setting {\n\tmargin: 20px;\n\tpadding: 20px;\n\tbackground-color: var(--surface-color);\n\toutline: 2px solid transparent;\n\ttransition: outline 0.25s ease-in-out;\n}\n\n.editor-track-settings-ui > .container > .content > .setting.error {\n\toutline: 2px solid #e34c4c;\n}\n\n.editor-track-settings-ui > .container > .content > .setting > .title {\n\tdisplay: block;\n\tmargin: 0;\n\tpadding: 0;\n\tfont-size: 30px;\n\tcolor: var(--text-color);\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="text"] {\n\twidth: calc(100% - 20px);\n\tfont-weight: normal;\n\tfont-size: 30px;\n}\n\n.editor-track-settings-ui > .container > .content > .setting > .environment-button {\n\tdisplay: inline-block;\n\tmargin: 10px 0;\n\tpadding: 10px;\n\twidth: calc(100% / 3);\n\tcolor: var(--text-color);\n\tfont-size: 27px;\n}\n.editor-track-settings-ui > .container > .content > .setting > .environment-button.selected {\n\tbackground-color: var(--button-hover-color);\n}\n.editor-track-settings-ui > .container > .content > .setting > .environment-button > img {\n\tmargin: 0;\n\tpadding: 10px 30px;\n\twidth: calc(100% - 2 * 30px);\n\taspect-ratio: 1 / 1;\n\tpointer-events: none;\n}\n\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"] {\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 100%;\n\theight: 64px;\n\t-webkit-appearance: none;\n\tappearance: none;\n\tbackground: transparent;\n\tcursor: pointer;\n\taccent-color: var(--text-color);\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-webkit-slider-runnable-track {\n\tbackground-color: var(--surface-tertiary-color);\n\theight: 10px;\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-moz-range-track {\n\tbackground-color: var(--surface-tertiary-color);\n\theight: 10px;\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-webkit-slider-thumb {\n\t-webkit-appearance: none;\n\tappearance: none;\n\tborder-radius: 0;\n\tbackground: var(--text-color);\n\twidth: 32px;\n\theight: 32px;\n\tmargin: -13px 0 0 0;\n\tborder: 4px solid var(--button-color);\n\toutline: 2px solid var(--text-color);\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-webkit-slider-thumb:hover {\n\tborder: 4px solid var(--button-hover-color);\n}\n@media (hover: none) {\n\t.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-webkit-slider-thumb:hover {\n\t\tborder: 4px solid var(--button-color);\n\t}\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-webkit-slider-thumb:active {\n\tborder: 4px solid var(--button-active-color);\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-moz-range-thumb {\n\t-webkit-appearance: none;\n\tappearance: none;\n\tborder-radius: 0;\n\tbackground: var(--text-color);\n\twidth: 24px;\n\theight: 24px;\n\tborder: 4px solid var(--button-color);\n\toutline: 2px solid var(--text-color);\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-moz-range-thumb:hover {\n\tborder: 4px solid var(--button-hover-color);\n}\n@media (hover: none) {\n\t.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-moz-range-thumb:hover {\n\t\tborder: 4px solid var(--button-color);\n\t}\n}\n.editor-track-settings-ui > .container > .content > .setting > input[type="range"]::-moz-range-thumb:active {\n\tborder: 4px solid var(--button-active-color);\n}\n\n\n.editor-track-settings-ui > .container > .button-wrapper > button {\n\tmargin: 10px;\n}\n\n.editor-track-settings-ui > .container > .button-wrapper > button:not(:first-child) {\n\tfloat: right;\n}\n',""]);const r=a},5298:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(1601),s=n.n(i),o=n(6314),a=n.n(o)()(s());a.push([t.id,".editor-height-selector-ui {\n\tposition: absolute;\n\tleft: var(--safe-area-left);\n\tbottom: 0;\n\tpointer-events: auto;\n}\n\n.editor-height-selector-ui > .buttons {\n\tdisplay: inline-block;\n\tvertical-align: bottom;\n}\n.editor-height-selector-ui > .buttons > button {\n\tdisplay: block;\n\tmargin: 0;\n\tpadding: 0;\n\tborder: none;\n\tbackground-color: var(--button-color);\n\tcursor: pointer;\n}\n.editor-height-selector-ui > .buttons > button:hover {\n\tbackground-color: var(--button-hover-color);\n}\n.editor-height-selector-ui > .buttons > button:active {\n\tbackground-color: var(--button-active-color);\n}\n@media (hover: none) {\n\t.editor-height-selector-ui > .buttons > button:hover {\n\t\tbackground-color: var(--button-color);\n\t}\n}\n\n.editor-height-selector-ui > .buttons > button > img { \n\tmargin: 0;\n\tpadding: 0 6px;\n\twidth: 20px;\n\theight: 20px;\n\tvertical-align: bottom;\n\tpointer-events: none;\n}\n.editor-height-selector-ui.touch > .buttons > button > img {\n\tpadding: 24px;\n\twidth: 40px;\n\theight: 40px;\n}\n\n.editor-height-selector-ui > p {\n\tmargin: 0;\n\tpadding: 0 10px;\n\tdisplay: inline-block;\n\tvertical-align: bottom;\n\tline-height: 40px;\n\tmin-width: 140px;\n\tfont-size: 26px;\n\ttext-align: center;\n\tbackground-color: var(--surface-transparent-color);\n\tcolor: var(--text-color);\n}\n.editor-height-selector-ui.touch > p {\n\tline-height: calc((40px + 2 * 24px) * 2);\n}\n",""]);const r=a},6057:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(1601),s=n.n(i),o=n(6314),a=n.n(o)()(s());a.push([t.id,".editor-ui {\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.editor-ui > .safe-area-left {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\twidth: var(--safe-area-left);\n\theight: 100%;\n\tbackground-color: var(--surface-color);\n}\n\n.editor-ui > .safe-area-right {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\twidth: var(--safe-area-right);\n\theight: 100%;\n\tbackground-color: var(--surface-color);\n}\n\n.editor-ui > .top {\n\tdisplay: block;\n\tmargin: 0;\n\tpadding: 0 var(--safe-area-right) 0 var(--safe-area-left);\n}\n\n.editor-ui > .top > .button-bar {\n\tdisplay: flex;\n\tmargin: 0;\n\tpadding: 0 8px;\n\theight: 68px;\n\tbackground-color: var(--surface-color);\n\twhite-space: nowrap;\n\tpointer-events: auto;\n}\n.editor-ui > .top > .button-bar > .button {\n\tmargin: 8px 0;\n\tmin-width: 0;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.editor-ui > .top > .track-settings-container {\n\tdisplay: inline-block;\n\tmargin: -1px 0 0 0;\n\tpadding: 6px 7px;\n\tclip-path: polygon(0 0, 100% 0, calc(100% - 10px) 100%, 0 100%);\n\tfont-size: 30px;\n\tcolor: var(--text-color);\n\tbackground: var(--surface-secondary-color);\n\tpointer-events: auto;\n}\n.editor-ui > .top > .track-settings-container > button {\n\ttext-align: left;\n\tmin-width: 150px;\n\tmax-width: 450px;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.editor-ui > .side {\n\tposition: absolute;\n\ttop: 68px;\n\tright: 0;\n\tmargin: 0;\n\tpadding: 0 var(--safe-area-right) 0 0;\n\theight: calc(100% - 68px);\n\tdisplay: flex;\n\talign-items: end;\n}\n\n.editor-ui > .side > .container {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tjustify-content: space-between;\n\talign-items: end;\n}\n\n.editor-ui > .side > .container > .mini-toolbar-container {\n\tdisplay: flex;\n\tbackground-color: var(--surface-transparent-color);\n\tclip-path: polygon(0 0, 100% 0, 100% 100%, 10px 100%);\n\tpointer-events: auto;\n}\n.editor-ui > .side > .container > .mini-toolbar-container > button {\n\tmargin: 6px 0;\n\tclip-path: polygon(0 0, calc(100% - 8px) 0, 100% 100%, 8px 100%);\n}\n.editor-ui > .side > .container > .mini-toolbar-container > button:first-of-type {\n\tmargin-left: 7px;\n}\n.editor-ui > .side > .container > .mini-toolbar-container > button:last-of-type {\n\tmargin-right: -2px;\n}\n\n.editor-ui > .side > .container > .mini-toolbar-container > .undo-container {\n\tmargin: 0;\n\tpadding: 6px 7px;\n\tclip-path: polygon(0 0, 100% 0, 100% 100%, 10px 100%);\n\tbackground: var(--surface-secondary-color);\n}\n\n.editor-ui > .side > .container > .mini-toolbar-container > .undo-container > button:first-of-type {\n\tmargin-right: 3px;\n\tclip-path: polygon(0 0, 100% 0, 100% 100%, 8px 100%);\n}\n.editor-ui > .side > .container > .mini-toolbar-container > .undo-container > button:last-of-type {\n\tmargin-left: 3px;\n\tclip-path: polygon(0 0, 100% 0, calc(100% - 8px) 100%, 0 100%);\n}\n\n.editor-ui > .side > .side-panel {\n\theight: 100%;\n\tbackground-color: var(--surface-secondary-color);\n\tpointer-events: auto;\n}\n\n.editor-ui > .side > .side-panel > .category-panel, .editor-ui > .side > .side-panel > .part-panel, .editor-ui > .side > .side-panel > .color-panel {\n\tdisplay: inline-block;\n\tvertical-align: top;\n\tpadding: 2px 2px 0 2px;\n\theight: 100%;\n\tbox-sizing: border-box;\n\toverflow-x: hidden;\n\toverflow-y: scroll;\n\tscrollbar-width: thin;\n}\n.editor-ui > .side > .side-panel > .category-panel > button > img {\n\twidth: 96px;\n\theight: 96px;\n}\n.editor-ui > .side > .side-panel > .part-panel.hidden {\n\tdisplay: none;\n}\n.editor-ui > .side > .side-panel > .color-panel.hidden {\n\tdisplay: none;\n}\n\n.editor-ui > .side > .side-panel button {\n\tdisplay: block;\n\tmargin: 0 0 2px 0;\n\tpadding: 5px;\n\tbackground-color: var(--button-color);\n\tborder: 2px solid rgb(38, 31, 88);\n\tcursor: pointer;\n}\n.editor-ui > .side > .side-panel button:hover {\n\tbackground-color: var(--button-hover-color);\n}\n@media (hover: none) {\n\t.editor-ui > .side > .side-panel button:hover {\n\t\tbackground-color: var(--button-color);\n\t}\n}\n.editor-ui > .side > .side-panel button:active {\n\tbackground-color: var(--button-active-color);\n}\n.editor-ui > .side > .side-panel button.selected {\n\tbackground-color: var(--button-hover-color);\n\tbox-shadow: inset 0 0 5px #fff;\n\tborder: 2px solid #fff;\n}\n.editor-ui > .side > .side-panel button > img {\n\tdisplay: block;\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 64px;\n\theight: 64px;\n\t-webkit-filter: drop-shadow(0 0 2px #000);\n\tfilter: drop-shadow(0 0 2px #000);\n\tpointer-events: none;\n\ttransition: opacity 0.25s ease-out;\n}\n.editor-ui > .side > .side-panel button > img.loading {\n\topacity: 0;\n\ttransition: none;\n}\n\n.editor-ui > .message {\n\tmargin: 10px 10px 10px calc(10px + var(--safe-area-left));\n\tpadding: 0;\n\tposition: absolute;\n\tfont-size: 30px;\n\tcolor: #ff9696;\n\ttext-shadow: 0 0 5px #000;\n\tpointer-events: none;\n\n\tleft: -10px;\n\topacity: 0;\n}\n.editor-ui > .message.green {\n\tcolor: #96ff96;\n}\n.editor-ui > .message.show {\n\tleft: 0;\n\topacity: 1;\n\ttransition: opacity 0.25s ease-in-out, left 0.25s ease-in-out;\n}\n.editor-ui > .message.hide {\n\tleft: 0;\n\topacity: 0;\n\ttransition: opacity 0.25s ease-in-out, left 0.25s ease-in-out;\n}\n",""]);const r=a},7296:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(1601),s=n.n(i),o=n(6314),a=n.n(o)()(s());a.push([t.id,".editor-checkpoint-order-ui {\n\tpointer-events: auto;\n}\n\n.editor-checkpoint-order-ui > .buttons {\n\tdisplay: inline-block;\n\tvertical-align: bottom;\n}\n.editor-checkpoint-order-ui > .buttons > button {\n\tdisplay: block;\n\tmargin: 0;\n\tpadding: 0;\n\tborder: none;\n\tbackground-color: var(--button-color);\n\tcursor: pointer;\n}\n.editor-checkpoint-order-ui > .buttons > button:hover {\n\tbackground-color: var(--button-hover-color);\n}\n.editor-checkpoint-order-ui > .buttons > button:active {\n\tbackground-color: var(--button-active-color);\n}\n@media (hover: none) {\n\t.editor-checkpoint-order-ui > .buttons > button:hover {\n\t\tbackground-color: var(--button-color);\n\t}\n}\n\n.editor-checkpoint-order-ui > .buttons > button > img {\n\tmargin: 0;\n\tpadding: 0 6px;\n\twidth: 20px;\n\theight: 20px;\n\tvertical-align: bottom;\n\tpointer-events: none;\n}\n.editor-checkpoint-order-ui.touch > .buttons > button > img {\n\tpadding: 24px;\n\twidth: 40px;\n\theight: 40px;\n}\n\n.editor-checkpoint-order-ui > p {\n\tmargin: 0;\n\tpadding: 0 10px;\n\tdisplay: inline-block;\n\tvertical-align: bottom;\n\tline-height: 40px;\n\tmin-width: 275px;\n\tfont-size: 26px;\n\ttext-align: center;\n\tbackground-color: var(--surface-transparent-color);\n\tcolor: var(--text-color);\n}\n.editor-checkpoint-order-ui.touch > p {\n\tline-height: calc((40px + 2 * 24px) * 2);\n}\n",""]);const r=a},9242:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(1601),s=n.n(i),o=n(6314),a=n.n(o)()(s());a.push([t.id,".editor-help-ui > .background {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 1;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(20, 20, 30, 0.5);\n\tpointer-events: auto;\n}\n\n.editor-help-ui > .container {\n\tposition: absolute;\n\tleft: calc(50% - 80% / 2);\n\ttop: 0;\n\tz-index: 2;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbox-sizing: border-box;\n\twidth: 80%;\n\theight: 100%;\n\tbackground-color: var(--surface-color);\n}\n\n.editor-help-ui > .container > h1 {\n\tmargin: 10px;\n\tpadding: 0;\n\tfont-weight: normal;\n\tfont-size: 38px;\n\ttext-align: center;\n\tcolor: var(--text-color);\n}\n\n.editor-help-ui > .container > .content {\n\tflex-grow: 1;\n\tpadding: 40px;\n\tbackground-color: var(--surface-secondary-color);\n\toverflow-y: auto;\n\tpointer-events: auto;\n}\n\n.editor-help-ui > .container > .content > h2 {\n\tmargin: 32px 0 16px 0;\n\tpadding: 0;\n\tfont-weight: normal;\n\tfont-size: 30px;\n\tcolor: var(--text-color);\n\tborder-bottom: 2px solid var(--text-color);\n}\n.editor-help-ui > .container > .content > h2:first-of-type {\n\tmargin-top: 0;\n}\n\n.editor-help-ui > .container > .content > p {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-size: 20px;\n\tcolor: var(--text-color);\n\twhite-space: pre-wrap;\n}\n\n.editor-help-ui > .container > .content > .part-images {\n\tdisplay: flex;\n\tjustify-content: space-around;\n}\n\n.editor-help-ui > .container > .content > .part-images > div {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.editor-help-ui > .container > .content > .part-images > div > img {\n\twidth: 128px;\n\theight: 128px;\n\tfilter: drop-shadow(0 4px 5px rgba(0, 0, 0, 0.4));\n\tpointer-events: none;\n\ttransition: opacity 0.25s ease-out;\n}\n.editor-help-ui > .container > .content > .part-images > div > img.loading {\n\topacity: 0;\n}\n\n.editor-help-ui > .container > .content > .part-images > div > span {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-size: 20px;\n\tcolor: var(--text-color);\n\ttext-align: center;\n}\n\n.editor-help-ui > .container > .button-wrapper > button {\n\tmargin: 10px;\n}\n",""]);const r=a}}]);